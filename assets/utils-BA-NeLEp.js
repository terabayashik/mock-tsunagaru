import{G as b}from"./react-Bl1EszzN.js";const w={},_=Symbol((w?"production":void 0)!=="production"?"RESET":""),p=t=>typeof(t==null?void 0:t.then)=="function";function I(t=()=>{try{return window.localStorage}catch(i){(w?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(i);return}},a){var i;let v,u;const m={getItem:(n,e)=>{var o,s;const l=f=>{if(f=f||"",v!==f){try{u=JSON.parse(f,a==null?void 0:a.reviver)}catch{return e}v=f}return u},d=(s=(o=t())==null?void 0:o.getItem(n))!=null?s:null;return p(d)?d.then(l):l(d)},setItem:(n,e)=>{var o;return(o=t())==null?void 0:o.setItem(n,JSON.stringify(e,void 0))},removeItem:n=>{var e;return(e=t())==null?void 0:e.removeItem(n)}},c=n=>(e,o,s)=>n(e,l=>{let d;try{d=JSON.parse(l||"")}catch{d=s}o(d)});let r;try{r=(i=t())==null?void 0:i.subscribe}catch{}return!r&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(r=(n,e)=>{if(!(t()instanceof window.Storage))return()=>{};const o=s=>{s.storageArea===t()&&s.key===n&&e(s.newValue)};return window.addEventListener("storage",o),()=>{window.removeEventListener("storage",o)}}),r&&(m.subscribe=c(r)),m}const h=I();function S(t,a,i=h,v){const u=b(a);return(w?"production":void 0)!=="production"&&(u.debugPrivate=!0),u.onMount=c=>{c(i.getItem(t,a));let r;return i.subscribe&&(r=i.subscribe(t,c,a)),r},b(c=>c(u),(c,r,n)=>{const e=typeof n=="function"?n(c(u)):n;return e===_?(r(u,a),i.removeItem(t)):p(e)?e.then(o=>(r(u,o),i.setItem(t,o))):(r(u,e),i.setItem(t,e))})}export{S as a};

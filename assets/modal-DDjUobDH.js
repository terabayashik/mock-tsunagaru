import{j as l}from"./jsx-runtime-D_zvdyIk.js";import{l as N,i as A,B as _,o as W,q as V,r as k,z as O,m as M,G as S}from"./react-Bl1EszzN.js";import{a as f}from"./chunk-QMGIS6GS-npKyu-26.js";import{c as se,a as j}from"./createReactComponent-Bo4FKQF2.js";import{h as ne,j as le,q as ce,r as ie,s as B,t as v}from"./layout-CG8-yu9n.js";const[de,ue]=se("Table component was not found in the tree");var g={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function ye(a,e){if(!e)return;const t={};return e.columnBorder&&a.withColumnBorders&&(t["data-with-column-border"]=!0),e.rowBorder&&a.withRowBorders&&(t["data-with-row-border"]=!0),e.striped&&a.striped&&(t["data-striped"]=a.striped),e.highlightOnHover&&a.highlightOnHover&&(t["data-hover"]=!0),e.captionSide&&a.captionSide&&(t["data-side"]=a.captionSide),e.stickyHeader&&a.stickyHeader&&(t["data-sticky"]=!0),t}function T(a,e){const t=`Table${a.charAt(0).toUpperCase()}${a.slice(1)}`,i=N((y,m)=>{const p=A(t,{},y),{classNames:o,className:s,style:r,styles:c,...n}=p,u=ue();return l.jsx(_,{component:a,ref:m,...ye(u,e),...u.getStyles(a,{className:s,classNames:o,style:r,styles:c,props:p}),...n})});return i.displayName=`@mantine/core/${t}`,i.classes=g,i}const C=T("th",{columnBorder:!0}),G=T("td",{columnBorder:!0}),x=T("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),q=T("thead",{stickyHeader:!0}),Z=T("tbody"),K=T("tfoot"),Q=T("caption",{captionSide:!0});function P({data:a}){return l.jsxs(l.Fragment,{children:[a.caption&&l.jsx(Q,{children:a.caption}),a.head&&l.jsx(q,{children:l.jsx(x,{children:a.head.map((e,t)=>l.jsx(C,{children:e},t))})}),a.body&&l.jsx(Z,{children:a.body.map((e,t)=>l.jsx(x,{children:e.map((i,y)=>l.jsx(G,{children:i},y))},t))}),a.foot&&l.jsx(K,{children:l.jsx(x,{children:a.foot.map((e,t)=>l.jsx(C,{children:e},t))})})]})}P.displayName="@mantine/core/TableDataRenderer";const pe={type:"scrollarea"},he=V((a,{minWidth:e,maxHeight:t,type:i})=>({scrollContainer:{"--table-min-width":k(e),"--table-max-height":k(t),"--table-overflow":i==="native"?"auto":void 0}})),R=N((a,e)=>{const t=A("TableScrollContainer",pe,a),{classNames:i,className:y,style:m,styles:p,unstyled:o,vars:s,children:r,minWidth:c,maxHeight:n,type:u,scrollAreaProps:w,...d}=t,I=W({name:"TableScrollContainer",classes:g,props:t,className:y,style:m,classNames:i,styles:p,unstyled:o,vars:s,varsResolver:he,rootSelector:"scrollContainer"});return l.jsx(_,{component:u==="scrollarea"?ne:"div",...u==="scrollarea"?n?{offsetScrollbars:"xy",...w}:{offsetScrollbars:"x",...w}:{},ref:e,...I("scrollContainer"),...d,children:l.jsx("div",{...I("scrollContainerInner"),children:r})})});R.classes=g;R.displayName="@mantine/core/TableScrollContainer";const me={withRowBorders:!0,verticalSpacing:7},we=V((a,{layout:e,captionSide:t,horizontalSpacing:i,verticalSpacing:y,borderColor:m,stripedColor:p,highlightOnHoverColor:o,striped:s,highlightOnHover:r,stickyHeaderOffset:c,stickyHeader:n})=>({table:{"--table-layout":e,"--table-caption-side":t,"--table-horizontal-spacing":M(i),"--table-vertical-spacing":M(y),"--table-border-color":m?O(m,a):void 0,"--table-striped-color":s&&p?O(p,a):void 0,"--table-highlight-on-hover-color":r&&o?O(o,a):void 0,"--table-sticky-header-offset":n?k(c):void 0}})),h=N((a,e)=>{const t=A("Table",me,a),{classNames:i,className:y,style:m,styles:p,unstyled:o,vars:s,horizontalSpacing:r,verticalSpacing:c,captionSide:n,stripedColor:u,highlightOnHoverColor:w,striped:d,highlightOnHover:I,withColumnBorders:E,withRowBorders:b,withTableBorder:L,borderColor:be,layout:Se,variant:X,data:$,children:ee,stickyHeader:ae,stickyHeaderOffset:Te,mod:te,tabularNums:oe,...re}=t,J=W({name:"Table",props:t,className:y,style:m,classes:g,classNames:i,styles:p,unstyled:o,rootSelector:"table",vars:s,varsResolver:we});return l.jsx(de,{value:{getStyles:J,stickyHeader:ae,striped:d===!0?"odd":d||void 0,highlightOnHover:I,withColumnBorders:E,withRowBorders:b,captionSide:n||"bottom"},children:l.jsx(_,{component:"table",variant:X,ref:e,mod:[{"data-with-table-border":L,"data-tabular-nums":oe},te],...J("table"),...re,children:ee||!!$&&l.jsx(P,{data:$})})})});h.classes=g;h.displayName="@mantine/core/Table";h.Td=G;h.Th=C;h.Tr=x;h.Thead=q;h.Tbody=Z;h.Tfoot=K;h.Caption=Q;h.ScrollContainer=R;h.DataRenderer=P;/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ee=j("outline","eye","IconEye",[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Le=j("outline","layout-grid","IconLayoutGrid",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oe=j("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);const ke=()=>{const a=le.getInstance(),e=ce.getInstance(),t=f.useCallback(async()=>await e.withLock("layouts-index",async()=>{try{const o=await a.readJSON("layouts/index.json");if(!o)return await a.writeJSON("layouts/index.json",[]),[];const s=ie.parse(o);return e.recordReadTimestamp("layouts/index.json"),s}catch(o){if(o instanceof B){if(o.message.includes("NotFoundError")||o.message.includes("Failed to read JSON"))return await a.writeJSON("layouts/index.json",[]),[];throw o}throw new Error(`レイアウト一覧の取得に失敗しました: ${o}`)}}),[e.recordReadTimestamp,e.withLock,a.readJSON,a.writeJSON]),i=f.useCallback(async o=>await e.withLock(`layout-${o}`,async()=>{var s;try{const r=await a.readJSON(`layouts/layout-${o}.json`);if(!r)return null;const c={...r,regions:((s=r.regions)==null?void 0:s.map((u,w)=>({...u,zIndex:u.zIndex??w})))||[]},n=v.parse(c);return e.recordReadTimestamp(`layouts/layout-${o}.json`),n}catch(r){throw r instanceof B?r:new Error(`レイアウト詳細の取得に失敗しました: ${r}`)}}),[e.recordReadTimestamp,e.withLock,a.readJSON]),y=f.useCallback(async o=>{const s=crypto.randomUUID(),r=new Date().toISOString(),c={id:s,...o,createdAt:r,updatedAt:r},n=v.parse(c);return await e.withLock("layouts-create",async()=>{try{await a.writeJSON(`layouts/layout-${s}.json`,n);const u=await t(),w={id:n.id,name:n.name,orientation:n.orientation,regionCount:n.regions.length,createdAt:n.createdAt,updatedAt:n.updatedAt},d=[...u,w];return await a.writeJSON("layouts/index.json",d),n}catch(u){throw new Error(`レイアウトの作成に失敗しました: ${u}`)}})},[t,e.withLock,a.writeJSON]),m=f.useCallback(async(o,s)=>await e.withLock(`layout-${o}`,async()=>{var r;try{const c=await a.readJSON(`layouts/layout-${o}.json`);if(!c)throw new Error("レイアウトが見つかりません");const n={...c,regions:((r=c.regions)==null?void 0:r.map((b,L)=>({...b,zIndex:b.zIndex??L})))||[]},w={...v.parse(n),...s,updatedAt:new Date().toISOString()},d=v.parse(w);await a.writeJSON(`layouts/layout-${o}.json`,d);const E=(await t()).map(b=>b.id===o?{id:d.id,name:d.name,orientation:d.orientation,regionCount:d.regions.length,createdAt:d.createdAt,updatedAt:d.updatedAt}:b);return await a.writeJSON("layouts/index.json",E),d}catch(c){throw new Error(`レイアウトの更新に失敗しました: ${c}`)}}),[t,e.withLock,a.readJSON,a.writeJSON]),p=f.useCallback(async o=>await e.withLock(`layout-${o}`,async()=>{try{await a.deleteFile(`layouts/layout-${o}.json`);const r=(await t()).filter(c=>c.id!==o);await a.writeJSON("layouts/index.json",r),e.clearTimestamp(`layouts/layout-${o}.json`)}catch(s){throw new Error(`レイアウトの削除に失敗しました: ${s}`)}}),[t,e.clearTimestamp,e.withLock,a.deleteFile,a.writeJSON]);return{getLayoutsIndex:t,getLayoutById:i,createLayout:y,updateLayout:m,deleteLayout:p}},D=S(!1),z=S({opened:!1,playlistId:null}),H=S(!1),Y=S({opened:!1,layoutId:null}),F=S({opened:!1,contentId:null}),U=S({opened:!1,playlistId:null}),Ce=S(null,(a,e,t)=>{switch(t.type){case"OPEN_PLAYLIST_CREATE":e(D,!0);break;case"CLOSE_PLAYLIST_CREATE":e(D,!1);break;case"OPEN_PLAYLIST_EDIT":e(z,{opened:!0,playlistId:t.playlistId});break;case"CLOSE_PLAYLIST_EDIT":e(z,{opened:!1,playlistId:null});break;case"OPEN_LAYOUT_CREATE":e(H,!0);break;case"CLOSE_LAYOUT_CREATE":e(H,!1);break;case"OPEN_LAYOUT_EDIT":e(Y,{opened:!0,layoutId:t.layoutId});break;case"CLOSE_LAYOUT_EDIT":e(Y,{opened:!1,layoutId:null});break;case"OPEN_CONTENT_PREVIEW":e(F,{opened:!0,contentId:t.contentId});break;case"CLOSE_CONTENT_PREVIEW":e(F,{opened:!1,contentId:null});break;case"OPEN_PLAYLIST_PREVIEW":e(U,{opened:!0,playlistId:t.playlistId});break;case"CLOSE_PLAYLIST_PREVIEW":e(U,{opened:!1,playlistId:null});break}});export{Oe as I,h as T,Le as a,Ee as b,z as c,U as d,Y as e,F as f,H as l,Ce as m,D as p,ke as u};

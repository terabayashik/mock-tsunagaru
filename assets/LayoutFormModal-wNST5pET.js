import{j as W}from"./jsx-runtime-D_zvdyIk.js";import{a as L}from"./chunk-QMGIS6GS-npKyu-26.js";import{u as rh}from"./use-mantine-color-scheme-Bh-JJ2Z9.js";import{S as qn,G as Re,P as Ri,k as nh,f as wl,N as bn,m as ih,F as Nn,M as ah,n as sh,I as oh}from"./layout-CG8-yu9n.js";import{I as Un,e as uh,T as ue,B as Fr,A as _i,d as lh,P as ch}from"./TextInput-DMku8_7E.js";import{o as Ml,B as $t,t as ar,H as fh,l as Pl,i as Rl,x as _l,F as dh,w as hh,q as ph,z as vh,s as gh}from"./react-Bl1EszzN.js";import{I as mh}from"./modal-DDjUobDH.js";import{a as yh}from"./createReactComponent-Bo4FKQF2.js";import{m as xh}from"./events-CgSWVLLi.js";var Al={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Sh=Al,Ol=L.forwardRef(({__staticSelector:t,__stylesApiProps:e,className:r,classNames:n,styles:i,unstyled:a,children:s,label:o,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:v="label",variant:g,style:m,vars:y,mod:x,...S},C)=>{const b=Ml({name:t,props:e,className:r,style:m,classes:Al,classNames:n,styles:i,unstyled:a});return W.jsx($t,{...b("root"),ref:C,__vars:{"--label-fz":fh(d),"--label-lh":ar(d,"label-lh")},mod:[{"label-position":h},x],variant:g,size:d,...S,children:W.jsxs($t,{component:p,htmlFor:p==="label"?l:void 0,...b("body"),children:[s,W.jsxs("div",{...b("labelWrapper"),"data-disabled":c||void 0,children:[o&&W.jsx($t,{component:v,htmlFor:v==="label"?l:void 0,...b("label"),"data-disabled":c||void 0,children:o}),u&&W.jsx(Un.Description,{size:d,__inheritStyles:!1,...b("description"),children:u}),f&&typeof f!="boolean"&&W.jsx(Un.Error,{size:d,__inheritStyles:!1,...b("error"),children:f})]})]})})});Ol.displayName="@mantine/core/InlineInput";function bh({children:t,role:e}){const r=uh();return r?W.jsx("div",{role:e,"aria-labelledby":r.labelId,"aria-describedby":r.describedBy,children:t}):W.jsx(W.Fragment,{children:t})}const Il=L.createContext(null),Ch=Il.Provider,Dh=()=>L.useContext(Il),Th={},$a=Pl((t,e)=>{const{value:r,defaultValue:n,onChange:i,size:a,wrapperProps:s,children:o,readOnly:u,...l}=Rl("SwitchGroup",Th,t),[c,f]=_l({value:r,defaultValue:n,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(v=>v!==p):[...c,p])};return W.jsx(Ch,{value:{value:c,onChange:d,size:a},children:W.jsx(Un.Wrapper,{size:a,ref:e,...s,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:W.jsx(bh,{role:"group",children:o})})})});$a.classes=Un.Wrapper.classes;$a.displayName="@mantine/core/SwitchGroup";var kl={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const Eh={labelPosition:"right",withThumbIndicator:!0},wh=ph((t,{radius:e,color:r,size:n})=>({root:{"--switch-radius":e===void 0?void 0:gh(e),"--switch-height":ar(n,"switch-height"),"--switch-width":ar(n,"switch-width"),"--switch-thumb-size":ar(n,"switch-thumb-size"),"--switch-label-font-size":ar(n,"switch-label-font-size"),"--switch-track-label-padding":ar(n,"switch-track-label-padding"),"--switch-color":r?vh(r,t):void 0}})),fi=Pl((t,e)=>{const r=Rl("Switch",Eh,t),{classNames:n,className:i,style:a,styles:s,unstyled:o,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:v,wrapperProps:g,thumbIcon:m,checked:y,defaultChecked:x,onChange:S,labelPosition:C,description:b,error:T,disabled:D,variant:w,rootRef:E,mod:A,withThumbIndicator:_,...R}=r,I=Dh(),k=p||(I==null?void 0:I.size),O=Ml({name:"Switch",props:r,classes:kl,className:i,style:a,classNames:n,styles:s,unstyled:o,vars:u,varsResolver:wh}),{styleProps:B,rest:F}=dh(R),G=hh(h),j=I?{checked:I.value.includes(F.value),onChange:I.onChange}:{},[z,U]=_l({value:j.checked??y,defaultValue:x,finalValue:!1});return W.jsxs(Ol,{...O("root"),__staticSelector:"Switch",__stylesApiProps:r,id:G,size:k,labelPosition:C,label:c,description:b,error:T,disabled:D,bodyElement:"label",labelElement:"span",classNames:n,styles:s,unstyled:o,"data-checked":j.checked||y||void 0,variant:w,ref:E,mod:A,...B,...g,children:[W.jsx("input",{...F,disabled:D,checked:z,"data-checked":j.checked||y||void 0,onChange:$=>{var Y;I?(Y=j.onChange)==null||Y.call(j,$):S==null||S($),U($.currentTarget.checked)},id:G,ref:e,type:"checkbox",role:"switch",...O("input")}),W.jsxs($t,{"aria-hidden":"true",component:"span",mod:{error:T,"label-position":C,"without-labels":!d&&!f},...O("track"),children:[W.jsx($t,{component:"span",mod:{"reduce-motion":!0,"with-thumb-indicator":_&&!m},...O("thumb"),children:m}),W.jsx("span",{...O("trackLabel"),children:z?d:f})]})]})});fi.classes={...kl,...Sh};fi.displayName="@mantine/core/Switch";fi.Group=$a;/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mh=yh("outline","grip-vertical","IconGripVertical",[["path",{d:"M9 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M9 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M9 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M15 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M15 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M15 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}]]);function Ka(t,e){for(var r=t.length,n=0;n<r;++n)if(e(t[n],n))return!0;return!1}function Bl(t,e){for(var r=t.length,n=0;n<r;++n)if(e(t[n],n))return t[n];return null}function Vl(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function Za(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Ph(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function Rh(t,e){var r=Za("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return r?r[3]:""}function na(t){return t.replace(/_/g,".")}function kr(t,e){var r=null,n="-1";return Ka(t,function(i){var a=Za("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(r=i,n=a[3]||"-1",i.versionAlias?n=i.versionAlias:i.versionTest&&(n=Rh(i.versionTest.toLowerCase(),e)||n),n=na(n),!0)}),{preset:r,version:n}}function Cn(t,e){var r={brand:"",version:"-1"};return Ka(t,function(n){var i=zl(e,n);return i?(r.brand=n.id,r.version=n.versionAlias||i.version,r.version!=="-1"):!1}),r}function zl(t,e){return Bl(t,function(r){var n=r.brand;return Za(""+e.test,n.toLowerCase())})}var Fl=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Gl=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],ia=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Ll=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Nl=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function jl(t){return!!kr(Ll,t).preset}function _h(t){var e=Vl(t),r=!!/mobi/g.exec(e),n={name:"unknown",version:"-1",majorVersion:-1,webview:jl(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=kr(Fl,e),s=a.preset,o=a.version,u=kr(Nl,e),l=u.preset,c=u.version,f=kr(Gl,e);if(n.chromium=!!f.preset,n.chromiumVersion=f.version,!n.chromium){var d=kr(ia,e);n.webkit=!!d.preset,n.webkitVersion=d.version}return l&&(i.name=l.id,i.version=c,i.majorVersion=parseInt(c,10)),s&&(n.name=s.id,n.version=o,n.webview&&i.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:i,isMobile:r,isHints:!1}}function Ah(t){var e=navigator.userAgentData,r=(e.uaList||e.brands).slice(),n=e.mobile||!1,i=r[0],a=(e.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Cn(Ll,r).brand||jl(Vl())},o={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&Ka(ia,function(d){return zl(r,d)});var u=Cn(Gl,r);if(s.chromium=!!u.brand,s.chromiumVersion=u.version||"-1",!s.chromium){var l=Cn(ia,r);s.webkit=!!l.brand,s.webkitVersion=l.version||"-1"}var c=Bl(Nl,function(d){return new RegExp(""+d.test,"g").exec(a)});o.name=c?c.id:"";{var f=Cn(Fl,r);s.name=f.brand||s.name,s.version=f.brand&&t?t.uaFullVersion:f.version}return s.webkit&&(o.name=n?"ios":"mac"),o.name==="ios"&&s.webview&&(s.version="-1"),o.version=na(o.version),s.version=na(s.version),o.majorVersion=parseInt(o.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:o,isMobile:n,isHints:!0}}function Oh(t){return Ph()?Ah():_h(t)}function Ih(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.map(function(n){return n.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function kh(t,e){return e.replace(/([^}{]*){/gm,function(r,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function $e(t,e){return function(r){r&&(t[e]=r)}}function Wl(t,e,r){return function(n){n&&(t[e][r]=n)}}function Bh(t,e){return e===void 0&&(e={}),function(r,n){t.forEach(function(i){var a=e[i]||i;a in r||(r[a]=function(){for(var s,o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];var l=(s=this[n])[i].apply(s,o);return l===this[n]?this:l})})}}var Vh="function",zh="object",Fh="string",Gh="number",Ja="undefined",Hl=typeof window!==Ja,Lh=typeof document!==Ja&&document,Nh=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Rt=1e-7,Dn={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function jh(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)n[i]=a[s];return n}function $n(t,e,r,n){return(t*n+e*r)/(r+n)}function Qa(t){return typeof t===Ja}function fe(t){return t&&typeof t===zh}function kt(t){return Array.isArray(t)}function Te(t){return typeof t===Fh}function Kr(t){return typeof t===Gh}function ts(t){return typeof t===Vh}function Wh(t,e){var r=t===""||t==" ",n=e===""||e==" ";return n&&r||t===e}function Yl(t,e,r,n,i){var a=es(t,e,r);return a?r:Hh(t,e,r+1,n,i)}function es(t,e,r){if(!t.ignore)return null;var n=e.slice(Math.max(r-3,0),r+3).join("");return new RegExp(t.ignore).exec(n)}function Hh(t,e,r,n,i){for(var a=function(l){var c=e[l].trim();if(c===t.close&&!es(t,e,l))return{value:l};var f=l,d=Jt(i,function(h){var p=h.open;return p===c});if(d&&(f=Yl(d,e,l,n,i)),f===-1)return s=l,"break";l=f,s=l},s,o=r;o<n;++o){var u=a(o);if(o=s,typeof u=="object")return u.value;if(u==="break")break}return-1}function rs(t,e){var r=Te(e)?{separator:e}:e,n=r.separator,i=n===void 0?",":n,a=r.isSeparateFirst,s=r.isSeparateOnlyOpenClose,o=r.isSeparateOpenClose,u=o===void 0?s:o,l=r.openCloseCharacters,c=l===void 0?Nh:l,f=c.map(function(T){var D=T.open,w=T.close;return D===w?D:D+"|"+w}).join("|"),d="(\\s*"+i+"\\s*|"+f+"|\\s+)",h=new RegExp(d,"g"),p=t.split(h).filter(function(T){return T&&T!=="undefined"}),v=p.length,g=[],m=[];function y(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var x=function(T){var D=p[T].trim(),w=T,E=Jt(c,function(R){var I=R.open;return I===D}),A=Jt(c,function(R){var I=R.close;return I===D});if(E){if(w=Yl(E,p,T,v,c),w!==-1&&u)return y()&&a||(g.push(p.slice(T,w+1).join("")),T=w,a)?(S=T,"break"):(S=T,"continue")}else if(A&&!es(A,p,T)){var _=jh(c);return _.splice(c.indexOf(A),1),{value:rs(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:u,openCloseCharacters:_})}}else if(Wh(D,i)&&!s)return y(),a?(S=T,"break"):(S=T,"continue");w===-1&&(w=v-1),m.push(p.slice(T,w+1).join("")),T=w,S=T},S,C=0;C<v;++C){var b=x(C);if(C=S,typeof b=="object")return b.value;if(b==="break")break}return m.length&&g.push(m.join("")),g}function Ie(t){return rs(t,"")}function Xe(t){return rs(t,",")}function Xl(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function ln(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var r=e[1],n=e[2],i=e[3];return{prefix:r,unit:i,value:parseFloat(n)}}function Yh(t,e){return t.replace(/([a-z])([A-Z])/g,function(r,n,i){return""+n+e+i.toLowerCase()})}function Zr(){return Date.now?Date.now():new Date().getTime()}function be(t,e,r){r===void 0&&(r=-1);for(var n=t.length,i=0;i<n;++i)if(e(t[i],i,t))return i;return r}function Jt(t,e,r){var n=be(t,e);return n>-1?t[n]:r}var ql=function(){var t=Zr(),e=Hl&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(r){var n=Zr(),i=setTimeout(function(){r(n-t)},1e3/60);return i}}(),Xh=function(){var t=Hl&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function wr(t){return Object.keys(t)}function vt(t,e){var r=ln(t),n=r.value,i=r.unit;if(fe(e)){var a=e[i];if(a){if(ts(a))return a(n);if(Dn[i])return Dn[i](n,a)}}else if(i==="%")return n*e/100;return Dn[i]?Dn[i](n):n}function aa(t,e,r){return Math.max(e,Math.min(t,r))}function So(t,e,r,n){return n===void 0&&(n=t[0]/t[1]),[[st(e[0],Rt),st(e[0]/n,Rt)],[st(e[1]*n,Rt),st(e[1],Rt)]].filter(function(i){return i.every(function(a,s){var o=e[s],u=st(o,Rt);return r?a<=o||a<=u:a>=o||a>=u})})[0]||t}function Ul(t,e,r,n){if(!n)return t.map(function(h,p){return aa(h,e[p],r[p])});var i=t[0],a=t[1],s=n===!0?i/a:n,o=So(t,e,!1,s),u=o[0],l=o[1],c=So(t,r,!0,s),f=c[0],d=c[1];return i<u||a<l?(i=u,a=l):(i>f||a>d)&&(i=f,a=d),[i,a]}function qh(t){for(var e=t.length,r=0,n=e-1;n>=0;--n)r+=t[n];return r}function sa(t){for(var e=t.length,r=0,n=e-1;n>=0;--n)r+=t[n];return e?r/e:0}function Et(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=Math.atan2(n,r);return i>=0?i:i+Math.PI*2}function Uh(t){return[0,1].map(function(e){return sa(t.map(function(r){return r[e]}))})}function bo(t){var e=Uh(t),r=Et(e,t[0]),n=Et(e,t[1]);return r<n&&n-r<Math.PI||r>n&&n-r<-Math.PI?1:-1}function xe(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function st(t,e){if(!e)return t;var r=1/e;return Math.round(t/e)/r}function Co(t,e){return t.forEach(function(r,n){t[n]=st(t[n],e)}),t}function $h(t){for(var e=[],r=0;r<t;++r)e.push(r);return e}function Kh(t){return t.reduce(function(e,r){return e.concat(r)},[])}function At(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function $l(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function Kl(t,e){if(t.classList)t.classList.remove(e);else{var r=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(r," ")}}function Ft(t,e,r,n){t.addEventListener(e,r,n)}function Bt(t,e,r,n){t.removeEventListener(e,r,n)}function ns(t){return(t==null?void 0:t.ownerDocument)||Lh}function is(t){return ns(t).documentElement}function Fe(t){return ns(t).body}function Oe(t){var e;return((e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function Zl(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function as(t){return fe(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}function Zh(t,e,r,n,i,a){for(var s=0;s<i;++s){var o=r+s*i,u=n+s*i;t[o]+=t[u]*a,e[o]+=e[u]*a}}function Jh(t,e,r,n,i){for(var a=0;a<i;++a){var s=r+a*i,o=n+a*i,u=t[s],l=e[s];t[s]=t[o],t[o]=u,e[s]=e[o],e[o]=l}}function Qh(t,e,r,n,i){for(var a=0;a<n;++a){var s=r+a*n;t[s]/=i,e[s]/=i}}function Jl(t,e,r){for(var n=t.slice(),i=0;i<r;++i)n[i*r+e-1]=0,n[(e-1)*r+i]=0;return n[(e-1)*(r+1)]=1,n}function me(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var r=t.slice(),n=xt(e),i=0;i<e;++i){var a=e*i+i;if(!st(r[a],Rt)){for(var s=i+1;s<e;++s)if(r[e*i+s]){Jh(r,n,i,s,e);break}}if(!st(r[a],Rt))return[];Qh(r,n,i,e,r[a]);for(var s=0;s<e;++s){var o=s,u=s+i*e,l=r[u];!st(l,Rt)||i===s||Zh(r,n,o,i,e,-l)}}return n}function tp(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var r=[],n=0;n<e;++n)for(var i=0;i<e;++i)r[i*e+n]=t[e*n+i];return r}function Ql(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var r=[],n=t[e*e-1],i=0;i<e-1;++i)r[i]=t[e*(e-1)+i]/n;return r[e-1]=0,r}function ep(t,e){for(var r=xt(e),n=0;n<e-1;++n)r[e*(e-1)+n]=t[n]||0;return r}function Je(t,e){for(var r=t.slice(),n=t.length;n<e-1;++n)r[n]=0;return r[e-1]=1,r}function de(t,e,r){if(e===void 0&&(e=Math.sqrt(t.length)),e===r)return t;for(var n=xt(r),i=Math.min(e,r),a=0;a<i-1;++a){for(var s=0;s<i-1;++s)n[a*r+s]=t[a*e+s];n[(a+1)*r-1]=t[(a+1)*e-1],n[(r-1)*r+a]=t[(e-1)*e+a]}return n[r*r-1]=t[e*e-1],n}function Kn(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=xt(t);return e.forEach(function(i){n=gt(n,i,t)}),n}function gt(t,e,r){r===void 0&&(r=Math.sqrt(t.length));var n=[],i=t.length/r,a=e.length/i;if(i){if(!a)return t}else return e;for(var s=0;s<r;++s)for(var o=0;o<a;++o){n[o*r+s]=0;for(var u=0;u<i;++u)n[o*r+s]+=t[u*r+s]*e[o*i+u]}return n}function dt(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]+e[i];return n}function rt(t,e){for(var r=Math.min(t.length,e.length),n=t.slice(),i=0;i<r;++i)n[i]=n[i]-e[i];return n}function rp(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function tc(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Lt(t,e,r){r===void 0&&(r=e.length);var n=gt(t,e,r),i=n[r-1];return n.map(function(a){return a/i})}function np(t,e){return gt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function ip(t,e){return gt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function ap(t,e){return gt(t,fn(e,4))}function Tn(t,e){var r=e[0],n=r===void 0?1:r,i=e[1],a=i===void 0?1:i,s=e[2],o=s===void 0?1:s;return gt(t,[n,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function cn(t,e){return Lt(fn(e,3),Je(t,3))}function Ai(t,e){var r=e[0],n=r===void 0?0:r,i=e[1],a=i===void 0?0:i,s=e[2],o=s===void 0?0:s;return gt(t,[1,0,0,0,0,1,0,0,0,0,1,0,n,a,o,1],4)}function Do(t,e){return gt(t,e,4)}function fn(t,e){var r=Math.cos(t),n=Math.sin(t),i=xt(e);return i[0]=r,i[1]=n,i[e]=-n,i[e+1]=r,i}function xt(t){for(var e=t*t,r=[],n=0;n<e;++n)r[n]=n%(t+1)?0:1;return r}function ss(t,e){for(var r=xt(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[(e+1)*i]=t[i];return r}function Qe(t,e){for(var r=xt(e),n=Math.min(t.length,e-1),i=0;i<n;++i)r[e*(e-1)+i]=t[i];return r}function os(t,e,r,n,i,a,s,o){var u=t[0],l=t[1],c=e[0],f=e[1],d=r[0],h=r[1],p=n[0],v=n[1],g=i[0],m=i[1],y=a[0],x=a[1],S=s[0],C=s[1],b=o[0],T=o[1],D=[u,0,c,0,d,0,p,0,l,0,f,0,h,0,v,0,1,0,1,0,1,0,1,0,0,u,0,c,0,d,0,p,0,l,0,f,0,h,0,v,0,1,0,1,0,1,0,1,-g*u,-m*u,-y*c,-x*c,-S*d,-C*d,-b*p,-T*p,-g*l,-m*l,-y*f,-x*f,-S*h,-C*h,-b*v,-T*v],w=me(D,8);if(!w.length)return[];var E=gt(w,[g,m,y,x,S,C,b,T],8);return E[8]=1,de(tp(E),3,4)}var Gr=function(){return Gr=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Gr.apply(this,arguments)};function sp(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Jr(t,e){return e===void 0&&(e=0),sr(yr(t,e))}function op(t,e){var r=Lt(t,[e[0],e[1]||0,e[2]||0,1],4),n=r[3]||1;return[r[0]/n,r[1]/n,r[2]/n]}function sr(t){var e=sp();return t.forEach(function(r){var n=r.matrixFunction,i=r.functionValue;n&&(e=n(e,i))}),e}function yr(t,e){e===void 0&&(e=0);var r=kt(t)?t:Ie(t);return r.map(function(n){var i=Xl(n),a=i.prefix,s=i.value,o=null,u=a,l="";if(a==="translate"||a==="translateX"||a==="translate3d"){var c=fe(e)?Gr(Gr({},e),{"o%":e["%"]}):{"%":e,"o%":e},f=Xe(s).map(function(R,I){return I===0&&"x%"in c?c["%"]=e["x%"]:I===1&&"y%"in c?c["%"]=e["y%"]:c["%"]=e["o%"],vt(R,c)}),d=f[0],h=f[1],p=h===void 0?0:h,v=f[2],g=v===void 0?0:v;o=Ai,l=[d,p,g]}else if(a==="translateY"){var m=fe(e)?Gr({"%":e["y%"]},e):{"%":e},p=vt(s,m);o=Ai,l=[0,p,0]}else if(a==="translateZ"){var g=parseFloat(s);o=Ai,l=[0,0,g]}else if(a==="scale"||a==="scale3d"){var y=Xe(s).map(function(R){return parseFloat(R)}),x=y[0],S=y[1],C=S===void 0?x:S,b=y[2],T=b===void 0?1:b;o=Tn,l=[x,C,T]}else if(a==="scaleX"){var x=parseFloat(s);o=Tn,l=[x,1,1]}else if(a==="scaleY"){var C=parseFloat(s);o=Tn,l=[1,C,1]}else if(a==="scaleZ"){var T=parseFloat(s);o=Tn,l=[1,1,T]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var D=ln(s),w=D.unit,E=D.value,A=w==="rad"?E:E*Math.PI/180;a==="rotate"||a==="rotateZ"?(u="rotateZ",o=ap):a==="rotateX"?o=np:a==="rotateY"&&(o=ip),l=A}else if(a==="matrix3d")o=Do,l=Xe(s).map(function(R){return parseFloat(R)});else if(a==="matrix"){var _=Xe(s).map(function(R){return parseFloat(R)});o=Do,l=[_[0],_[1],0,0,_[2],_[3],0,0,0,0,1,0,_[4],_[5],0,1]}else u="";return{name:a,functionName:u,value:s,matrixFunction:o,functionValue:l}})}var up=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(r){return this.values[this.keys.indexOf(r)]},e.set=function(r,n){var i=this.keys,a=this.values,s=i.indexOf(r),o=s===-1?i.length:s;i[o]=r,a[o]=n},t}(),lp=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(r){return this.object[r]},e.set=function(r,n){this.object[r]=n},t}(),cp=typeof Map=="function",fp=function(){function t(){}var e=t.prototype;return e.connect=function(r,n){this.prev=r,this.next=n,r&&(r.next=this),n&&(n.prev=this)},e.disconnect=function(){var r=this.prev,n=this.next;r&&(r.next=n),n&&(n.prev=r)},e.getIndex=function(){for(var r=this,n=-1;r;)r=r.prev,++n;return n},t}();function dp(t,e){var r=[],n=[];return t.forEach(function(i){var a=i[0],s=i[1],o=new fp;r[a]=o,n[s]=o}),r.forEach(function(i,a){i.connect(r[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var s=i[0],o=i[1];if(s===o)return[0,0];var u=r[s],l=n[o-1],c=u.getIndex();u.disconnect(),l?u.connect(l,l.next):u.connect(void 0,r[0]);var f=u.getIndex();return[c,f]})}var hp=function(){function t(r,n,i,a,s,o,u,l){this.prevList=r,this.list=n,this.added=i,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=u,this.fixed=l}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var r=dp(this.changedBeforeAdded,this.fixed),n=this.changed,i=[];this.cacheOrdered=r.filter(function(a,s){var o=a[0],u=a[1],l=n[s],c=l[0],f=l[1];if(o!==u)return i.push([c,f]),!0}),this.cachePureChanged=i},t}();function us(t,e,r){var n=cp?Map:r?lp:up,i=r||function(y){return y},a=[],s=[],o=[],u=t.map(i),l=e.map(i),c=new n,f=new n,d=[],h=[],p={},v=[],g=0,m=0;return u.forEach(function(y,x){c.set(y,x)}),l.forEach(function(y,x){f.set(y,x)}),u.forEach(function(y,x){var S=f.get(y);typeof S>"u"?(++m,s.push(x)):p[S]=m}),l.forEach(function(y,x){var S=c.get(y);typeof S>"u"?(a.push(x),++g):(o.push([S,x]),m=p[x]||0,d.push([S-m,x-g]),h.push(x===S),S!==x&&v.push([S,x]))}),s.reverse(),new hp(t,e,a,s,v,o,d,h)}var pp=function(){function t(r,n){r===void 0&&(r=[]),this.findKeyCallback=n,this.list=[].slice.call(r)}var e=t.prototype;return e.update=function(r){var n=[].slice.call(r),i=us(this.list,n,this.findKeyCallback);return this.list=n,i},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var oa=function(t,e){return oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},oa(t,e)};function vp(t,e){oa(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ec=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),rc=function(t){vp(e,t);function e(r){return r===void 0&&(r=[]),t.call(this,r,ec)||this}return e}(pp);function gp(t,e){return us(t,e,ec)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ua=function(){return ua=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ua.apply(this,arguments)};function mp(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)n[i]=a[s];return n}var ls=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(r,n){if(fe(r))for(var i in r)this.on(i,r[i]);else this._addEvent(r,n,{});return this},e.off=function(r,n){if(!r)this._events={};else if(fe(r))for(var i in r)this.off(i);else if(!n)this._events[r]=[];else{var a=this._events[r];if(a){var s=be(a,function(o){return o.listener===n});s>-1&&a.splice(s,1)}}return this},e.once=function(r,n){var i=this;return n&&this._addEvent(r,n,{once:!0}),new Promise(function(a){i._addEvent(r,a,{once:!0})})},e.emit=function(r,n){var i=this;n===void 0&&(n={});var a=this._events[r];if(!r||!a)return!0;var s=!1;return n.eventType=r,n.stop=function(){s=!0},n.currentTarget=this,mp(a).forEach(function(o){o.listener(n),o.once&&i.off(r,o.listener)}),!s},e.trigger=function(r,n){return n===void 0&&(n={}),this.emit(r,n)},e._addEvent=function(r,n,i){var a=this._events;a[r]=a[r]||[];var s=a[r];s.push(ua({listener:n},i))},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var la=function(t,e){return la=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},la(t,e)};function yp(t,e){la(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var or=function(){return or=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},or.apply(this,arguments)};function xp(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function To(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function En(t){if(t){if(Te(t))return document.querySelector(t)}else return null;if(ts(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var Sp=function(t){yp(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var i=n._currentOptions;n._lock||!i||n.emit("scrollDrag",{next:function(a){n.checkScroll({container:i.container,inputEvent:a})}})},n}var r=e.prototype;return r.dragStart=function(n,i){var a=En(i.container);if(!a){this._flag=!1;return}var s=0,o=0,u=0,l=0;if(a===document.body)u=window.innerWidth,l=window.innerHeight;else{var c=a.getBoundingClientRect();s=c.top,o=c.left,u=c.width,l=c.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:s,left:o,width:u,height:l},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},r.drag=function(n,i){if(clearTimeout(this._timer),!!this._flag){var a=n.clientX,s=n.clientY,o=i.threshold,u=o===void 0?0:o,l=this,c=l._startRect,f=l._startPos;this._currentOptions=i;var d=[0,0];return c.top>s-u?(f[1]>c.top||s<f[1])&&(d[1]=-1):c.top+c.height<s+u&&(f[1]<c.top+c.height||s>f[1])&&(d[1]=1),c.left>a-u?(f[0]>c.left||a<f[0])&&(d[0]=-1):c.left+c.width<a+u&&(f[0]<c.left+c.width||a>f[0])&&(d[0]=1),!d[0]&&!d[1]?!1:this._continueDrag(or(or({},i),{direction:d,inputEvent:n,isDrag:!0}))}},r.checkScroll=function(n){var i=this;if(this._isWait)return!1;var a=n.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=n.direction,u=n.throttleTime,l=u===void 0?0:u,c=n.inputEvent,f=n.isDrag,d=this._getScrollPosition(o||[0,0],n),h=d[0]-s[0],p=d[1]-s[1],v=o||[h?Math.abs(h)/h:0,p?Math.abs(p)/p:0];return this._prevScrollPos=d,this._lock=!1,!h&&!p?!1:(this.emit("move",{offsetX:v[0]?h:0,offsetY:v[1]?p:0,inputEvent:c}),l&&f&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},l)),!0)},r.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},r._getScrollPosition=function(n,i){var a=i.container,s=i.getScrollPosition,o=s===void 0?xp:s;return o({container:En(a),direction:n})},r._continueDrag=function(n){var i=this,a,s=n.container,o=n.direction,u=n.throttleTime,l=n.useScroll,c=n.isDrag,f=n.inputEvent;if(!(!this._flag||c&&this._isWait)){var d=Zr(),h=Math.max(u+this._prevTime-d,0);if(h>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},h),!1;this._prevTime=d;var p=this._getScrollPosition(o,n);this._prevScrollPos=p,c&&(this._isWait=!0),l||(this._lock=!0);var v={container:En(s),direction:o,inputEvent:f};return(a=n.requestScroll)===null||a===void 0||a.call(n,v),this.emit("scroll",v),this._isWait=!1,l||this.checkScroll(or(or({},n),{prevScrollPos:p,direction:o,inputEvent:f}))}},r._registerScrollEvent=function(n){this._unregisterScrollEvent();var i=n.checkScrollEvent;if(i){var a=i===!0?To:i,s=En(n.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=To(window,this._onScroll):this._unregister=a(s,this._onScroll)}},r._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},e}(ls);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function bp(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)n[i]=a[s];return n}function Ut(t){return st(t,Rt)}function Cp(t,e){return t.every(function(r,n){return Ut(r-e[n])===0})}function Dp(t,e){return!Ut(t[0]-e[0])&&!Ut(t[1]-e[1])}function nc(t){return t.length<3?0:Math.abs(qh(t.map(function(e,r){var n=t[r+1]||t[0];return e[0]*n[1]-n[0]*e[1]})))/2}function Eo(t,e){var r=e.width,n=e.height,i=e.left,a=e.top,s=tr(t),o=s.minX,u=s.minY,l=s.maxX,c=s.maxY,f=r/(l-o),d=n/(c-u);return t.map(function(h){return[i+(h[0]-o)*f,a+(h[1]-u)*d]})}function tr(t){var e=t.map(function(n){return n[0]}),r=t.map(function(n){return n[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,r)}}function ca(t,e,r){var n=t[0],i=t[1],a=tr(e),s=a.minX,o=a.maxX,u=[[s,i],[o,i]],l=Zn(u[0],u[1]),c=fa(e),f=[];if(c.forEach(function(p){var v=Zn(p[0],p[1]),g=p[0];if(Cp(l,v))f.push({pos:t,line:p,type:"line"});else{var m=ic(cs(l,v),[u,p]);m.forEach(function(y){p.some(function(x){return Dp(x,y)})?f.push({pos:y,line:p,type:"point"}):Ut(g[1]-i)!==0&&f.push({pos:y,line:p,type:"intersection"})})}}),Jt(f,function(p){return p[0]===n}))return!0;var d=0,h={};return f.forEach(function(p){var v=p.pos,g=p.type,m=p.line;if(!(v[0]>n))if(g==="intersection")++d;else{if(g==="line")return;if(g==="point"){var y=Jt(m,function(C){return C[1]!==i}),x=h[v[0]],S=y[1]>i?1:-1;x?x!==S&&++d:h[v[0]]=S}}}),d%2===1}function Zn(t,e){var r=t[0],n=t[1],i=e[0],a=e[1],s=i-r,o=a-n;Math.abs(s)<Rt&&(s=0),Math.abs(o)<Rt&&(o=0);var u=0,l=0,c=0;return s?o?(u=-o/s,l=1,c=-u*r-n):(l=1,c=-n):o&&(u=-1,c=r),[u,l,c]}function cs(t,e){var r=t[0],n=t[1],i=t[2],a=e[0],s=e[1],o=e[2],u=r===0&&a===0,l=n===0&&s===0,c=[];if(u&&l)return[];if(u){var f=-i/n,d=-o/s;return f!==d?[]:[[-1/0,f],[1/0,f]]}else if(l){var h=-i/r,p=-o/a;return h!==p?[]:[[h,-1/0],[h,1/0]]}else if(r===0){var v=-i/n,g=-(s*v+o)/a;c=[[g,v]]}else if(a===0){var v=-o/s,g=-(n*v+i)/r;c=[[g,v]]}else if(n===0){var g=-i/r,v=-(a*g+o)/s;c=[[g,v]]}else if(s===0){var g=-o/a,v=-(r*g+i)/n;c=[[g,v]]}else{var g=(n*o-s*i)/(s*r-n*a),v=-(r*g+i)/n;c=[[g,v]]}return c.map(function(m){return[m[0],m[1]]})}function ic(t,e){var r=e.map(function(f){return[0,1].map(function(d){return[Math.min(f[0][d],f[1][d]),Math.max(f[0][d],f[1][d])]})}),n=[];if(t.length===2){var i=t[0],a=i[0],s=i[1];if(Ut(a-t[1][0])){if(!Ut(s-t[1][1])){var l=Math.max.apply(Math,r.map(function(f){return f[0][0]})),c=Math.min.apply(Math,r.map(function(f){return f[0][1]}));if(Ut(l-c)>0)return[];n=[[l,s],[c,s]]}}else{var o=Math.max.apply(Math,r.map(function(f){return f[1][0]})),u=Math.min.apply(Math,r.map(function(f){return f[1][1]}));if(Ut(o-u)>0)return[];n=[[a,o],[a,u]]}}return n.length||(n=t.filter(function(f){var d=f[0],h=f[1];return r.every(function(p){return 0<=Ut(d-p[0][0])&&0<=Ut(p[0][1]-d)&&0<=Ut(h-p[1][0])&&0<=Ut(p[1][1]-h)})})),n.map(function(f){return[Ut(f[0]),Ut(f[1])]})}function fa(t){return bp(t.slice(1),[t[0]]).map(function(e,r){return[t[r],e]})}function Tp(t,e){var r=t.slice(),n=e.slice();bo(r)===-1&&r.reverse(),bo(n)===-1&&n.reverse();var i=fa(r),a=fa(n),s=i.map(function(c){return Zn(c[0],c[1])}),o=a.map(function(c){return Zn(c[0],c[1])}),u=[];s.forEach(function(c,f){var d=i[f],h=[];o.forEach(function(p,v){var g=cs(c,p),m=ic(g,[d,a[v]]);h.push.apply(h,m.map(function(y){return{index1:f,index2:v,pos:y,type:"intersection"}}))}),h.sort(function(p,v){return xe(d[0],p.pos)-xe(d[0],v.pos)}),u.push.apply(u,h),ca(d[1],n)&&u.push({index1:f,index2:-1,pos:d[1],type:"inside"})}),a.forEach(function(c,f){if(ca(c[1],r)){var d=!1,h=be(u,function(p){var v=p.index2;return v===f?(d=!0,!1):!!d});h===-1&&(d=!1,h=be(u,function(p){var v=p.index1,g=p.index2;return v===-1&&g+1===f?(d=!0,!1):!!d})),h===-1?u.push({index1:-1,index2:f,pos:c[1],type:"inside"}):u.splice(h,0,{index1:-1,index2:f,pos:c[1],type:"inside"})}});var l={};return u.filter(function(c){var f=c.pos,d=f[0]+"x"+f[1];return l[d]?!1:(l[d]=!0,!0)})}function Ep(t,e){var r=Tp(t,e);return r.map(function(n){var i=n.pos;return i})}function wp(t,e){var r=Ep(t,e);return nc(r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var da=function(t,e){return da=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},da(t,e)};function Mp(t,e){da(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Mt=function(){return Mt=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Mt.apply(this,arguments)};function Pp(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=Math.atan2(n,r);return i>=0?i:i+Math.PI*2}function Oi(t){return Pp([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function Rp(t){return t.touches&&t.touches.length>=2}function wn(t){return t?t.touches?Ap(t.touches):[ac(t)]:[]}function _p(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function wo(t,e,r){var n=r.length,i=Lr(t,n),a=i.clientX,s=i.clientY,o=i.originalClientX,u=i.originalClientY,l=Lr(e,n),c=l.clientX,f=l.clientY,d=Lr(r,n),h=d.clientX,p=d.clientY,v=a-c,g=s-f,m=a-h,y=s-p;return{clientX:o,clientY:u,deltaX:v,deltaY:g,distX:m,distY:y}}function Ii(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Ap(t){for(var e=Math.min(t.length,2),r=[],n=0;n<e;++n)r.push(ac(t[n]));return r}function ac(t){return{clientX:t.clientX,clientY:t.clientY}}function Lr(t,e){e===void 0&&(e=t.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(t.length,e),i=0;i<n;++i){var a=t[i];r.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,r.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,r.clientX+=a.clientX,r.clientY+=a.clientY}return e?{clientX:r.clientX/e,clientY:r.clientY/e,originalClientX:r.originalClientX/e,originalClientY:r.originalClientY/e}:r}var ki=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),Oi(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),Oi(e)-Oi(this.startClients)},t.prototype.getPosition=function(e,r){e===void 0&&(e=this.prevClients);var n=wo(e||this.prevClients,this.prevClients,this.startClients),i=n.deltaX,a=n.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,n},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var r=this.prevClients,n=this.startClients,i=Math.min(this.length,r.length),a=[],s=0;s<i;++s)a[s]=wo([e[s]],[r[s]],[n[s]]);return a},t.prototype.getMovement=function(e){var r=this.movement;if(!e)return r;var n=Lr(e,this.length),i=Lr(this.prevClients,this.length),a=n.clientX-i.clientX,s=n.clientY-i.clientY;return Math.sqrt(a*a+s*s)+r},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),Ii(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),Ii(e)/Ii(this.startClients)},t.prototype.move=function(e,r){this.startClients.forEach(function(n){n.clientX-=e,n.clientY-=r}),this.prevClients.forEach(function(n){n.clientX-=e,n.clientY-=r})},t}(),Mo=["textarea","input"],Op=function(t){Mp(e,t);function e(r,n){n===void 0&&(n={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(d,h){if(h===void 0&&(h=!0),!(!i.flag&&d.cancelable===!1)){var p=d.type.indexOf("drag")>=-1;if(!(i.flag&&p)){i._isDragAPI=!0;var v=i.options,g=v.container,m=v.pinchOutside,y=v.preventWheelClick,x=v.preventRightClick,S=v.preventDefault,C=v.checkInput,b=v.dragFocusedInput,T=v.preventClickEventOnDragStart,D=v.preventClickEventOnDrag,w=v.preventClickEventByCondition,E=i._useTouch,A=!i.flag;if(i._isSecondaryButton=d.which===3||d.button===2,y&&(d.which===2||d.button===1)||x&&(d.which===3||d.button===2))return i.stop(),!1;if(A){var _=i._window.document.activeElement,R=d.target;if(R){var I=R.tagName.toLowerCase(),k=Mo.indexOf(I)>-1,O=R.isContentEditable;if(k||O){if(C||!b&&_===R)return!1;if(_&&(_===R||O&&_.isContentEditable&&_.contains(R)))if(b)R.blur();else return!1}else if((S||d.type==="touchstart")&&_){var B=_.tagName.toLowerCase();(_.isContentEditable||Mo.indexOf(B)>-1)&&_.blur()}(T||D||w)&&Ft(i._window,"click",i._onClick,!0)}i.clientStores=[new ki(wn(d))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=h,i._dragFlag=!0,i._prevInputEvent=d,i.data={},i.doubleFlag=Zr()-i.prevTime<200,i._isMouseEvent=_p(d),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var F=i._preventMouseEvent||i.emit("dragStart",Mt(Mt({data:i.data,datas:i.data,inputEvent:d,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:h,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){d.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));F===!1&&i.stop(),i._isMouseEvent&&i.flag&&S&&d.preventDefault()}if(!i.flag)return!1;var G=0;if(A?(i._attchDragEvent(),E&&m&&(G=setTimeout(function(){Ft(g,"touchstart",i.onDragStart,{passive:!1})}))):E&&m&&Bt(g,"touchstart",i.onDragStart),i.flag&&Rp(d)){if(clearTimeout(G),A&&d.touches.length!==d.changedTouches.length)return;i.pinchFlag||i.onPinchStart(d)}}}},i.onDrag=function(d,h){if(i.flag){var p=i.options.preventDefault;!i._isMouseEvent&&p&&d.preventDefault(),i._prevInputEvent=d;var v=wn(d),g=i.moveClients(v,d,!1);if(i._dragFlag){if(i.pinchFlag||g.deltaX||g.deltaY){var m=i._preventMouseEvent||i.emit("drag",Mt(Mt({},g),{isScroll:!!h,inputEvent:d}));if(m===!1){i.stop();return}}i.pinchFlag&&i.onPinch(d,v)}i.getCurrentStore().getPosition(v,!0)}},i.onDragEnd=function(d){if(i.flag){var h=i.options,p=h.pinchOutside,v=h.container,g=h.preventClickEventOnDrag,m=h.preventClickEventOnDragStart,y=h.preventClickEventByCondition,x=i.isDrag;(g||m||y)&&requestAnimationFrame(function(){i._allowClickEvent()}),!y&&!m&&g&&!x&&i._allowClickEvent(),i._useTouch&&p&&Bt(v,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(d);var S=d!=null&&d.touches?wn(d):[],C=S.length;C===0||!i.options.keepDragging?i.flag=!1:i._addStore(new ki(S));var b=i._getPosition(),T=Zr(),D=!x&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=x||D?0:T,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Mt({data:i.data,datas:i.data,isDouble:D,isDrag:x,isClick:!x,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:d,isTrusted:i._isTrusted},b)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Bt(i._window,"click",i._onClick,!0)},i._onClick=function(d){i._allowClickEvent(),i._allowMouseEvent();var h=i.options.preventClickEventByCondition;h!=null&&h(d)||(d.stopPropagation(),d.preventDefault())},i._onContextMenu=function(d){var h=i.options;h.preventRightClick?i.onDragEnd(d):d.preventDefault()},i._passCallback=function(){};var a=[].concat(r),s=a[0];i._window=Zl(s)?s:Oe(s),i.options=Mt({checkInput:!1,container:s&&!("document"in s)?Oe(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var o=i.options,u=o.container,l=o.events,c=o.checkWindowBlur;if(i._useDrag=l.indexOf("drag")>-1,i._useTouch=l.indexOf("touch")>-1,i._useMouse=l.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(d){Ft(d,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(d){Ft(d,"mousedown",i.onDragStart),Ft(d,"mousemove",i._passCallback)}),Ft(u,"contextmenu",i._onContextMenu)),c&&Ft(Oe(),"blur",i.onBlur),i._useTouch){var f={passive:!1};a.forEach(function(d){Ft(d,"touchstart",i.onDragStart,f),Ft(d,"touchmove",i._passCallback,f)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(n,i){return n+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(r,n,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(r,n),a&&this.onDrag(i,!0))},e.prototype.move=function(r,n){var i=r[0],a=r[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(u){var l=u.clientX,c=u.clientY;return{clientX:l+i,clientY:c+a,originalClientX:l,originalClientY:c}}),n,!0)},e.prototype.triggerDragStart=function(r){this.onDragStart(r,!1)},e.prototype.setEventData=function(r){var n=this.data;for(var i in r)n[i]=r[i];return this},e.prototype.setEventDatas=function(r){return this.setEventData(r)},e.prototype.getCurrentEvent=function(r){return r===void 0&&(r=this._prevInputEvent),Mt(Mt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var r=this,n=this.targets,i=this.options.container;this.off(),Bt(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(a){Bt(a,"dragstart",r.onDragStart)}),this._useMouse&&(n.forEach(function(a){Bt(a,"mousedown",r.onDragStart)}),Bt(i,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(a){Bt(a,"touchstart",r.onDragStart)}),Bt(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(r){var n=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new ki(wn(r));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",Mt(Mt({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:r,isTrusted:this._isTrusted,preventDefault:function(){r.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(r,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Mt(Mt({data:this.data,datas:this.data,movement:this.getMovement(n),angle:i.getAngle(n),rotation:i.getRotation(n),touches:i.getPositions(n),scale:i.getScale(n),distance:i.getDistance(n)},i.getPosition(n)),{inputEvent:r,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(r){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Mt(Mt({data:this.data,datas:this.data,isPinch:n,touches:i.getPositions()},i.getPosition()),{inputEvent:r}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(r,n,i){var a=this._getPosition(r,i),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),Mt(Mt({data:this.data,datas:this.data},a),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(r){this.clientStores.splice(0,0,r)},e.prototype._getPosition=function(r,n){var i=this.getCurrentStore(),a=i.getPosition(r,n),s=this.clientStores.slice(1).reduce(function(l,c){var f=c.getPosition();return l.distX+=f.distX,l.distY+=f.distY,l},a),o=s.distX,u=s.distY;return Mt(Mt({},a),{distX:o,distY:u})},e.prototype._attchDragEvent=function(){var r=this._window,n=this.options.container,i={passive:!1};this._isDragAPI&&(Ft(n,"dragover",this.onDrag,i),Ft(r,"dragend",this.onDragEnd)),this._useMouse&&(Ft(n,"mousemove",this.onDrag),Ft(r,"mouseup",this.onDragEnd)),this._useTouch&&(Ft(n,"touchmove",this.onDrag,i),Ft(r,"touchend",this.onDragEnd,i),Ft(r,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var r=this._window,n=this.options.container;this._isDragAPI&&(Bt(n,"dragover",this.onDrag),Bt(r,"dragend",this.onDragEnd)),this._useMouse&&(Bt(n,"mousemove",this.onDrag),Bt(r,"mouseup",this.onDragEnd)),this._useTouch&&(Bt(n,"touchstart",this.onDragStart),Bt(n,"touchmove",this.onDrag),Bt(r,"touchend",this.onDragEnd),Bt(r,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(ls);function Ip(t){for(var e=5381,r=t.length;r;)e=e*33^t.charCodeAt(--r);return e>>>0}var kp=Ip;function Bp(t){return kp(t).toString(36)}function Vp(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function zp(t,e,r){return r.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,i){var a=i.trim();return(a?Xe(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function Fp(t,e,r,n,i){var a=ns(n),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),r.nonce&&s.setAttribute("nonce",r.nonce),s.innerHTML=zp(t,e,r),(i||a.head||a.body).appendChild(s),s}function Gp(t){var e="rCS"+Bp(t);return{className:e,inject:function(r,n){n===void 0&&(n={});var i=Vp(r),a=(i||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=Fp(e,t,n,r,i);else{var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,u=parseFloat(a.getAttribute("data-styled-count"))||0;u<=1?(a.remove?a.remove():(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(u-1))}}}}}var ha=function(){return ha=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ha.apply(this,arguments)};function Lp(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function sc(t,e){var r=Gp(e),n=r.className;return L.forwardRef(function(i,a){var s=i.className,o=s===void 0?"":s;i.cspNonce;var u=Lp(i,["className","cspNonce"]),l=L.useRef();return L.useImperativeHandle(a,function(){return l.current},[]),L.useEffect(function(){var c=r.inject(l.current,{nonce:i.cspNonce});return function(){c.destroy()}},[]),L.createElement(t,ha({ref:l,"data-styled-id":n,className:"".concat(o," ").concat(n)},u))})}var pa=function(t,e){return pa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},pa(t,e)};function dn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");pa(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var M=function(){return M=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},M.apply(this,arguments)};function Np(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function jp(t,e,r,n){var i=arguments.length,a=i<3?e:n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,r,a):s(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function Wp(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function P(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a}function X(t,e,r){if(arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function hn(t,e){return M({events:[],props:[],name:t},e)}var Hp=["n","w","s","e"],fs=["n","w","s","e","nw","ne","sw","se"];function Yp(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function Xp(t){var e=Yp(1,t),r=Math.round(t/45)*45%180,n="ns-resize";return r===135?n="nwse-resize":r===45?n="nesw-resize":r===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(e,"') 16 16, ").concat(n,";")}var Mr=Oh(),oc=Mr.browser.webkit,uc=oc&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),lc=Mr.browser.name,cc=parseInt(Mr.browser.version,10),qp=lc==="chrome",Up=Mr.browser.chromium,$p=parseInt(Mr.browser.chromiumVersion,10)||0,Kp=qp&&cc>=109||Up&&$p>=109,Zp=lc==="firefox",Jp=parseInt(Mr.browser.webkitVersion,10)>=612||cc>=15,ds="moveable-",Qp=fs.map(function(t){var e="",r="",n="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(r="left: ".concat(a,";"),n="right"),t.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(r).concat(e,`
        transform-origin: `).concat(n," ").concat(i,`;
    }`)}).join(`
`),tv=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Qp,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(Xp(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(uc?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),ev=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],va=1e-4,qt=1e-7,Mn=1e-9,ga=Math.pow(10,10),Po=-ga,rv={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},hs={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},fc={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},nv=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function pn(t,e,r,n,i,a){var s,o;a===void 0&&(a="draggable");var u=(o=(s=e.gestos[a])===null||s===void 0?void 0:s.move(r,t.inputEvent))!==null&&o!==void 0?o:{},l=u.originalDatas||u.datas,c=l[a]||(l[a]={});return M(M({},u),{isPinch:!!n,parentEvent:!0,datas:c,originalDatas:t.originalDatas})}var xr=function(){function t(e){var r;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[e]={},r)}return t.prototype.dragStart=function(e,r){this.isDrag=!1,this.isFlag=!1;var n=r.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),M(M({},this.move(e,r.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,r){return this.move([e[0]-this.prevX,e[1]-this.prevY],r)},t.prototype.move=function(e,r){var n,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],n=e[0],i=e[1],this.isFlag=!0;else{var s=this.isDrag;n=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(a=!0)}return this.prevX=n,this.prevY=i,{type:"drag",clientX:n,clientY:i,inputEvent:r,isFirstDrag:a,isDrag:this.isDrag,distX:n-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function mr(t,e,r,n){var i=t.length===16,a=i?4:3,s=nr(t,r,n,a),o=P(s,4),u=P(o[0],2),l=u[0],c=u[1],f=P(o[1],2),d=f[0],h=f[1],p=P(o[2],2),v=p[0],g=p[1],m=P(o[3],2),y=m[0],x=m[1],S=P(bt(t,e,a),2),C=S[0],b=S[1],T=Math.min(l,d,v,y),D=Math.min(c,h,g,x),w=Math.max(l,d,v,y),E=Math.max(c,h,g,x);l=l-T||0,d=d-T||0,v=v-T||0,y=y-T||0,c=c-D||0,h=h-D||0,g=g-D||0,x=x-D||0,C=C-T||0,b=b-D||0;var A=t[0],_=t[a+1],R=Ht(A*_);return{left:T,top:D,right:w,bottom:E,origin:[C,b],pos1:[l,c],pos2:[d,h],pos3:[v,g],pos4:[y,x],direction:R}}function dc(t,e){var r=e.clientX,n=e.clientY,i=e.datas,a=t.state,s=a.moveableClientRect,o=a.rootMatrix,u=a.is3d,l=a.pos1,c=s.left,f=s.top,d=u?4:3,h=P(rt(Cr(o,[r-c,n-f],d),l),2),p=h[0],v=h[1],g=P(ye({datas:i,distX:p,distY:v}),2),m=g[0],y=g[1];return[m,y]}function rr(t,e){var r=e.datas,n=t.state,i=n.allMatrix,a=n.beforeMatrix,s=n.is3d,o=n.left,u=n.top,l=n.origin,c=n.offsetMatrix,f=n.targetMatrix,d=n.transformOrigin,h=s?4:3;r.is3d=s,r.matrix=i,r.targetMatrix=f,r.beforeMatrix=a,r.offsetMatrix=c,r.transformOrigin=d,r.inverseMatrix=me(i,h),r.inverseBeforeMatrix=me(a,h),r.absoluteOrigin=Je(dt([o,u],l),h),r.startDragBeforeDist=Lt(r.inverseBeforeMatrix,r.absoluteOrigin,h),r.startDragDist=Lt(r.inverseMatrix,r.absoluteOrigin,h)}function iv(t){return mr(t.datas.beforeTransform,[50,50],100,100).direction}function di(t,e,r){var n=e.datas,i=e.originalDatas.beforeRenderable,a=n.transformIndex,s=i.nextTransforms,o=s.length,u=i.nextTransformAppendedIndexes,l=-1;a===-1?(r==="translate"?l=0:r==="rotate"&&(l=be(s,function(h){return h.match(/scale\(/g)})),l===-1&&(l=s.length),n.transformIndex=l):Jt(u,function(h){return h.index===a&&h.functionName===r})?l=a:l=a+u.filter(function(h){return h.index<a}).length;var c=_g(s,t.state,l),f=c.targetFunction,d=r==="rotate"?"rotateZ":r;n.beforeFunctionTexts=c.beforeFunctionTexts,n.afterFunctionTexts=c.afterFunctionTexts,n.beforeTransform=c.beforeFunctionMatrix,n.beforeTransform2=c.beforeFunctionMatrix2,n.targetTansform=c.targetFunctionMatrix,n.afterTransform=c.afterFunctionMatrix,n.afterTransform2=c.afterFunctionMatrix2,n.targetAllTransform=c.allFunctionMatrix,f.functionName===d?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):o>l&&(n.isAppendTransform=!0,i.nextTransformAppendedIndexes=X(X([],P(u),!1),[{functionName:r,index:l,isAppend:!0}],!1))}function hi(t,e,r){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?r:e," ").concat(t.afterFunctionTexts.join(" "))}function av(t){var e=t.datas,r=t.distX,n=t.distY,i=P(pc({datas:e,distX:r,distY:n}),2),a=i[0],s=i[1],o=hc(e,ep([a,s],4));return Lt(o,Je([0,0,0],4),4)}function hc(t,e,r){var n=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,u=r?gt(o,e,4):gt(e,o,4),l=gt(me(r?a:n,4),u,4),c=gt(l,me(r?s:i,4),4);return c}function pc(t){var e=t.datas,r=t.distX,n=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,u=a?4:3;return rt(Lt(i,dt(o,[r,n]),u),s)}function ye(t,e){var r=t.datas,n=t.distX,i=t.distY,a=r.inverseBeforeMatrix,s=r.inverseMatrix,o=r.is3d,u=r.startDragBeforeDist,l=r.startDragDist,c=r.absoluteOrigin,f=o?4:3;return rt(Lt(e?a:s,dt(c,[n,i]),f),e?u:l)}function sv(t,e){var r=t.datas,n=t.distX,i=t.distY;r.beforeMatrix;var a=r.matrix,s=r.is3d;r.startDragBeforeDist;var o=r.startDragDist,u=r.absoluteOrigin,l=s?4:3;return rt(Lt(a,dt(o,[n,i]),l),u)}function ov(t,e,r,n,i,a){return n===void 0&&(n=e),i===void 0&&(i=r),a===void 0&&(a=[0,0]),t?t.map(function(s,o){var u=ln(s),l=u.value,c=u.unit,f=o?i:n,d=o?r:e;if(s==="%"||isNaN(l)){var h=f?a[o]/f:0;return d*h}else if(c!=="%")return l;return d*l/100}):a}function vc(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function uv(t,e){return vc(e).map(function(r){return t[r]})}function Bi(t,e){var r=(e+1)/2;return[$n(t[0][0],t[1][0],r,1-r),$n(t[0][1],t[1][1],r,1-r)]}function Ot(t,e){var r=Bi([t[0],t[1]],e[0]),n=Bi([t[2],t[3]],e[0]);return Bi([r,n],e[1])}function lv(t,e,r,n,i,a){var s=nr(e,r,n,i),o=Ot(s,a),u=t[0]-o[0],l=t[1]-o[1];return[u,l]}function vn(t,e,r,n){return gt(t,jr(e,n,r),n)}function cv(t,e,r,n){var i=t.transformOrigin,a=t.offsetMatrix,s=t.is3d,o=s?4:3,u;if(Te(r)){var l=e.beforeTransform,c=e.afterTransform;n?u=de(Jr(r),4,o):u=de(gt(gt(l,Jr([r]),4),c,4),4,o)}else u=r;return vn(a,u,i,o)}function fv(t,e){var r=t.transformOrigin,n=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,s=t.targetAllTransform,o=i?4:3;return vn(n,gt(s||a,ss(e,o),o),r,o)}function pi(t,e){var r=Pr(e);return{setTransform:function(n,i){i===void 0&&(i=-1),r.startTransforms=kt(n)?n:Ie(n),ma(t,e,i)},setTransformIndex:function(n){ma(t,e,n)}}}function vi(t,e,r){var n=Pr(e),i=n.startTransforms;ma(t,e,be(i,function(a){return a.indexOf("".concat(r,"("))===0}))}function ma(t,e,r){var n=Pr(e),i=e.datas;if(i.transformIndex=r,r!==-1){var a=n.startTransforms[r];if(a){var s=t.state,o=yr([a],{"x%":function(u){return u/100*s.offsetWidth},"y%":function(u){return u/100*s.offsetHeight}});i.startValue=o[0].functionValue}}}function ps(t,e){var r=Pr(t);r.nextTransforms=Ie(e)}function Pr(t){return t.originalDatas.beforeRenderable}function Jn(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Pn(t){return(Jn(t)||[]).join(" ")}function Rn(t){return Pr(t).nextStyle}function gc(t,e,r,n,i){ps(i,e);var a=Wt.drag(t,pn(i,t.state,r,n)),s=a?a.transform:e;return M(M({transform:e,drag:a},Yt({transform:s},i)),{afterTransform:s})}function vs(t,e,r,n,i,a){var s=cv(t.state,i,e,a),o=pv(t,r,n,s);return o}function mc(t,e,r,n,i,a,s){var o=vs(t,e,r,i,a,s),u=t.state,l=u.left,c=u.top,f=t.props.groupable,d=f?l:0,h=f?c:0,p=rt(n,o);return rt(p,[d,h])}function dv(t,e,r,n,i,a,s){var o=mc(t,e,r,n,i,a,s);return o}function hv(t,e,r){return[e?-1+t[0]/(e/2):0,r?-1+t[1]/(r/2):0]}function pv(t,e,r,n){n===void 0&&(n=t.state.allMatrix);var i=t.state,a=i.width,s=i.height,o=i.is3d,u=o?4:3,l=[a/2*(1+e[0])+r[0],s/2*(1+e[1])+r[1]];return bt(n,l,u)}function vv(t,e,r){var n=r.fixedDirection,i=r.fixedPosition,a=r.fixedOffset;return mc(t,"rotate(".concat(e,"deg)"),n,i,a,r)}function gv(t,e,r,n,i,a){var s=t.props.groupable,o=t.state,u=o.transformOrigin,l=o.offsetMatrix,c=o.is3d,f=o.width,d=o.height,h=o.left,p=o.top,v=a.fixedDirection,g=a.nextTargetMatrix||o.targetMatrix,m=c?4:3,y=ov(i,e,r,f,d,u),x=s?h:0,S=s?p:0,C=vn(l,g,y,m),b=lv(n,C,e,r,m,v);return rt(b,[x,S])}function mv(t,e){return Ot(se(t.state),e)}function yv(t,e){var r=t.targetGesto,n=t.controlGesto,i;return r!=null&&r.isFlag()&&(i=r.getEventData()[e]),!i&&(n!=null&&n.isFlag())&&(i=n.getEventData()[e]),i||{}}function xv(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Sv(t){var e=t("scale"),r=t("rotate"),n=t("translate"),i=[];return n&&n!=="0px"&&n!=="none"&&i.push("translate(".concat(n.split(/\s+/).join(","),")")),r&&r!=="1"&&r!=="none"&&i.push("rotate(".concat(r,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function yc(t,e,r){for(var n=t,i=[],a=is(t)||Fe(t),s=!r&&t===e||t===a,o=s,u=!1,l=3,c,f,d,h=!1,p=tn(e,e,!0).offsetParent,v=1;n&&!o;){o=s;var g=Zt(n),m=g("position"),y=jc(n),x=m==="fixed",S=Sv(g),C=rp(mg(y)),b=void 0,T=!1,D=!1,w=0,E=0,A=0,_=0,R={hasTransform:!1,fixedContainer:null};x&&(h=!0,R=Cg(n),p=R.fixedContainer);var I=C.length;!u&&(I===16||S.length)&&(u=!0,l=4,Da(i),d&&(d=de(d,3,4))),u&&I===9&&(C=de(C,3,4));var k=bg(n,t),O=k.tagName,B=k.hasOffset,F=k.isSVG,G=k.origin,j=k.targetOrigin,z=k.offset,U=P(z,2),$=U[0],Y=U[1];O==="svg"&&!n.ownerSVGElement&&d&&(i.push({type:"target",target:n,matrix:Dg(n,l)}),i.push({type:"offset",target:n,matrix:xt(l)}));var q=parseFloat(g("zoom"))||1;if(x)b=R.fixedContainer,T=!0;else{var V=tn(n,e,!1,!0,g),K=V.offsetZoom;if(b=V.offsetParent,T=V.isEnd,D=V.isStatic,v*=K,(V.isCustomElement||K!==1)&&D)$-=b.offsetLeft,Y-=b.offsetTop;else if(Zp||Kp){var tt=V.parentSlotElement;if(tt){for(var nt=b,J=0,H=0;nt&&xv(nt);)J+=nt.offsetLeft,H+=nt.offsetTop,nt=nt.offsetParent;$-=J,Y-=H}}}if(oc&&!Jp&&B&&!F&&D&&(m==="relative"||m==="static")&&($-=b.offsetLeft,Y-=b.offsetTop,s=s||T),x)B&&R.hasTransform&&(A=b.clientLeft,_=b.clientTop);else if(B&&p!==b&&(w=b.clientLeft,E=b.clientTop),B&&b===a){var Q=Wc(n,!1);$+=Q[0],Y+=Q[1]}if(i.push({type:"target",target:n,matrix:jr(C,l,G)}),S.length&&(i.push({type:"offset",target:n,matrix:xt(l)}),i.push({type:"target",target:n,matrix:jr(Jr(S),l,G)})),B){var ft=n===t,it=ft?0:n.scrollLeft,ot=ft?0:n.scrollTop;i.push({type:"offset",target:n,matrix:Qe([$-it+w-A,Y-ot+E-_],l)})}else i.push({type:"offset",target:n,origin:G});if(q!==1&&i.push({type:"zoom",target:n,matrix:jr(ss([q,q],l),l,[0,0])}),d||(d=C),c||(c=G),f||(f=j),o||x)break;n=b,s=T,(!r||n===a)&&(o=s)}return d||(d=xt(l)),c||(c=[0,0]),f||(f=[0,0]),{zoom:v,offsetContainer:p,matrixes:i,targetMatrix:d,transformOrigin:c,targetOrigin:f,is3d:u,hasFixed:h}}var je=null,We=null,ur=null;function Sr(t){t?(window.Map&&(je=new Map,We=new Map),ur=[]):(je=null,ur=null,We=null)}function bv(t){var e=We==null?void 0:We.get(t);if(e)return e;var r=Wr(t,!0);return We&&We.set(t,r),r}function Cv(t,e){if(ur){var r=Jt(ur,function(i){return i[0][0]==t&&i[0][1]==e});if(r)return r[1]}var n=yc(t,e,!0);return ur&&ur.push([[t,e],n]),n}function Zt(t){var e=je==null?void 0:je.get(t);if(!e){var r=Oe(t).getComputedStyle(t);if(!je)return function(a){return r[a]};e={style:r,cached:{}},je.set(t,e)}var n=e.cached,i=e.style;return function(a){return a in n||(n[a]=i[a]),n[a]}}function ce(t,e,r){var n=r.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(s,o){return a[o]=a[o]||{},a[o][e]=a[o][e]||{},M(M({},r),{isRequestChild:!0,datas:a[o][e],originalDatas:a[o]})})}function Vi(t,e,r,n,i,a,s){var o=!!r.match(/Start$/g),u=!!r.match(/End$/g),l=i.isPinch,c=i.datas,f=ce(t,e.name,i),d=t.moveables,h=[],p=f.map(function(v,g){var m=d[g],y=m.state,x=y.gestos,S=v;if(o)S=new xr(s).dragStart(n,v),h.push(S);else{if(x[s]||(x[s]=c.childGestos[g]),!x[s])return;S=pn(v,y,n,l,a,s),h.push(S)}var C=e[r](m,M(M({},S),{parentFlag:!0}));return u&&(x[s]=null),C});return o&&(c.childGestos=d.map(function(v){return v.state.gestos[s]})),{eventParams:p,childEvents:h}}function Se(t,e,r,n,i,a){i===void 0&&(i=function(c,f){return f});var s=!!r.match(/End$/g),o=ce(t,e.name,n),u=t.moveables,l=o.map(function(c,f){var d=u[f],h=c;h=i(d,c);var p=e[r](d,M(M({},h),{parentFlag:!0}));return s&&(d.state.gestos={}),p});return l}function Qn(t,e,r,n){var i=r.fixedDirection,a=r.fixedPosition,s=n.datas.startPositions||se(e.state),o=Ot(s,i),u=P(Lt(fn(-t.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),2),l=u[0],c=u[1];return n.datas.originalX=l,n.datas.originalY=c,n}function xc(t,e,r,n){var i=t.getState(),a=i.renderPoses,s=i.rotation,o=i.direction,u=er(t.props,e).zoom,l=Nr(s/Math.PI*180),c={},f=t.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var d=f.renderDirectionMap;r.forEach(function(p){var v=p.dir;c[v]=!0});var h=Ht(o);return r.map(function(p){var v=p.data,g=p.classNames,m=p.dir,y=hs[m];if(!y||!c[m])return null;d[m]=!0;var x=(st(l,15)+h*fc[m]+720)%180,S={};return wr(v).forEach(function(C){S["data-".concat(C)]=v[C]}),n.createElement("div",M({className:et.apply(void 0,X(["control","direction",m,e],P(g),!1)),"data-rotation":x,"data-direction":m},S,{key:"direction-".concat(m),style:ni.apply(void 0,X([s,u],P(y.map(function(C){return a[C]})),!1))}))})}function Sc(t,e,r,n){var i=er(t.props,r),a=i.renderDirections,s=a===void 0?e:a,o=i.displayAroundControls;if(!s)return[];var u=s===!0?fs:s;return X(X([],P(o?Tc(t,n,r,u):[]),!1),P(xc(t,r,u.map(function(l){return{data:{},classNames:[],dir:l}}),n)),!1)}function Qr(t,e,r,n,i,a){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var u=Et(r,n),l=e?st(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:et.apply(void 0,X(["line","direction",e?"edge":"",e],P(s),!1)),"data-rotation":l,"data-line-key":a,"data-direction":e,style:Vr(r,n,i,u)})}function bc(t,e,r,n,i){var a=r===!0?Hp:r;return a.map(function(s,o){var u=P(hs[s],2),l=u[0],c=u[1];if(c!=null)return Qr(t,s,n[l],n[c],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function Cc(t){return function(e,r){var n=er(e.props,t).edge;return n&&(n===!0||n.length)?X(X([],P(bc(r,t,n,e.getState().renderPoses,e.props.zoom)),!1),P(Dv(e,t,r)),!1):Dc(e,t,r)}}function Dc(t,e,r){return Sc(t,fs,e,r)}function Dv(t,e,r){return Sc(t,["nw","ne","sw","se"],e,r)}function Tc(t,e,r,n){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,o=a.rotation,u=a.direction,l=i.renderDirectionMap,c=t.props.zoom,f=Ht(u),d=o/Math.PI*180;return(n||wr(l)).map(function(h){var p=hs[h];if(!p)return null;var v=(st(d,15)+f*fc[h]+720)%180,g=["around-control"];return r&&g.push("direction",r),e.createElement("div",{className:et.apply(void 0,X([],P(g),!1)),"data-rotation":v,"data-direction":h,key:"direction-around-".concat(h),style:ni.apply(void 0,X([o,c],P(p.map(function(m){return s[m]})),!1))})})}function gs(t,e,r){var n=t||{},i=n.position,a=i===void 0?"client":i,s=n.left,o=s===void 0?-1/0:s,u=n.top,l=u===void 0?-1/0:u,c=n.right,f=c===void 0?1/0:c,d=n.bottom,h=d===void 0?1/0:d,p={position:a,left:o,top:l,right:f,bottom:h};return{vertical:Ro(p,e,!0),horizontal:Ro(p,r,!1)}}function gi(t,e){var r=t.state,n=r.containerClientRect,i=n.clientHeight,a=n.clientWidth,s=n.clientLeft,o=n.clientTop,u=r.snapOffset,l=u.left,c=u.top,f=u.right,d=u.bottom,h=e||t.props.bounds||{},p=h.position||"client",v=p==="css",g=h.left,m=g===void 0?-1/0:g,y=h.top,x=y===void 0?-1/0:y,S=h.right,C=S===void 0?v?-1/0:1/0:S,b=h.bottom,T=b===void 0?v?-1/0:1/0:b;return v&&(C=a+f-l-C,T=i+d-c-T),{left:m+l-s,right:C+l-s,top:x+c-o,bottom:T+c-o}}function Tv(t,e,r){var n=gi(t),i=n.left,a=n.top,s=n.right,o=n.bottom,u=P(r,2),l=u[0],c=u[1],f=P(rt(r,e),2),d=f[0],h=f[1];N(d)<qt&&(d=0),N(h)<qt&&(h=0);var p=h>0,v=d>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(d===0&&h===0)return{vertical:g,horizontal:m};if(d===0)p?o<c&&(m.pos=o,m.offset=c-o):a>c&&(m.pos=a,m.offset=c-a);else if(h===0)v?s<l&&(g.pos=s,g.offset=l-s):i>l&&(g.pos=i,g.offset=l-i);else{var y=h/d,x=r[1]-y*l,S=0,C=0,b=!1;v&&s<=l?(S=y*s+x,C=s,b=!0):!v&&l<=i&&(S=y*i+x,C=i,b=!0),b&&(S<a||S>o)&&(b=!1),b||(p&&o<=c?(S=o,C=(S-x)/y,b=!0):!p&&c<=a&&(S=a,C=(S-x)/y,b=!0)),b&&(g.isBound=!0,g.pos=C,g.offset=l-C,m.isBound=!0,m.pos=S,m.offset=c-S)}return{vertical:g,horizontal:m}}function Ro(t,e,r){var n=t[r?"left":"top"],i=t[r?"right":"bottom"],a=Math.min.apply(Math,X([],P(e),!1)),s=Math.max.apply(Math,X([],P(e),!1)),o=[];return n+1>a&&o.push({direction:"start",isBound:!0,offset:a-n,pos:n}),i-1<s&&o.push({direction:"end",isBound:!0,offset:s-i,pos:i}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(u,l){return N(l.offset)-N(u.offset)})}function _o(t,e,r){var n=r?t.map(function(i){return cn(i,r)}):t;return n.some(function(i){return i[0]<e.left&&N(i[0]-e.left)>.1||i[0]>e.right&&N(i[0]-e.right)>.1||i[1]<e.top&&N(i[1]-e.top)>.1||i[1]>e.bottom&&N(i[1]-e.bottom)>.1})}function Ev(t,e,r){var n=ae(t),i=Math.sqrt(n*n-e*e)||0;return[i,-i].sort(function(a,s){return N(a-t[r?0:1])-N(s-t[r?0:1])}).map(function(a){return Et([0,0],r?[a,e]:[e,a])})}function wv(t,e,r,n,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=gi(t),o=s.left,u=s.top,l=s.right,c=s.bottom,f=o-n[0],d=l-n[0],h=u-n[1],p=c-n[1],v={left:f,top:h,right:d,bottom:p};if(!_o(r,v,0))return[];var g=[];return[[f,0],[d,0],[h,1],[p,1]].forEach(function(m){var y=P(m,2),x=y[0],S=y[1];r.forEach(function(C){var b=Et([0,0],C);g.push.apply(g,X([],P(Ev(C,x,S).map(function(T){return a+T-b}).filter(function(T){return!_o(e,v,T)}).map(function(T){return st(T*180/Math.PI,qt)})),!1))})}),g}var Mv=["left","right","center"],Pv=["top","bottom","middle"],Ao={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},ke={start:"left",end:"right",center:"center"},Be={start:"top",end:"bottom",center:"middle"};function lr(){return{left:!1,top:!1,right:!1,bottom:!1}}function Rr(t,e){var r=t.props,n=r.snappable,i=r.bounds,a=r.innerBounds,s=r.verticalGuidelines,o=r.horizontalGuidelines,u=r.snapGridWidth,l=r.snapGridHeight,c=t.state,f=c.guidelines,d=c.enableSnap;return!n||!d||e&&n!==!0&&n.indexOf(e)<0?!1:!!(u||l||i||a||f&&f.length||s&&s.length||o&&o.length)}function ms(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function Rv(t,e){var r=ms(t),n={};for(var i in r)i in e&&r[i]&&(n[i]=e[i]);return n}function ys(t,e){var r=Rv(t,e),n=Pv.filter(function(a){return a in r}),i=Mv.filter(function(a){return a in r});return{horizontalNames:n,verticalNames:i,horizontal:n.map(function(a){return r[a]}),vertical:i.map(function(a){return r[a]})}}function _v(t,e,r){var n=bt(t,[e.clientLeft,e.clientTop],r);return[e.left+n[0],e.top+n[1]]}function Av(t){var e=P(t,2),r=e[0],n=e[1],i=n[0]-r[0],a=n[1]-r[1];Math.abs(i)<Rt&&(i=0),Math.abs(a)<Rt&&(a=0);var s=0,o=0,u=0;return i?a?(s=-a/i,o=1,u=s*r[0]-r[1]):(o=1,u=-r[1]):(s=-1,u=r[0]),[s,o,u].map(function(l){return st(l,Rt)})}var Ec="snapRotationThreshold",wc="snapRotationDegrees",Mc="snapHorizontalThreshold",Pc="snapVerticalThreshold";function mi(t,e,r,n,i,a,s){var o;n===void 0&&(n=[]),i===void 0&&(i=[]);var u=t.props,l=((o=t.state.snapThresholdInfo)===null||o===void 0?void 0:o.multiples)||[1,1],c=Xo(s,u[Mc],5),f=Xo(a,u[Pc],5);return Rc(t.state.guidelines,e,r,n,i,c,f,l)}function Rc(t,e,r,n,i,a,s,o){return{vertical:Io(t,"vertical",e,s*o[0],n),horizontal:Io(t,"horizontal",r,a*o[1],i)}}function Ov(t,e,r){var n=P(r,2),i=n[0],a=n[1],s=P(e,2),o=s[0],u=s[1],l=P(rt(r,e),2),c=l[0],f=l[1],d=f>0,h=c>0;c=ii(c),f=ii(f);var p={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(c===0&&f===0)return{vertical:p,horizontal:v};var g=mi(t,c?[i]:[],f?[a]:[],[],[],void 0,void 0),m=g.vertical,y=g.horizontal;m.posInfos.filter(function(O){var B=O.pos;return h?B>=o:B<=o}),y.posInfos.filter(function(O){var B=O.pos;return d?B>=u:B<=u}),m.isSnap=m.posInfos.length>0,y.isSnap=y.posInfos.length>0;var x=ya(m),S=x.isSnap,C=x.guideline,b=ya(y),T=b.isSnap,D=b.guideline,w=T?D.pos[1]:0,E=S?C.pos[0]:0;if(c===0)T&&(v.isSnap=!0,v.pos=D.pos[1],v.offset=a-v.pos);else if(f===0)S&&(p.isSnap=!0,p.pos=E,p.offset=i-E);else{var A=f/c,_=r[1]-A*i,R=0,I=0,k=!1;S?(I=E,R=A*I+_,k=!0):T&&(R=w,I=(R-_)/A,k=!0),k&&(p.isSnap=!0,p.pos=I,p.offset=i-I,v.isSnap=!0,v.pos=R,v.offset=a-R)}return{vertical:p,horizontal:v}}function _e(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function Oo(t,e,r,n){var i=ys(t.props.snapDirections,e),a=mi(t,i.vertical,i.horizontal,i.verticalNames.map(function(u){return _e(u)}),i.horizontalNames.map(function(u){return _e(u)}),r,n),s=_e(i.horizontalNames[a.horizontal.index]),o=_e(i.verticalNames[a.vertical.index]);return{vertical:M(M({},a.vertical),{direction:o}),horizontal:M(M({},a.horizontal),{direction:s})}}function ya(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],n=r.guidelineInfos[0],i=n.offset,a=n.dist,s=n.guideline;return{isSnap:e,offset:i,dist:a,pos:r.pos,guideline:s}}function Io(t,e,r,n,i){var a,s;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o=e==="vertical",u=o?0:1,l=r.map(function(f,d){var h=i[d]||"",p=t.map(function(v){var g=v.pos,m=f-g[u];return{offset:m,dist:N(m),guideline:v,direction:h}}).filter(function(v){var g=v.guideline,m=v.dist,y=g.type;return!(y!==e||m>n)}).sort(function(v,g){return v.dist-g.dist});return{pos:f,index:d,guidelineInfos:p,direction:h}}).filter(function(f){return f.guidelineInfos.length>0}).sort(function(f,d){return f.guidelineInfos[0].dist-d.guidelineInfos[0].dist}),c=l.length>0;return{isSnap:c,index:c?l[0].index:-1,direction:(s=(a=l[0])===null||a===void 0?void 0:a.direction)!==null&&s!==void 0?s:"",posInfos:l}}function Iv(t,e,r,n,i){var a=[];r[0]&&r[1]?a=[r,[-r[0],r[1]],[r[0],-r[1]]]:!r[0]&&!r[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(d,h,p){var v=p[h+1]||p[0];a.push(d),a.push([(d[0]+v[0])/2,(d[1]+v[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],r):(a.push.apply(a,X([],P(uv([[-1,-1],[1,-1],[-1,-1],[1,1]],r)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var s=a.map(function(d){return Ot(e,d)}),o=s.map(function(d){return d[0]}),u=s.map(function(d){return d[1]}),l=mi(t,o,u,a.map(function(d){return _e(d[0])}),a.map(function(d){return _e(d[1])}),n,i),c=_e(a.map(function(d){return d[0]})[l.vertical.index]),f=_e(a.map(function(d){return d[1]})[l.horizontal.index]);return{vertical:M(M({},l.vertical),{direction:c}),horizontal:M(M({},l.horizontal),{direction:f})}}function _c(t,e){var r=N(t.offset),n=N(e.offset);return t.isBound&&e.isBound?n-r:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?n-r:t.isSnap?-1:e.isSnap||r<qt?1:n<qt?-1:r-n}function ti(t,e){return t.slice().sort(function(r,n){var i=r.sign[e],a=n.sign[e],s=r.offset[e],o=n.offset[e];if(i){if(!a)return-1}else return 1;return _c({isBound:r.isBound,isSnap:r.isSnap,offset:s},{isBound:n.isBound,isSnap:n.isSnap,offset:o})})[0]}function kv(t,e,r){var n=[];if(r)N(e[0])!==1||N(e[1])!==1?n.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):n.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),n.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var u=[s*i[0],o*i[1]];e[0]===u[0]&&e[1]===u[1]||n.push([e,u])})})}else if(t[0]){var a=N(e[0])===1?[1]:[1,-1];a.forEach(function(s){n.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var a=N(e[1])===1?[1]:[1,-1];a.forEach(function(o){n.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return n}function Ac(t,e){var r=sa([e[0][0],e[1][0]]),n=sa([e[0][1],e[1][1]]);return{vertical:r<=t[0],horizontal:n<=t[1]}}function xs(t,e){var r=P(e,2),n=r[0],i=r[1],a=i[0]-n[0],s=i[1]-n[1];N(a)<qt&&(a=0),N(s)<qt&&(s=0);var o,u;if(!a)o=n[0],u=t[0];else if(!s)o=n[1],u=t[1];else{var l=s/a;o=l*(t[0]-n[0])+n[1],u=t[1]}return o-u}function Oc(t,e,r,n){return n===void 0&&(n=qt),t.every(function(i){var a=xs(i,e),s=a<=0;return s===r||N(a)<=n})}function ko(t,e,r,n,i){return i===void 0&&(i=0),n&&e-i<=t||!n&&t<=r+i?{isBound:!0,offset:n?e-t:r-t}:{isBound:!1,offset:0}}function Bv(t,e){var r=e.line,n=e.centerSign,i=e.verticalSign,a=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=o.left,l=o.top,c=o.width,f=o.height,d=[[u,l],[u,l+f]],h=[[u,l],[u+c,l]],p=[[u+c,l],[u+c,l+f]],v=[[u,l+f],[u+c,l+f]];if(Oc([[u,l],[u+c,l],[u,l+f],[u+c,l+f]],r,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Ae(r,s,h,i),m=Ae(r,s,v,i),y=Ae(r,s,d,a),x=Ae(r,s,p,a),S=g.isBound&&m.isBound,C=g.isBound||m.isBound,b=y.isBound&&x.isBound,T=y.isBound||x.isBound,D=br(g.offset,m.offset),w=br(y.offset,x.offset),E=[0,0],A=!1,_=!1;return N(w)<N(D)?(E=[D,0],A=C,_=S):(E=[0,w],A=T,_=b),{isAllBound:_,isVerticalBound:C,isHorizontalBound:T,isBound:A,offset:E}}function Ae(t,e,r,n,i,a){var s=P(e,2),o=s[0],u=s[1],l=t[0],c=r[0],f=r[1],d=ii(f[1]-c[1]),h=ii(f[0]-c[0]),p=u,v=o,g=-o/u;if(h){if(!d){if(a&&!p)return{isBound:!1,offset:0};if(v){var S=(c[1]-l[1])/g+l[0];return ko(S,c[0],f[0],n,i)}else{var y=c[1]-l[1],x=N(y)<=(i||0);return{isBound:x,offset:x?y:0}}}}else{if(a&&!v)return{isBound:!1,offset:0};if(p){var m=g*(c[0]-l[0])+l[1];return ko(m,c[1],f[1],n,i)}else{var y=c[0]-l[0],x=N(y)<=(i||0);return{isBound:x,offset:x?y:0}}}return{isBound:!1,offset:0}}function Ic(t,e,r){return e.map(function(n){var i=Bv(t,n),a=i.isBound,s=i.offset,o=i.isVerticalBound,u=i.isHorizontalBound,l=n.multiple,c=ye({datas:r,distX:s[0],distY:s[1]}).map(function(f,d){return f*(l[d]?2/l[d]:0)});return{sign:l,isBound:a,isVerticalBound:o,isHorizontalBound:u,isSnap:!1,offset:c}})}function Vv(t,e,r){var n,i=Ss(t,e,[0,0],!1).map(function(d){return M(M({},d),{multiple:d.multiple.map(function(h){return N(h)*2})})}),a=Ic(t,i,r),s=ti(a,0),o=ti(a,1),u=0,l=0,c=s.isVerticalBound||o.isVerticalBound,f=s.isHorizontalBound||o.isHorizontalBound;return(c||f)&&(n=P(sv({datas:r,distX:-s.offset[0],distY:-o.offset[1]}),2),u=n[0],l=n[1]),{vertical:{isBound:c,offset:u},horizontal:{isBound:f,offset:l}}}function zv(t,e){var r=[],n=t[0],i=t[1];return n&&i?r.push([[0,i*2],t,[-n,i]],[[n*2,0],t,[n,-i]]):n?(r.push([[n*2,0],[n,1],[n,-1]]),e&&r.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):i?(r.push([[0,i*2],[1,i],[-1,i]]),e&&r.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}function Ss(t,e,r,n){var i=t.state,a=i.allMatrix,s=i.is3d,o=nr(a,100,100,s?4:3),u=Ot(o,[0,0]);return zv(r,n).map(function(l){var c=P(l,3),f=c[0],d=c[1],h=c[2],p=[Ot(o,d),Ot(o,h)],v=Av(p),g=Ac(u,p),m=g.vertical,y=g.horizontal,x=xs(u,p)<=0;return{multiple:f,centerSign:x,verticalSign:m,horizontalSign:y,lineConstants:v,line:[Ot(e,d),Ot(e,h)]}})}function Bo(t,e,r,n){var i=n?t.map(function(a){return cn(a,n)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var s=xs(r,a)<=0;return!Oc(e,a,s)})}function Fv(t){var e=P(t,2),r=e[0],n=e[1],i=n[0]-r[0],a=n[1]-r[1];if(!i)return N(r[0]);if(!a)return N(r[1]);var s=a/i;return N((-s*r[0]+r[1])/Math.sqrt(Math.pow(s,2)+1))}function Gv(t){var e=P(t,2),r=e[0],n=e[1],i=n[0]-r[0],a=n[1]-r[1];if(!i)return[r[0],0];if(!a)return[0,r[1]];var s=a/i,o=-s*r[0]+r[1];return[-o/(s+1/s),o/(s*s+1)]}function Lv(t,e,r,n,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var o=a.left,u=a.top,l=a.width,c=a.height,f=o-n[0],d=o+l-n[0],h=u-n[1],p=u+c-n[1],v=[[f,h],[d,h],[f,p],[d,p]],g=Ot(r,[0,0]);if(!Bo(r,v,g,0))return[];var m=[],y=v.map(function(x){return[ae(x),Et([0,0],x)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(x){var S=Et([0,0],Gv(x)),C=Fv(x);m.push.apply(m,X([],P(y.filter(function(b){var T=P(b,1),D=T[0];return D&&C<=D}).map(function(b){var T=P(b,2),D=T[0],w=T[1],E=Math.acos(D?C/D:0),A=w+E,_=w-E;return[s+A-S,s+_-S]}).reduce(function(b,T){return b.push.apply(b,X([],P(T),!1)),b},[]).filter(function(b){return!Bo(e,v,g,b)}).map(function(b){return st(b*180/Math.PI,qt)})),!1))}),m}function Nv(t){var e=t.props.innerBounds,r=lr();if(!e)return{boundMap:r,vertical:[],horizontal:[]};var n=t.getRect(),i=n.pos1,a=n.pos2,s=n.pos3,o=n.pos4,u=[i,a,s,o],l=Ot(u,[0,0]),c=e.left,f=e.top,d=e.width,h=e.height,p=[[c,f],[c,f+h]],v=[[c,f],[c+d,f]],g=[[c+d,f],[c+d,f+h]],m=[[c,f+h],[c+d,f+h]],y=Ss(t,u,[0,0],!1),x=[],S=[];return y.forEach(function(C){var b=C.line,T=C.lineConstants,D=Ac(l,b),w=D.horizontal,E=D.vertical,A=Ae(b,T,v,E,1,!0),_=Ae(b,T,m,E,1,!0),R=Ae(b,T,p,w,1,!0),I=Ae(b,T,g,w,1,!0);A.isBound&&!r.top&&(x.push(f),r.top=!0),_.isBound&&!r.bottom&&(x.push(f+h),r.bottom=!0),R.isBound&&!r.left&&(S.push(c),r.left=!0),I.isBound&&!r.right&&(S.push(c+d),r.right=!0)}),{boundMap:r,horizontal:x,vertical:S}}function jv(t,e,r,n){var i=e[0]-t[0],a=e[1]-t[1];if(N(i)<Rt&&(i=0),N(a)<Rt&&(a=0),!i)return n?[0,0]:[0,r];if(!a)return n?[r,0]:[0,0];var s=a/i,o=t[1]-s*t[0];if(n){var u=s*(e[0]+r)+o;return[r,u-e[1]]}else{var l=(e[1]+r-o)/s;return[l-e[0],r]}}function xa(t,e,r,n,i){var a=jv(t,e,r,n);if(!a)return{isOutside:!1,offset:[0,0]};var s=xe(t,e),o=xe(a,t),u=xe(a,e),l=o>s||u>s,c=P(ye({datas:i,distX:a[0],distY:a[1]}),2),f=c[0],d=c[1];return{offset:[f,d],isOutside:l}}function ei(t,e){return t.isBound?t.offset:e.isSnap?ya(e).offset:0}function Wv(t,e,r,n,i){var a=P(e,2),s=a[0],o=a[1],u=P(r,2),l=u[0],c=u[1],f=P(n,2),d=f[0],h=f[1],p=P(i,2),v=p[0],g=p[1],m=-v,y=-g;if(t&&s&&o){m=0,y=0;var x=[];if(l&&c?x.push([0,g],[v,0]):l?x.push([v,0]):c?x.push([0,g]):d&&h?x.push([0,g],[v,0]):d?x.push([v,0]):h&&x.push([0,g]),x.length){x.sort(function(T,D){return ae(rt([s,o],T))-ae(rt([s,o],D))});var S=x[0];if(S[0]&&N(s)>Rt)m=-S[0],y=o*N(s+m)/N(s)-o;else if(S[1]&&N(o)>Rt){var C=o;y=-S[1],m=s*N(o+y)/N(C)-s}if(t&&c&&l)if(N(m)>Rt&&N(m)<N(v)){var b=N(v)/N(m);m*=b,y*=b}else if(N(y)>Rt&&N(y)<N(g)){var b=N(g)/N(y);m*=b,y*=b}else m=br(-v,m),y=br(-g,y)}}else m=s||l?-v:0,y=o||c?-g:0;return[m,y]}function Hv(t,e,r,n,i,a){if(!Rr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=Ds(a.absolutePoses,[e,r]),o=ne(s),u=o.left,l=o.right,c=o.top,f=o.bottom,d={horizontal:s.map(function(I){return I[1]}),vertical:s.map(function(I){return I[0]})},h=ms(t.props.snapDirections),p=ys(h,{left:u,right:l,top:c,bottom:f,center:(u+l)/2,middle:(c+f)/2}),v=yi(t,i,p,d),g=v.vertical,m=v.horizontal,y=Vv(t,s,a),x=y.vertical,S=y.horizontal,C=g.isSnap,b=m.isSnap,T=g.isBound||x.isBound,D=m.isBound||S.isBound,w=br(g.offset,x.offset),E=br(m.offset,S.offset),A=P(Wv(n,[e,r],[T,D],[C,b],[w,E]),2),_=A[0],R=A[1];return[{isBound:T,isSnap:C,offset:_},{isBound:D,isSnap:b,offset:R}]}function yi(t,e,r,n){n===void 0&&(n=r);var i=gs(gi(t),n.vertical,n.horizontal),a=i.horizontal,s=i.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:mi(t,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),u=o.horizontal,l=o.vertical,c=ei(a[0],u),f=ei(s[0],l),d=N(c),h=N(f);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:d,bounds:a,snap:u},vertical:{isBound:s[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:h,bounds:s,snap:l}}}function Vo(t,e,r,n,i,a,s){s===void 0&&(s=[1,1]);var o=gs(e,r,n),u=o.horizontal,l=o.vertical,c=Rc(t,r,n,[],[],i,a,s),f=c.horizontal,d=c.vertical,h=ei(u[0],f),p=ei(l[0],d),v=N(h),g=N(p);return{horizontal:{isBound:u[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:h,dist:v,bounds:u,snap:f},vertical:{isBound:l[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:p,dist:g,bounds:l,snap:d}}}function Yv(t,e,r,n){var i=Et(t,e)/Math.PI*180,a=r.vertical,s=a.isBound,o=a.isSnap,u=a.dist,l=r.horizontal,c=l.isBound,f=l.isSnap,d=l.dist,h=i%180,p=h<3||h>177,v=h>87&&h<93;return d<u&&(s||o&&!v&&(!n||!p))?"vertical":c||f&&!p&&(!n||!v)?"horizontal":""}function Xv(t,e,r,n,i,a){return r.map(function(s){var o=P(s,2),u=o[0],l=o[1],c=Ot(e,u),f=Ot(e,l),d=n?qv(t,c,f,i):yi(t,i,{vertical:[f[0]],horizontal:[f[1]]}),h=d.horizontal,p=h.offset,v=h.isBound,g=h.isSnap,m=d.vertical,y=m.offset,x=m.isBound,S=m.isSnap,C=rt(l,u);if(!y&&!p)return{isBound:x||v,isSnap:S||g,sign:C,offset:[0,0]};var b=Yv(c,f,d,n);if(!b)return{sign:C,isBound:!1,isSnap:!1,offset:[0,0]};var T=b==="vertical",D=[0,0];return!n&&N(l[0])===1&&N(l[1])===1&&u[0]!==l[0]&&u[1]!==l[1]?D=ye({datas:a,distX:-y,distY:-p}):D=xa(c,f,-(T?y:p),T,a).offset,D=D.map(function(w,E){return w*(C[E]?2/C[E]:0)}),{sign:C,isBound:T?x:v,isSnap:T?S:g,offset:D}})}function zo(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function qv(t,e,r,n){var i=Tv(t,e,r),a=i.horizontal,s=i.vertical,o=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Ov(t,e,r),u=o.horizontal,l=o.vertical,c=zo(a,u),f=zo(s,l),d=N(c),h=N(f);return{horizontal:{isBound:a.isBound,isSnap:u.isSnap,offset:c,dist:d},vertical:{isBound:s.isBound,isSnap:l.isSnap,offset:f,dist:h}}}function Uv(t,e,r,n,i){var a=[-r[0],-r[1]],s=t.state,o=s.width,u=s.height,l=t.props.bounds,c=1/0,f=1/0;if(l){var d=[[r[0],-r[1]],[-r[0],r[1]]],h=l.left,p=h===void 0?-1/0:h,v=l.top,g=v===void 0?-1/0:v,m=l.right,y=m===void 0?1/0:m,x=l.bottom,S=x===void 0?1/0:x;d.forEach(function(C){var b=C[0]!==a[0],T=C[1]!==a[1],D=Ot(e,C),w=Et(n,D)*360/Math.PI;if(T){var E=D.slice();(N(w-360)<2||N(w-180)<2)&&(E[1]=n[1]);var A=xa(n,E,(n[1]<D[1]?S:g)-D[1],!1,i),_=P(A.offset,2),R=_[1],I=A.isOutside;isNaN(R)||(f=u+(I?1:-1)*N(R))}if(b){var E=D.slice();(N(w-90)<2||N(w-270)<2)&&(E[0]=n[0]);var k=xa(n,E,(n[0]<D[0]?y:p)-D[0],!0,i),O=P(k.offset,1),B=O[0],F=k.isOutside;isNaN(B)||(c=o+(F?1:-1)*N(B))}})}return{maxWidth:c,maxHeight:f}}var Wt={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var r=t.props,n=r.hideThrottleDragRotateLine,i=r.throttleDragRotate,a=r.zoom,s=t.getState(),o=s.dragInfo,u=s.beforeOrigin;if(n||!i||!o)return[];var l=o.dist;if(!l[0]&&!l[1])return[];var c=ae(l),f=Et(l,[0,0]);return[e.createElement("div",{className:et("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(f,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var r=e.datas,n=e.parentEvent,i=e.parentGesto,a=t.state,s=a.gestos,o=a.style;if(s.draggable)return!1;s.draggable=i||t.targetGesto,r.datas={},r.left=parseFloat(o.left||"")||0,r.top=parseFloat(o.top||"")||0,r.bottom=parseFloat(o.bottom||"")||0,r.right=parseFloat(o.right||"")||0,r.startValue=[0,0],rr(t,e),vi(t,e,"translate"),hg(t,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var u=ut(t,e,M({set:function(c){r.startValue=c}},pi(t,e))),l=n||Z(t,"onDragStart",u);return l!==!1?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,r.isPinch=!1),r.isDrag?u:!1},drag:function(t,e){if(e){di(t,e,"translate");var r=e.datas,n=e.parentEvent,i=e.parentFlag,a=e.isPinch,s=e.deltaOffset,o=e.useSnap,u=e.isRequest,l=e.isGroup,c=e.parentThrottleDrag,f=e.distX,d=e.distY,h=r.isDrag,p=r.prevDist,v=r.prevBeforeDist,g=r.startValue;if(h){s&&(f+=s[0],d+=s[1]);var m=t.props,y=m.parentMoveable,x=l?0:m.throttleDrag||c||0,S=n?0:m.throttleDragRotate||0,C=0,b=!1,T=!1,D=!1,w=!1;if(!n&&S>0&&(f||d)){var E=m.startDragRotate||0,A=st(E+Et([0,0],[f,d])*180/Math.PI,S)-E,_=d*Math.abs(Math.cos((A-90)/180*Math.PI)),R=f*Math.abs(Math.cos(A/180*Math.PI)),I=ae([R,_]);C=A*Math.PI/180,f=I*Math.cos(C),d=I*Math.sin(C)}if(!a&&!n&&!i){var k=P(Hv(t,f,d,S,!o&&u||s,r),2),O=k[0],B=k[1];b=O.isSnap,T=O.isBound,D=B.isSnap,w=B.isBound;var F=O.offset,G=B.offset;f+=F,d+=G}var j=dt(pc({datas:r,distX:f,distY:d}),g),z=dt(av({datas:r,distX:f,distY:d}),g);Co(z,qt),Co(j,qt),S||(!b&&!T&&(z[0]=st(z[0],x),j[0]=st(j[0],x)),!D&&!w&&(z[1]=st(z[1],x),j[1]=st(j[1],x)));var U=rt(j,g),$=rt(z,g),Y=rt($,p),q=rt(U,v);r.prevDist=$,r.prevBeforeDist=U,r.passDelta=Y,r.passDist=$;var V=r.left+U[0],K=r.top+U[1],tt=r.right-U[0],nt=r.bottom-U[1],J=hi(r,"translate(".concat(z[0],"px, ").concat(z[1],"px)"),"translate(".concat($[0],"px, ").concat($[1],"px)"));if(ps(e,J),t.state.dragInfo.dist=n?[0,0]:$,!(!n&&!y&&Y.every(function(ot){return!ot})&&q.some(function(ot){return!ot}))){var H=t.state,Q=H.width,ft=H.height,it=ut(t,e,M({transform:J,dist:$,delta:Y,translate:z,beforeDist:U,beforeDelta:q,beforeTranslate:j,left:V,top:K,right:tt,bottom:nt,width:Q,height:ft,isPinch:a},Yt({transform:J},e)));return!n&&Z(t,"onDrag",it),it}}}},dragAfter:function(t,e){var r=e.datas,n=r.deltaOffset;return n[0]||n[1]?(r.deltaOffset=[0,0],this.drag(t,M(M({},e),{deltaOffset:n}))):!1},dragEnd:function(t,e){var r=e.parentEvent,n=e.datas;if(t.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var i=Qt(t,e,{});return!r&&Z(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var r,n,i=e.datas,a=e.clientX,s=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var u=Vi(t,this,"dragStart",[a||0,s||0],e,!1,"draggable"),l=u.childEvents,c=u.eventParams,f=M(M({},o),{targets:t.props.targets,events:c}),d=Z(t,"onDragGroupStart",f);i.isDrag=d!==!1;var h=(n=(r=l[0])===null||r===void 0?void 0:r.datas.startValue)!==null&&n!==void 0?n:[0,0];return i.throttleOffset=[h[0]%1,h[1]%1],i.isDrag?o:!1},dragGroup:function(t,e){var r=e.datas;if(r.isDrag){var n=this.drag(t,M(M({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=Vi(t,this,"drag",i,e,!1,"draggable").eventParams;if(n){var s=M({targets:t.props.targets,events:a},n);return Z(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isDrag){this.dragEnd(t,e);var i=Vi(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Z(t,"onDragGroupEnd",Qt(t,e,{targets:t.props.targets,events:i})),r}},request:function(t){var e={},r=t.getRect(),n=0,i=0,a=!1;return{isControl:!1,requestStart:function(s){return a=s.useSnap,{datas:e,useSnap:a}},request:function(s){return"x"in s?n=s.x-r.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?i=s.y-r.top:"deltaY"in s&&(i+=s.deltaY),{datas:e,distX:n,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function kc(t,e){var r=Ot(t,e),n=[0,0];return{fixedPosition:r,fixedDirection:e,fixedOffset:n}}function $v(t,e){var r=t.allMatrix,n=t.is3d,i=t.width,a=t.height,s=n?4:3,o=[i/2*(1+e[0]),a/2*(1+e[1])],u=bt(r,o,s),l=[0,0];return{fixedPosition:u,fixedDirection:e,fixedOffset:l}}function Bc(t,e){var r=t.allMatrix,n=t.is3d,i=t.width,a=t.height,s=n?4:3,o=hv(e,i,a),u=bt(r,e,s),l=[i?0:e[0],a?0:e[1]];return{fixedPosition:u,fixedDirection:o,fixedOffset:l}}var Fo=ws("resizable"),Sa={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:Cc("resizable"),dragControlCondition:Fo,viewClassName:Es("resizable"),dragControlStart:function(t,e){var r,n=e.inputEvent,i=e.isPinch,a=e.isGroup,s=e.parentDirection,o=e.parentGesto,u=e.datas,l=e.parentFixedDirection,c=e.parentEvent,f=Uc(s,i,n,u),d=t.state,h=d.target,p=d.width,v=d.height,g=d.gestos;if(!f||!h||g.resizable)return!1;g.resizable=o||t.controlGesto,!i&&rr(t,e),u.datas={},u.direction=f,u.startOffsetWidth=p,u.startOffsetHeight=v,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=d.inlineCSSWidth||d.cssWidth,u.startHeight=d.inlineCSSHeight||d.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[d.minOffsetWidth,d.minOffsetHeight],u.maxSize=[d.maxOffsetWidth,d.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";u.transformOrigin=Te(m)?m.split(" "):m,u.startOffsetMatrix=d.offsetMatrix,u.startTransformOrigin=d.transformOrigin,u.isWidth=(r=e==null?void 0:e.parentIsWidth)!==null&&r!==void 0?r:!f[0]&&!f[1]||f[0]||!f[1];function y(w){u.ratio=w&&isFinite(w)?w:0}u.startPositions=se(t.state);function x(w){var E=kc(u.startPositions,w);u.fixedDirection=E.fixedDirection,u.fixedPosition=E.fixedPosition,u.fixedOffset=E.fixedOffset}function S(w){var E=Bc(t.state,w);u.fixedDirection=E.fixedDirection,u.fixedPosition=E.fixedPosition,u.fixedOffset=E.fixedOffset}function C(w){u.minSize=[vt("".concat(w[0]),0)||0,vt("".concat(w[1]),0)||0]}function b(w){var E=[w[0]||1/0,w[1]||1/0];(!Kr(E[0])||isFinite(E[0]))&&(E[0]=vt("".concat(E[0]),0)||1/0),(!Kr(E[1])||isFinite(E[1]))&&(E[1]=vt("".concat(E[1]),0)||1/0),u.maxSize=E}y(p/v),x(l||[-f[0],-f[1]]),u.setFixedDirection=x,u.setFixedPosition=S,u.setMin=C,u.setMax=b;var T=ut(t,e,{direction:f,startRatio:u.ratio,set:function(w){var E=P(w,2),A=E[0],_=E[1];u.startWidth=A,u.startHeight=_},setMin:C,setMax:b,setRatio:y,setFixedDirection:x,setFixedPosition:S,setOrigin:function(w){u.transformOrigin=w},dragStart:Wt.dragStart(t,new xr().dragStart([0,0],e))}),D=c||Z(t,"onResizeStart",T);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,D!==!1&&(u.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:f}),u.isResize?T:!1},dragControl:function(t,e){var r,n=e.datas,i=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,u=e.parentDist,l=e.useSnap,c=e.isRequest,f=e.isGroup,d=e.parentEvent,h=e.resolveMatrix,p=n.isResize,v=n.transformOrigin,g=n.startWidth,m=n.startHeight,y=n.prevWidth,x=n.prevHeight,S=n.minSize,C=n.maxSize,b=n.ratio,T=n.startOffsetWidth,D=n.startOffsetHeight,w=n.isWidth;if(!p)return;if(h){var E=t.state.is3d,A=n.startOffsetMatrix,_=n.startTransformOrigin,R=E?4:3,I=Jr(Jn(e)),k=Math.sqrt(I.length);R!==k&&(I=de(I,k,R));var O=vn(A,I,_,R),B=nr(O,T,D,R);n.startPositions=B,n.nextTargetMatrix=I,n.nextAllMatrix=O}var F=er(t.props,"resizable"),G=F.resizeFormat,j=F.throttleResize,z=j===void 0?i?0:1:j,U=F.parentMoveable,$=F.keepRatioFinally,Y=n.direction,q=Y,V=0,K=0;!Y[0]&&!Y[1]&&(q=[1,1]);var tt=b&&(s??F.keepRatio)||!1;function nt(){var wt=n.fixedDirection,_t=tf(q,tt,n,e);V=_t.distWidth,K=_t.distHeight;var Ee=q[0]-wt[0]||tt?Math.max(T+V,qt):T,we=q[1]-wt[1]||tt?Math.max(D+K,qt):D;return tt&&T&&D&&(w?we=Ee/b:Ee=we*b),[Ee,we]}var J=P(nt(),2),H=J[0],Q=J[1];d||(n.setFixedDirection(n.fixedDirection),Z(t,"onBeforeResize",ut(t,e,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(wt){var _t;return n.setFixedDirection(wt),_t=P(nt(),2),H=_t[0],Q=_t[1],[H,Q]},setFixedPosition:function(wt){var _t;return n.setFixedPosition(wt),_t=P(nt(),2),H=_t[0],Q=_t[1],[H,Q]},boundingWidth:H,boundingHeight:Q,setSize:function(wt){var _t;_t=P(wt,2),H=_t[0],Q=_t[1]}},!0)));var ft=o;o||(!i&&a?ft=mv(t,[0,0]):ft=n.fixedPosition);var it=[0,0];a||(it=fg(t,H,Q,Y,ft,!l&&c,n)),u&&(!u[0]&&(it[0]=0),!u[1]&&(it[1]=0));function ot(){var wt;G&&(wt=P(G([H,Q]),2),H=wt[0],Q=wt[1]),H=st(H,z),Q=st(Q,z)}if(tt){q[0]&&q[1]&&it[0]&&it[1]&&(N(it[0])>N(it[1])?it[1]=0:it[0]=0);var ct=!it[0]&&!it[1];ct&&ot(),q[0]&&!q[1]||it[0]&&!it[1]||ct&&w?(H+=it[0],Q=H/b):(!q[0]&&q[1]||!it[0]&&it[1]||ct&&!w)&&(Q+=it[1],H=Q*b)}else H+=it[0],Q+=it[1],H=Math.max(0,H),Q=Math.max(0,Q);r=P(Ul([H,Q],S,C,tt?b:!1),2),H=r[0],Q=r[1],ot(),tt&&(f||$)&&(w?Q=H/b:H=Q*b),V=H-T,K=Q-D;var pt=[V-y,K-x];n.prevWidth=V,n.prevHeight=K;var mt=gv(t,H,Q,ft,v,n);if(!(!U&&pt.every(function(wt){return!wt})&&mt.every(function(wt){return!wt}))){var lt=Wt.drag(t,pn(e,t.state,mt,!!a,!1,"draggable")),ht=lt.transform,It=g+V,Nt=m+K,zt=ut(t,e,M({width:It,height:Nt,offsetWidth:Math.round(H),offsetHeight:Math.round(Q),startRatio:b,boundingWidth:H,boundingHeight:Q,direction:Y,dist:[V,K],delta:pt,isPinch:!!a,drag:lt},Kc({style:{width:"".concat(It,"px"),height:"".concat(Nt,"px")},transform:ht},lt,e)));return!d&&Z(t,"onResize",zt),zt}},dragControlAfter:function(t,e){var r=e.datas,n=r.isResize,i=r.startOffsetWidth,a=r.startOffsetHeight,s=r.prevWidth,o=r.prevHeight;if(!(!n||t.props.checkResizableError===!1)){var u=t.state,l=u.width,c=u.height,f=l-(i+s),d=c-(a+o),h=N(f)>3,p=N(d)>3;if(h&&(r.startWidth+=f,r.startOffsetWidth+=f,r.prevWidth+=f),p&&(r.startHeight+=d,r.startOffsetHeight+=d,r.prevHeight+=d),h||p)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var r=e.datas,n=e.parentEvent;if(r.isResize){r.isResize=!1;var i=Qt(t,e,{});return!n&&Z(t,"onResizeEnd",i),i}},dragGroupControlCondition:Fo,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,M(M({},e),{isGroup:!0}));if(!n)return!1;var i=ce(t,"resizable",e),a=r.startOffsetWidth,s=r.startOffsetHeight;function o(){var h=r.minSize;i.forEach(function(p){var v=p.datas,g=v.minSize,m=v.startOffsetWidth,y=v.startOffsetHeight,x=a*(m?g[0]/m:0),S=s*(y?g[1]/y:0);h[0]=Math.max(h[0],x),h[1]=Math.max(h[1],S)})}function u(){var h=r.maxSize;i.forEach(function(p){var v=p.datas,g=v.maxSize,m=v.startOffsetWidth,y=v.startOffsetHeight,x=a*(m?g[0]/m:0),S=s*(y?g[1]/y:0);h[0]=Math.min(h[0],x),h[1]=Math.min(h[1],S)})}var l=Se(t,this,"dragControlStart",e,function(h,p){return Qn(t,h,r,p)});o(),u();var c=function(h){n.setFixedDirection(h),l.forEach(function(p,v){p.setFixedDirection(h),Qn(t,p.moveable,r,i[v])})};r.setFixedDirection=c;var f=M(M({},n),{targets:t.props.targets,events:l.map(function(h){return M(M({},h),{setMin:function(p){h.setMin(p),o()},setMax:function(p){h.setMax(p),u()}})}),setFixedDirection:c,setMin:function(h){n.setMin(h),o()},setMax:function(h){n.setMax(h),u()}}),d=Z(t,"onResizeGroupStart",f);return r.isResize=d!==!1,r.isResize?n:!1},dragGroupControl:function(t,e){var r=e.datas;if(r.isResize){var n=er(t.props,"resizable");Si(t,"onBeforeResize",function(h){Z(t,"onBeforeResizeGroup",ut(t,e,M(M({},h),{targets:n.targets}),!0))});var i=this.dragControl(t,M(M({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,s=i.boundingHeight,o=i.dist,u=n.keepRatio,l=[a/(a-o[0]),s/(s-o[1])],c=r.fixedPosition,f=Se(t,this,"dragControl",e,function(h,p){var v=P(Lt(fn(t.rotation/180*Math.PI,3),[p.datas.originalX*l[0],p.datas.originalY*l[1],1],3),2),g=v[0],m=v[1];return M(M({},p),{parentDist:null,parentScale:l,dragClient:dt(c,[g,m]),parentKeepRatio:u})}),d=M({targets:n.targets,events:f},i);return Z(t,"onResizeGroup",d),d}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isResize){this.dragControlEnd(t,e);var i=Se(t,this,"dragControlEnd",e),a=Qt(t,e,{targets:t.props.targets,events:i});return Z(t,"onResizeGroupEnd",a),r}},request:function(t){var e={},r=0,n=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(s){var o;return i=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(o=s==null?void 0:s.horizontal)!==null&&o!==void 0?o:!0,useSnap:i}},request:function(s){return"offsetWidth"in s?r=s.offsetWidth-a.offsetWidth:"deltaWidth"in s&&(r+=s.deltaWidth),"offsetHeight"in s?n=s.offsetHeight-a.offsetHeight:"deltaHeight"in s&&(n+=s.deltaHeight),{datas:e,parentDist:[r,n],parentKeepRatio:s.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function zi(t,e,r,n,i){var a=t.props.groupable,s=t.state,o=s.is3d?4:3,u=e.origin,l=bt(t.state.rootMatrix,rt([u[0],u[1]],a?[0,0]:[s.left,s.top]),o),c=dt([i.left,i.top],l);e.startAbsoluteOrigin=c,e.prevDeg=Et(c,[r,n])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=xe(c,[r,n])}function jn(t,e,r){var n=r.defaultDeg,i=r.prevDeg,a=i%360,s=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++s:a<t&&a<90&&t>270&&--s;var o=e*(s*360+t-n);return r.prevDeg=n+o,o}function Fi(t,e,r,n){return jn(Et(n.startAbsoluteOrigin,[t,e])/Math.PI*180,r,n)}function Gi(t,e,r,n,i,a){var s=t.props.throttleRotate,o=s===void 0?0:s,u=r.prevSnapDeg,l=0,c=!1;if(a){var f=cg(t,e,n,i+n);c=f.isSnap,l=i+f.dist}c||(l=st(i+n,o));var d=l-i;return r.prevSnapDeg=d,[d-u,d,l]}function Vc(t,e,r){var n=P(e,4),i=n[0],a=n[1],s=n[2],o=n[3];if(t==="none")return[];if(kt(t))return t.map(function(g){return Vc(g,[i,a,s,o],r)[0]});var u=P((t||"top").split("-"),2),l=u[0],c=u[1],f=[i,a];l==="left"?f=[s,i]:l==="right"?f=[a,o]:l==="bottom"&&(f=[o,s]);var d=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2],h=Xc(f,r);if(c){var p=c==="top"||c==="left",v=l==="bottom"||l==="left";d=f[p&&!v||!p&&v?0:1]}return[[d,h]]}function ba(t,e){if(e.isRequest)return e.requestAble==="rotatable";var r=e.inputEvent.target;if(At(r,et("rotation-control"))||t.props.rotateAroundControls&&At(r,et("around-control"))||At(r,et("control"))&&At(r,et("rotatable")))return!0;var n=t.props.rotationTarget;return n?Ms(n,!0).some(function(i){return i?r===i||r.contains(i):!1}):!1}var Kv=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Zv={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Kv],viewClassName:function(t){return t.isDragging("rotatable")?et("view-rotation-dragging"):""},render:function(t,e){var r=er(t.props,"rotatable"),n=r.rotatable,i=r.rotationPosition,a=r.zoom,s=r.renderDirections,o=r.rotateAroundControls,u=r.resolveAblesWithRotatable,l=t.getState(),c=l.renderPoses,f=l.direction;if(!n)return null;var d=Vc(i,c,f),h=[];if(d.forEach(function(m,y){var x=P(m,2),S=x[0],C=x[1];h.push(e.createElement("div",{key:"rotation".concat(y),className:et("rotation"),style:{transform:"translate(-50%) translate(".concat(S[0],"px, ").concat(S[1],"px) rotate(").concat(C,"rad)")}},e.createElement("div",{className:et("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:et("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var p=wr(u||{}),v={};p.forEach(function(m){u[m].forEach(function(y){v[y]=m})});var g=[];kt(s)&&(g=s.map(function(m){var y=v[m];return{data:y?{resolve:y}:{},classNames:y?["move"]:[],dir:m}})),h.push.apply(h,X([],P(xc(t,"rotatable",g,e)),!1))}return o&&h.push.apply(h,X([],P(Tc(t,e)),!1)),h},dragControlCondition:ba,dragControlStart:function(t,e){var r,n,i=e.datas,a=e.clientX,s=e.clientY,o=e.parentRotate,u=e.parentFlag,l=e.isPinch,c=e.isRequest,f=t.state,d=f.target,h=f.left,p=f.top,v=f.direction,g=f.beforeDirection,m=f.targetTransform,y=f.moveableClientRect,x=f.offsetMatrix,S=f.targetMatrix,C=f.allMatrix,b=f.width,T=f.height;if(!c&&!d)return!1;var D=t.getRect();i.rect=D,i.transform=m,i.left=h,i.top=p;var w=function(q){var V=Bc(t.state,q);i.fixedDirection=V.fixedDirection,i.fixedOffset=V.fixedOffset,i.fixedPosition=V.fixedPosition,z&&z.setFixedPosition(q)},E=function(q){var V=$v(t.state,q);i.fixedDirection=V.fixedDirection,i.fixedOffset=V.fixedOffset,i.fixedPosition=V.fixedPosition,z&&z.setFixedDirection(q)},A=a,_=s;if(c||l||u){var R=o||0;i.beforeInfo={origin:D.beforeOrigin,prevDeg:R,defaultDeg:R,prevSnapDeg:0,startDist:0},i.afterInfo=M(M({},i.beforeInfo),{origin:D.origin}),i.absoluteInfo=M(M({},i.beforeInfo),{origin:D.origin,startValue:R})}else{var I=(n=e.inputEvent)===null||n===void 0?void 0:n.target;if(I){var k=I.getAttribute("data-direction")||"",O=rv[k];if(O){i.isControl=!0,i.isAroundControl=At(I,et("around-control")),i.controlDirection=O;var B=I.getAttribute("data-resolve");B&&(i.resolveAble=B);var F=wg(f.rootMatrix,f.renderPoses,y);r=P(Ot(F,O),2),A=r[0],_=r[1]}}i.beforeInfo={origin:D.beforeOrigin},i.afterInfo={origin:D.origin},i.absoluteInfo={origin:D.origin,startValue:D.rotation};var G=w;w=function(q){var V=f.is3d?4:3,K=P(dt(Ql(S,V),q),2),tt=K[0],nt=K[1],J=Lt(x,Je([tt,nt],V)),H=Lt(C,Je([q[0],q[1]],V));G(q);var Q=f.posDelta;i.beforeInfo.origin=rt(J,Q),i.afterInfo.origin=rt(H,Q),i.absoluteInfo.origin=rt(H,Q),zi(t,i.beforeInfo,A,_,y),zi(t,i.afterInfo,A,_,y),zi(t,i.absoluteInfo,A,_,y)},E=function(q){var V=Ot([[0,0],[b,0],[0,T],[b,T]],q);w(V)}}i.startClientX=A,i.startClientY=_,i.direction=v,i.beforeDirection=g,i.startValue=0,i.datas={},vi(t,e,"rotate");var j=!1,z=!1;if(i.isControl&&i.resolveAble){var U=i.resolveAble;U==="resizable"&&(z=Sa.dragControlStart(t,M(M({},new xr("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}z||(j=Wt.dragStart(t,new xr().dragStart([0,0],e))),w(Mg(t));var $=ut(t,e,M(M({set:function(q){i.startValue=q*Math.PI/180},setFixedDirection:E,setFixedPosition:w},pi(t,e)),{dragStart:j,resizeStart:z})),Y=Z(t,"onRotateStart",$);return i.isRotate=Y!==!1,f.snapRenderInfo={request:e.isRequest},i.isRotate?$:!1},dragControl:function(t,e){var r,n,i,a=e.datas,s=e.clientDistX,o=e.clientDistY,u=e.parentRotate,l=e.parentFlag,c=e.isPinch,f=e.groupDelta,d=e.resolveMatrix,h=a.beforeDirection,p=a.beforeInfo,v=a.afterInfo,g=a.absoluteInfo,m=a.isRotate,y=a.startValue,x=a.rect,S=a.startClientX,C=a.startClientY;if(m){di(t,e,"rotate");var b=iv(e),T=h*b,D=t.props.parentMoveable,w=0,E,A,_=0,R,I,k=0,O,B,F=180/Math.PI*y,G=g.startValue,j=!1,z=S+s,U=C+o;if(!l&&"parentDist"in e){var $=e.parentDist;E=$,R=$,O=$}else c||l?(E=jn(u,h,p),R=jn(u,T,v),O=jn(u,T,g)):(E=Fi(z,U,h,p),R=Fi(z,U,T,v),O=Fi(z,U,T,g),j=!0);if(A=F+E,I=F+R,B=G+O,Z(t,"onBeforeRotate",ut(t,e,{beforeRotation:A,rotation:I,absoluteRotation:B,setRotation:function(ft){R=ft-F,E=R,O=R}},!0)),r=P(Gi(t,x,p,E,F,j),3),w=r[0],E=r[1],A=r[2],n=P(Gi(t,x,v,R,F,j),3),_=n[0],R=n[1],I=n[2],i=P(Gi(t,x,g,O,G,j),3),k=i[0],O=i[1],B=i[2],!(!k&&!_&&!w&&!D&&!d)){var Y=hi(a,"rotate(".concat(I,"deg)"),"rotate(".concat(R,"deg)"));d&&(a.fixedPosition=vs(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var q=vv(t,R,a),V=rt(dt(f||[0,0],q),a.prevInverseDist||[0,0]);a.prevInverseDist=q,a.requestValue=null;var K=gc(t,Y,V,c,e),tt=K,nt=xe([z,U],g.startAbsoluteOrigin)-g.startDist,J=void 0;if(a.resolveAble==="resizable"){var H=Sa.dragControl(t,M(M({},pn(e,t.state,[e.deltaX,e.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:nt}));H&&(J=H,tt=Kc(tt,H,e))}var Q=ut(t,e,M(M({delta:_,dist:R,rotate:I,rotation:I,beforeDist:E,beforeDelta:w,beforeRotate:A,beforeRotation:A,absoluteDist:O,absoluteDelta:k,absoluteRotate:B,absoluteRotation:B,isPinch:!!c,resize:J},K),tt));return Z(t,"onRotate",Q),Q}}},dragControlEnd:function(t,e){var r=e.datas;if(r.isRotate){r.isRotate=!1;var n=Qt(t,e,{});return Z(t,"onRotateEnd",n),n}},dragGroupControlCondition:ba,dragGroupControlStart:function(t,e){var r=e.datas,n=t.state,i=n.left,a=n.top,s=n.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(r.beforeDirection*t.rotation);var u=Se(t,this,"dragControlStart",e,function(f,d){var h=f.state,p=h.left,v=h.top,g=h.beforeOrigin,m=dt(rt([p,v],[i,a]),rt(g,s));return d.datas.startGroupClient=m,d.datas.groupClient=m,M(M({},d),{parentRotate:0})}),l=M(M({},o),{targets:t.props.targets,events:u}),c=Z(t,"onRotateGroupStart",l);return r.isRotate=c!==!1,r.isRotate?o:!1},dragGroupControl:function(t,e){var r=e.datas;if(r.isRotate){Si(t,"onBeforeRotate",function(l){Z(t,"onBeforeRotateGroup",ut(t,e,M(M({},l),{targets:t.props.targets}),!0))});var n=this.dragControl(t,e);if(n){var i=r.beforeDirection,a=n.beforeDist,s=a/180*Math.PI,o=Se(t,this,"dragControl",e,function(l,c){var f=c.datas.startGroupClient,d=P(c.datas.groupClient,2),h=d[0],p=d[1],v=P(cn(f,s*i),2),g=v[0],m=v[1],y=[g-h,m-p];return c.datas.groupClient=[g,m],M(M({},c),{parentRotate:a,groupDelta:y})});t.rotation=i*n.beforeRotation;var u=M({targets:t.props.targets,events:o,set:function(l){t.rotation=l},setGroupRotation:function(l){t.rotation=l}},n);return Z(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isRotate){this.dragControlEnd(t,e);var i=Se(t,this,"dragControlEnd",e),a=Qt(t,e,{targets:t.props.targets,events:i});return Z(t,"onRotateGroupEnd",a),r}},request:function(t){var e={},r=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?r+=i.deltaRotate:"rotate"in i&&(r=i.rotate-n),{datas:e,parentDist:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Jv(t,e){var r,n=t.direction,i=t.classNames,a=t.size,s=t.pos,o=t.zoom,u=t.key,l=n==="horizontal",c=l?"Y":"X";return e.createElement("div",{key:u,className:i.join(" "),style:(r={},r[l?"width":"height"]="".concat(a),r.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(o,")"),r)})}function bs(t,e){return Jv(M(M({},t),{classNames:X([et("line","guideline",t.direction)],P(t.classNames),!1).filter(function(r){return r}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(r){return"".concat(st(r,.1),"px")})}),e)}function Go(t,e,r,n,i,a,s,o){var u=t.props.zoom;return r.map(function(l,c){var f=l.type,d=l.pos,h=[0,0];return h[s]=n,h[s?0:1]=-i+d,bs({key:"".concat(e,"TargetGuideline").concat(c),classNames:[et("target","bold",f)],posValue:h,sizeValue:a,zoom:u,direction:e},o)})}function Lo(t,e,r,n,i,a){var s=t.props,o=s.zoom,u=s.isDisplayInnerSnapDigit,l=e==="horizontal"?ke:Be,c=i[l.start],f=i[l.end];return r.filter(function(d){var h=d.hide,p=d.elementRect;if(h)return!1;if(u&&p){var v=p.rect;if(v[l.start]<=c&&f<=v[l.end])return!1}return!0}).map(function(d,h){var p=d.pos,v=d.size,g=d.element,m=d.className,y=[-n[0]+p[0],-n[1]+p[1]];return bs({key:"".concat(e,"-default-guideline-").concat(h),classNames:g?[et("bold"),m]:[et("normal"),m],direction:e,posValue:y,sizeValue:v,zoom:o},a)})}function Br(t,e,r,n,i,a,s,o){var u,l=t.props,c=l.snapDigit,f=c===void 0?0:c,d=l.isDisplaySnapDigit,h=d===void 0?!0:d,p=l.snapDistFormat,v=p===void 0?function(C,b){return C}:p,g=l.zoom,m=e==="horizontal"?"X":"Y",y=e==="vertical"?"height":"width",x=Math.abs(i),S=h?parseFloat(x.toFixed(f)):0;return o.createElement("div",{key:"".concat(e,"-").concat(r,"-guideline-").concat(n),className:et("guideline-group",e),style:(u={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},u[y]="".concat(x,"px"),u)},bs({direction:e,classNames:[et(r),s],size:"100%",posValue:[0,0],sizeValue:x,zoom:g},o),o.createElement("div",{className:et("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},S>0?v(S,e):""))}function Qv(t,e,r,n){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,s=i?ke:Be,o=r[s.start],u=r[s.end];return Zc(e,function(l){return l.pos[i]}).map(function(l){var c=[],f=[],d=[];return l.forEach(function(h){var p,v,g=h.element,m=h.elementRect.rect;if(m[s.end]<o)c.push(h);else if(u<m[s.start])f.push(h);else if(m[s.start]<=o&&u<=m[s.end]&&n){var y=h.pos,x={element:g,rect:M(M({},m),(p={},p[s.end]=m[s.start],p))},S={element:g,rect:M(M({},m),(v={},v[s.start]=m[s.end],v))},C=[0,0],b=[0,0];C[i]=y[i],C[a]=y[a],b[i]=y[i],b[a]=y[a]+h.size,c.push({type:t,pos:C,size:0,elementRect:x,direction:"",elementDirection:"end"}),f.push({type:t,pos:b,size:0,elementRect:S,direction:"",elementDirection:"start"})}}),c.sort(function(h,p){return p.pos[a]-h.pos[a]}),f.sort(function(h,p){return h.pos[a]-p.pos[a]}),{total:l,start:c,end:f,inner:d}})}function tg(t,e,r,n,i){var a=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var u=e.filter(function(g){return g.type===o}),l=o==="vertical"?1:0,c=l?0:1,f=Qv(o,u,n,a),d=l?Be:ke,h=l?ke:Be,p=n[d.start],v=n[d.end];f.forEach(function(g){var m=g.total,y=g.start,x=g.end,S=g.inner,C=r[c]+m[0].pos[c]-n[h.start],b=n;y.forEach(function(T){var D=T.elementRect.rect,w=b[d.start]-D[d.end];if(w>0){var E=[0,0];E[l]=r[l]+b[d.start]-p-w,E[c]=C,s.push(Br(t,o,"dashed",s.length,w,E,T.className,i))}b=D}),b=n,x.forEach(function(T){var D=T.elementRect.rect,w=D[d.start]-b[d.end];if(w>0){var E=[0,0];E[l]=r[l]+b[d.end]-p,E[c]=C,s.push(Br(t,o,"dashed",s.length,w,E,T.className,i))}b=D}),S.forEach(function(T){var D=T.elementRect.rect,w=p-D[d.start],E=D[d.end]-v,A=[0,0],_=[0,0];A[l]=r[l]-w,A[c]=C,_[l]=r[l]+v-p,_[c]=C,s.push(Br(t,o,"dashed",s.length,w,A,T.className,i)),s.push(Br(t,o,"dashed",s.length,E,_,T.className,i))})})}),s}function eg(t,e,r,n,i){var a=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(g){return g.type===s}).slice(0,1),u=s==="vertical"?0:1,l=u?0:1,c=u?Be:ke,f=u?ke:Be,d=n[c.start],h=n[c.end],p=n[f.start],v=n[f.end];o.forEach(function(g){var m=g.gap,y=g.gapRects,x=Math.max.apply(Math,X([p],P(y.map(function(b){var T=b.rect;return T[f.start]})),!1)),S=Math.min.apply(Math,X([v],P(y.map(function(b){var T=b.rect;return T[f.end]})),!1)),C=(x+S)/2;x===S||C===(p+v)/2||y.forEach(function(b){var T=b.rect,D=b.className,w=[r[0],r[1]];if(T[c.end]<d)w[u]+=T[c.end]-d;else if(h<T[c.start])w[u]+=T[c.start]-d-m;else return;w[l]+=C-p,a.push(Br(t,u?"vertical":"horizontal","gap",a.length,m,w,D,i))})})}),a}function Ca(t){var e,r,n=t.state,i=n.containerClientRect,a=n.hasFixed,s=i.overflow,o=i.scrollHeight,u=i.scrollWidth,l=i.clientHeight,c=i.clientWidth,f=i.clientLeft,d=i.clientTop,h=t.props,p=h.snapGap,v=p===void 0?!0:p,g=h.verticalGuidelines,m=h.horizontalGuidelines,y=h.snapThreshold,x=y===void 0?5:y,S=h.maxSnapElementGuidelineDistance,C=S===void 0?1/0:S,b=h.isDisplayGridGuidelines,T=ne(se(t.state)),D=T.top,w=T.left,E=T.bottom,A=T.right,_={top:D,left:w,bottom:E,right:A,center:(w+A)/2,middle:(D+E)/2},R=ag(t),I=X([],P(R),!1),k=((r=(e=n.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&r!==void 0?r:[1,1]).map(function(G){return G*x});v&&I.push.apply(I,X([],P(rg(t,_,k)),!1));var O=M({},n.snapOffset||{left:0,top:0,bottom:0,right:0});if(I.push.apply(I,X([],P(ig(t,s?u:c,s?o:l,f,d,O,b)),!1)),a){var B=i.left,F=i.top;O.left+=B,O.top+=F,O.right+=B,O.bottom+=F}return I.push.apply(I,X([],P(Fc(m||!1,g||!1,s?u:c,s?o:l,f,d,O)),!1)),I=I.filter(function(G){var j=G.element,z=G.elementRect,U=G.type;if(!j||!z)return!0;var $=z.rect;return zc(_,$,U,C)}),I}function rg(t,e,r){var n=t.props,i=n.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,s=n.maxSnapElementGapDistance,o=s===void 0?1/0:s,u=t.state.elementRects,l=[];return[["vertical",ke,Be],["horizontal",Be,ke]].forEach(function(c){var f=P(c,3),d=f[0],h=f[1],p=f[2],v=e[h.start],g=e[h.end],m=e[h.center],y=e[p.start],x=e[p.end],S={left:r[0],top:r[1]};function C(D){var w=D.rect,E=S[h.start];return w[h.end]<v+E?v-w[h.end]:g-E<w[h.start]?w[h.start]-g:-1}var b=u.filter(function(D){var w=D.rect;return w[p.start]>x||w[p.end]<y?!1:C(D)>0}).sort(function(D,w){return C(D)-C(w)}),T=[];b.forEach(function(D){b.forEach(function(w){if(D!==w){var E=D.rect,A=w.rect,_=E[p.start],R=E[p.end],I=A[p.start],k=A[p.end];_>k||I>R||T.push([D,w])}})}),T.forEach(function(D){var w=P(D,2),E=w[0],A=w[1],_=E.rect,R=A.rect,I=_[h.start],k=_[h.end],O=R[h.start],B=R[h.end],F=S[h.start],G=0,j=0,z=!1,U=!1,$=!1;if(k<=v&&g<=O){if(U=!0,G=(O-k-(g-v))/2,j=k+G+(g-v)/2,N(j-m)>F)return}else if(k<O&&B<v+F){if(z=!0,G=O-k,j=B+G,N(j-v)>F)return}else if(k<O&&g-F<I){if($=!0,G=O-k,j=I-G,N(j-g)>F)return}else return;G&&zc(e,R,d,a)&&(G>o||l.push({type:d,pos:d==="vertical"?[j,0]:[0,j],element:A.element,size:0,className:A.className,isStart:z,isCenter:U,isEnd:$,gap:G,hide:!0,gapRects:[E,A],direction:"",elementDirection:""}))})}),l}function ng(t,e,r,n){var i,a,s=t.props,o=t.state,u=s.snapGridAll,l=s.snapGridWidth,c=l===void 0?0:l,f=s.snapGridHeight,d=f===void 0?0:f,h=o.snapRenderInfo,p=h&&(((i=h.direction)===null||i===void 0?void 0:i[0])||((a=h.direction)===null||a===void 0?void 0:a[1])),v=t.moveables;if(u&&v&&p&&(c||d)){if(o.snapThresholdInfo)return;o.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var g=t.getRect(),m=g.children,y=h.direction;if(m){var x=y.map(function(C,b){var T=b===0?{snapSize:c,posName:"left",sizeName:"width",clientOffset:n.left-e}:{snapSize:d,posName:"top",sizeName:"height",clientOffset:n.top-r},D=T.snapSize,w=T.posName,E=T.sizeName,A=T.clientOffset;if(!D)return{dir:C,multiple:1,snapSize:D,snapOffset:0};var _=g[E],R=g[w],I=Kh(m.map(function(z){return[z[w]-R,z[E],_-z[E]-z[w]+R]})).filter(function(z){return z}).sort(function(z,U){return z-U}),k=I[0],O=I.map(function(z){return st(z/k,.1)*D}),B=1,F=st(_/k,.1);for(B=1;B<=10&&!O.every(function(z){return z*B%1===0});++B);var G=(-C+1)/2,j=$n(R-A,R-A+_,G,1-G);return{multiple:F*B,dir:C,snapSize:D,snapOffset:Math.round(j/D)}}),S=x.map(function(C){return C.multiple||1});o.snapThresholdInfo.multiples=S,o.snapThresholdInfo.offset=x.map(function(C){return C.snapOffset}),x.forEach(function(C,b){C.snapSize})}}else o.snapThresholdInfo=null}function ig(t,e,r,n,i,a,s){n===void 0&&(n=0),i===void 0&&(i=0);var o=t.props,u=t.state,l=o.snapGridWidth,c=l===void 0?0:l,f=o.snapGridHeight,d=f===void 0?0:f,h=[],p=a.left,v=a.top,g=[0,0];ng(t,n,i,a);var m=u.snapThresholdInfo,y=c,x=d;if(m&&(c*=m.multiples[0]||1,d*=m.multiples[1]||1,g=m.offset),d){for(var S=function(b){h.push({type:"horizontal",pos:[p,st(g[1]*x+b-i+v,.1)],className:et("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},C=0;C<=r*2;C+=d)S(C);for(var C=-d;C>=-r;C-=d)S(C)}if(c){for(var S=function(T){h.push({type:"vertical",pos:[st(g[0]*y+T-n+p,.1),v],className:et("grid-guideline"),size:r,hide:!s,direction:"",grid:!0})},C=0;C<=e*2;C+=c)S(C);for(var C=-c;C>=-e;C-=c)S(C)}return h}function zc(t,e,r,n){return r==="horizontal"?N(t.right-e.left)<=n||N(t.left-e.right)<=n||t.left<=e.right&&e.left<=t.right:r==="vertical"?N(t.bottom-e.top)<=n||N(t.top-e.bottom)<=n||t.top<=e.bottom&&e.top<=t.bottom:!0}function ag(t){var e=t.state,r=t.props.elementGuidelines,n=r===void 0?[]:r;if(!n.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(d){return!d.refresh}),a=n.map(function(d){return fe(d)&&"element"in d?M(M({},d),{element:he(d.element,!0)}):{element:he(d,!0)}}).filter(function(d){return d.element}),s=gp(i.map(function(d){return d.element}),a.map(function(d){return d.element})),o=s.maintained,u=s.added,l=[];o.forEach(function(d){var h=P(d,2),p=h[0],v=h[1];l[v]=i[p]}),sg(t,u.map(function(d){return a[d]})).map(function(d,h){l[u[h]]=d}),e.elementRects=l;var c=ms(t.props.elementSnapDirections),f=[];return l.forEach(function(d){var h=d.element,p=d.top,v=p===void 0?c.top:p,g=d.left,m=g===void 0?c.left:g,y=d.right,x=y===void 0?c.right:y,S=d.bottom,C=S===void 0?c.bottom:S,b=d.center,T=b===void 0?c.center:b,D=d.middle,w=D===void 0?c.middle:D,E=d.className,A=d.rect,_=ys({top:v,right:x,left:m,bottom:C,center:T,middle:w},A),R=_.horizontal,I=_.vertical,k=_.horizontalNames,O=_.verticalNames,B=A.top,F=A.left,G=A.right-F,j=A.bottom-B,z=[G,j];I.forEach(function(U,$){f.push({type:"vertical",element:h,pos:[st(U,.1),B],size:j,sizes:z,className:E,elementRect:d,elementDirection:Ao[O[$]]||O[$],direction:""})}),R.forEach(function(U,$){f.push({type:"horizontal",element:h,pos:[F,st(U,.1)],size:G,sizes:z,className:E,elementRect:d,elementDirection:Ao[k[$]]||k[$],direction:""})})}),f}function No(t,e){return t?t.map(function(r){var n=fe(r)?r:{pos:r},i=n.pos;return Kr(i)?n:M(M({},n),{pos:vt(i,e)})}):[]}function Fc(t,e,r,n,i,a,s){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],u=s.left,l=s.top,c=s.bottom,f=s.right,d=r+f-u,h=n+c-l;return No(t,h).forEach(function(p){o.push({type:"horizontal",pos:[u,st(p.pos-a+l,.1)],size:d,className:p.className,direction:""})}),No(e,d).forEach(function(p){o.push({type:"vertical",pos:[st(p.pos-i+u,.1),l],size:h,className:p.className,direction:""})}),o}function sg(t,e){if(!e.length)return[];var r=t.props.groupable,n=t.state,i=n.containerClientRect,a=n.rootMatrix,s=n.is3d,o=n.offsetDelta,u=s?4:3,l=P(_v(a,i,u),2),c=l[0],f=l[1],d=r?0:o[0],h=r?0:o[1];return e.map(function(p){var v=p.element.getBoundingClientRect(),g=v.left-c-d,m=v.top-f-h,y=m+v.height,x=g+v.width,S=P(Cr(a,[g,m],u),2),C=S[0],b=S[1],T=P(Cr(a,[x,y],u),2),D=T[0],w=T[1];return M(M({},p),{rect:{left:C,right:D,top:b,bottom:w,center:(C+D)/2,middle:(b+w)/2}})})}function _n(t){var e=t.state,r=e.container,n=t.props.snapContainer||r;if(e.snapContainer===n&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(r!==n){var s=he(n,!0);if(s){var o=Wr(s),u=qo(e,[o.left-i.left,o.top-i.top]),l=qo(e,[o.right-i.right,o.bottom-i.bottom]);a.left=st(u[0],1e-5),a.top=st(u[1],1e-5),a.right=st(l[0],1e-5),a.bottom=st(l[1],1e-5)}}return e.snapContainer=n,e.snapOffset=a,e.guidelines=Ca(t),e.enableSnap=!0,!0}function Gc(t,e,r,n,i,a){var s=nr(t,e,r,a?4:3),o=Ot(s,n);return Ds(s,rt(i,o))}function jo(t){return t?t/N(t):0}function og(t,e,r,n,i,a){var s=a.fixedDirection,o=kv(r,s,n),u=Ss(t,e,r,n),l=X(X([],P(Xv(t,e,o,n,i,a)),!1),P(Ic(t,u,a)),!1),c=ti(l,0),f=ti(l,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:f.isBound,offset:f.offset[1]}}}function ug(t,e,r,n,i,a,s,o,u){var l=Ot(e,s),c=yi(t,o,{vertical:[l[0]],horizontal:[l[1]]}),f=c.horizontal.offset,d=c.vertical.offset;if(st(d,va)||st(f,va)){var h=P(ye({datas:u,distX:-d,distY:-f}),2),p=h[0],v=h[1],g=Math.min(i||1/0,r+s[0]*p),m=Math.min(a||1/0,n+s[1]*v);return[g-r,m-n]}return[0,0]}function Lc(t,e,r,n,i,a,s,o){for(var u=se(t.state),l=t.props.keepRatio,c=0,f=0,d=0;d<2;++d){var h=e(c,f),p=og(t,h,i,l,s,o),v=p.width,g=p.height,m=v.isBound,y=g.isBound,x=v.offset,S=g.offset;if(d===1&&(m||(x=0),y||(S=0)),d===0&&s&&!m&&!y)return[0,0];if(l){var C=N(x)*(r?1/r:1),b=N(S)*(n?1/n:1),T=m&&y?C<b:y||!m&&C<b;T?x=r*S/n:S=n*x/r}c+=x,f+=S}if(!l&&i[0]&&i[1]){var D=Uv(t,u,i,a,o),w=D.maxWidth,E=D.maxHeight,A=P(ug(t,e(c,f).map(function(I){return I.map(function(k){return st(k,va)})}),r+c,n+f,w,E,i,s,o),2),x=A[0],S=A[1];c+=x,f+=S}return[c,f]}function Nr(t){return t<0&&(t=t%360+360),t%=360,t}function lg(t,e){e=Nr(e);var r=Math.floor(t/360),n=r*360+360-e,i=r*360+e;return N(t-n)<N(t-i)?n:i}function Li(t,e){t=Nr(t),e=Nr(e);var r=Nr(t-e);return Math.min(r,360-r)}function cg(t,e,r,n){var i,a=t.props,s=(i=a[Ec])!==null&&i!==void 0?i:5,o=a[wc];if(Rr(t,"rotatable")){var u=e.pos1,l=e.pos2,c=e.pos3,f=e.pos4,d=e.origin,h=r*Math.PI/180,p=[u,l,c,f].map(function(S){return rt(S,d)}),v=p.map(function(S){return cn(S,h)}),g=X(X([],P(wv(t,p,v,d,r)),!1),P(Lv(t,p,v,d,r)),!1);g.sort(function(S,C){return N(S-r)-N(C-r)});var m=g.length>0;if(m)return{isSnap:m,dist:m?g[0]:r}}if(o!=null&&o.length&&s){var y=o.slice().sort(function(S,C){return Li(S,n)-Li(C,n)}),x=y[0];if(Li(x,n)<=s)return{isSnap:!0,dist:r+lg(n,x)-n}}return{isSnap:!1,dist:r}}function fg(t,e,r,n,i,a,s){if(!Rr(t,"resizable"))return[0,0];var o=s.fixedDirection,u=s.nextAllMatrix,l=t.state,c=l.allMatrix,f=l.is3d;return Lc(t,function(d,h){return Gc(u||c,e+d,r+h,o,i,f)},e,r,n,i,a,s)}function dg(t,e,r,n,i){if(!Rr(t,"scalable"))return[0,0];var a=i.startOffsetWidth,s=i.startOffsetHeight,o=i.fixedPosition,u=i.fixedDirection,l=i.is3d,c=Lc(t,function(f,d){return Gc(fv(i,dt(e,[f/a,d/s])),a,s,u,o,l)},a,s,r,o,n,i);return[c[0]/a,c[1]/s]}function hg(t,e){e.absolutePoses=se(t.state)}function Wo(t){var e=[];return t.forEach(function(r){r.guidelineInfos.forEach(function(n){var i=n.guideline;Jt(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:r}))})}),e.map(function(r){var n=r.guideline,i=r.posInfo;return M(M({},n),{direction:i.direction})})}function Ho(t,e,r,n,i,a){var s=gs(gi(t,a),e,r),o=s.vertical,u=s.horizontal,l=lr();o.forEach(function(p){p.isBound&&(p.direction==="start"&&(l.left=!0),p.direction==="end"&&(l.right=!0),n.push({type:"bounds",pos:p.pos}))}),u.forEach(function(p){p.isBound&&(p.direction==="start"&&(l.top=!0),p.direction==="end"&&(l.bottom=!0),i.push({type:"bounds",pos:p.pos}))});var c=Nv(t),f=c.boundMap,d=c.vertical,h=c.horizontal;return d.forEach(function(p){be(n,function(v){var g=v.type,m=v.pos;return g==="bounds"&&m===p})>=0||n.push({type:"bounds",pos:p})}),h.forEach(function(p){be(i,function(v){var g=v.type,m=v.pos;return g==="bounds"&&m===p})>=0||i.push({type:"bounds",pos:p})}),{boundMap:l,innerBoundMap:f}}var pg=ws("",["resizable","scalable"]),vg={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",Ec,wc,Mc,Pc,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var r=t.state,n=r.top,i=r.left,a=r.pos1,s=r.pos2,o=r.pos3,u=r.pos4,l=r.snapRenderInfo,c=t.props.snapRenderThreshold,f=c===void 0?1:c;if(!l||!l.render||!Rr(t,""))return fr(t,"boundMap",lr(),function(Y){return JSON.stringify(Y)}),fr(t,"innerBoundMap",lr(),function(Y){return JSON.stringify(Y)}),[];r.guidelines=Ca(t);var d=Math.min(a[0],s[0],o[0],u[0]),h=Math.min(a[1],s[1],o[1],u[1]),p=l.externalPoses||[],v=se(t.state),g=[],m=[],y=[],x=[],S=[],C=ne(v),b=C.width,T=C.height,D=C.top,w=C.left,E=C.bottom,A=C.right,_={left:w,right:A,top:D,bottom:E,center:(w+A)/2,middle:(D+E)/2},R=p.length>0,I=R?ne(p):{};if(!l.request){if(l.direction&&S.push(Iv(t,v,l.direction,f,f)),l.snap){var k=ne(v);l.center&&(k.middle=(k.top+k.bottom)/2,k.center=(k.left+k.right)/2),S.push(Oo(t,k,f,f))}R&&(l.center&&(I.middle=(I.top+I.bottom)/2,I.center=(I.left+I.right)/2),S.push(Oo(t,I,f,f))),S.forEach(function(Y){var q=Y.vertical.posInfos,V=Y.horizontal.posInfos;g.push.apply(g,X([],P(q.filter(function(K){var tt=K.guidelineInfos;return tt.some(function(nt){var J=nt.guideline;return!J.hide})}).map(function(K){return{type:"snap",pos:K.pos}})),!1)),m.push.apply(m,X([],P(V.filter(function(K){var tt=K.guidelineInfos;return tt.some(function(nt){var J=nt.guideline;return!J.hide})}).map(function(K){return{type:"snap",pos:K.pos}})),!1)),y.push.apply(y,X([],P(Wo(q)),!1)),x.push.apply(x,X([],P(Wo(V)),!1))})}var O=Ho(t,[w,A],[D,E],g,m),B=O.boundMap,F=O.innerBoundMap;R&&Ho(t,[I.left,I.right],[I.top,I.bottom],g,m,l.externalBounds);var G=X(X([],P(y),!1),P(x),!1),j=G.filter(function(Y){return Y.element&&!Y.gapRects}),z=G.filter(function(Y){return Y.gapRects}).sort(function(Y,q){return Y.gap-q.gap});Z(t,"onSnap",{guidelines:G.filter(function(Y){var q=Y.element;return!q}),elements:j,gaps:z},!0);var U=fr(t,"boundMap",B,function(Y){return JSON.stringify(Y)},lr()),$=fr(t,"innerBoundMap",F,function(Y){return JSON.stringify(Y)},lr());return(B===U||F===$)&&Z(t,"onBound",{bounds:B,innerBounds:F},!0),X(X(X(X(X(X([],P(tg(t,j,[d,h],_,e)),!1),P(eg(t,z,[d,h],_,e)),!1),P(Lo(t,"horizontal",x,[i,n],_,e)),!1),P(Lo(t,"vertical",y,[i,n],_,e)),!1),P(Go(t,"horizontal",m,d,n,b,0,e)),!1),P(Go(t,"vertical",g,h,i,T,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},_n(t)},drag:function(t){var e=t.state;_n(t)||(e.guidelines=Ca(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(pg(t,e)||ba(t,e))return!0;if(!e.isRequest&&e.inputEvent)return At(e.inputEvent.target,et("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,_n(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,_n(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function gg(t,e){return[t[0]*e[0],t[1]*e[1]]}function et(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ih.apply(void 0,X([ds],P(t),!1))}function Nc(t){t()}function mg(t){return!t||t==="none"?[1,0,0,1,0,0]:fe(t)?t:Jr(t)}function jr(t,e,r){return Kn(e,Qe(r,e),t,Qe(r.map(function(n){return-n}),e))}function yg(t,e,r){if(e==="%"){var n=Cs(t.ownerSVGElement);return n[r?"width":"height"]/100}return 1}function xg(t){var e=Sg(Ts(t,":before"));return e.map(function(r,n){var i=ln(r),a=i.value,s=i.unit;return a*yg(t,s,n===0)})}function ri(t){return t?t.split(" "):["0","0"]}function Sg(t){return ri(t.transformOrigin)}function jc(t){var e=Zt(t),r=e("transform");if(r&&r!=="none")return r;if("transform"in t){var n=t.transform,i=n.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var s=[],o=function(l){var c=i[l].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(f){return c[f]}).join(", "),")"))},u=0;u<a;++u)o(u);return s.join(" ")}return""}function tn(t,e,r,n,i){var a,s,o=is(t)||Fe(t),u=!1,l,c;if(!t||r)l=t;else{var f=(a=t==null?void 0:t.assignedSlot)===null||a===void 0?void 0:a.parentElement,d=t.parentElement;f?(u=!0,c=d,l=f):l=d}for(var h=!1,p=t===e||l===e,v="relative",g=1,m=parseFloat(i==null?void 0:i("zoom"))||1,y=i==null?void 0:i("position");l&&l!==o;){e===l&&(p=!0);var x=Zt(l),S=l.tagName.toLowerCase(),C=jc(l),b=x("willChange"),T=parseFloat(x("zoom"))||1;if(v=x("position"),n&&T!==1){g=T;break}if(!r&&n&&m!==1&&y&&y!=="absolute"||S==="svg"||S==="foreignobject"||v!=="static"||C&&C!=="none"||b==="transform")break;var D=(s=t==null?void 0:t.assignedSlot)===null||s===void 0?void 0:s.parentNode,w=l.parentNode;D&&(u=!0,c=w);var E=w;if(E&&E.nodeType===11){l=E.host,h=!0,v=Zt(l)("position");break}l=E,v="relative"}return{offsetZoom:g,hasSlot:u,parentSlotElement:c,isCustomElement:h,isStatic:v==="static",isEnd:p||!l||l===o,offsetParent:l||o}}function bg(t,e){var r,n=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,s=Zt(t),o=Qa(i),u=!o,l,c;return!u&&(n!=="svg"||t.ownerSVGElement)?(l=uc?xg(t):ri(s("transformOrigin")).map(function(f){return parseFloat(f)}),c=l.slice(),u=!0,n==="svg"?(i=0,a=0):(r=P(Tg(t,l,t===e&&e.tagName.toLowerCase()==="g"),4),i=r[0],a=r[1],l[0]=r[2],l[1]=r[3])):(l=ri(s("transformOrigin")).map(function(f){return parseFloat(f)}),c=l.slice()),{tagName:n,isSVG:o,hasOffset:u,offset:[i||0,a||0],origin:l,targetOrigin:c}}function Wc(t,e){var r=Zt(t),n=Zt(Fe(t)),i=n("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(n("marginLeft"),10),s=parseInt(n("marginTop"),10);return r("position")==="absolute"&&((r("top")!=="auto"||r("bottom")!=="auto")&&(s=0),(r("left")!=="auto"||r("right")!=="auto")&&(a=0)),[a,s]}function Da(t){t.forEach(function(e){var r=e.matrix;r&&(e.matrix=de(r,3,4))})}function Cg(t){for(var e=t.parentElement,r=!1,n=Fe(t);e;){var i=Ts(e).transform;if(i&&i!=="none"){r=!0;break}if(e===n)break;e=e.parentElement}return{fixedContainer:e||n,hasTransform:r}}function xi(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(tc(t,!e).join(","),")")}function Cs(t){var e=t.clientWidth,r=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:r};var n=t.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||r,clientWidth:e,clientHeight:r}}function Dg(t,e){var r,n=Cs(t),i=n.width,a=n.height,s=n.clientWidth,o=n.clientHeight,u=s/i,l=o/a,c=t.preserveAspectRatio.baseVal,f=c.align,d=c.meetOrSlice,h=[0,0],p=[u,l],v=[0,0];if(f!==1){var g=(f-2)%3,m=Math.floor((f-2)/3);h[0]=i*g/2,h[1]=a*m/2;var y=d===2?Math.max(l,u):Math.min(u,l);p[0]=y,p[1]=y,v[0]=(s-i)/2*g,v[1]=(o-a)/2*m}var x=ss(p,e);return r=P(v,2),x[e*(e-1)]=r[0],x[e*(e-1)+1]=r[1],jr(x,e,h)}function Tg(t,e,r){var n=t.tagName.toLowerCase();if(!t.getBBox||!r&&n==="g")return[0,0,0,0];var i=Zt(t),a=i("transform-box")==="fill-box",s=t.getBBox(),o=Cs(t.ownerSVGElement),u=s.x,l=s.y;n==="foreignobject"&&!u&&!l&&(u=parseFloat(t.getAttribute("x"))||0,l=parseFloat(t.getAttribute("y"))||0);var c=u-o.x,f=l-o.y,d=a?e[0]:e[0]-c,h=a?e[1]:e[1]-f;return[c,f,d,h]}function bt(t,e,r){return Lt(t,Je(e,r),r)}function nr(t,e,r,n){return[[0,0],[e,0],[0,r],[e,r]].map(function(i){return bt(t,i,n)})}function ne(t){var e=t.map(function(l){return l[0]}),r=t.map(function(l){return l[1]}),n=Math.min.apply(Math,X([],P(e),!1)),i=Math.min.apply(Math,X([],P(r),!1)),a=Math.max.apply(Math,X([],P(e),!1)),s=Math.max.apply(Math,X([],P(r),!1)),o=a-n,u=s-i;return{left:n,top:i,right:a,bottom:s,width:o,height:u}}function Yo(t,e,r,n){var i=nr(t,e,r,n);return ne(i)}function Eg(t,e,r,n,i){var a,s=t.target,o=t.origin,u=e.matrix,l=Yc(s),c=l.offsetWidth,f=l.offsetHeight,d=r.getBoundingClientRect(),h=[0,0];r===Fe(r)&&(h=Wc(s,!0));for(var p=s.getBoundingClientRect(),v=p.left-d.left+r.scrollLeft-(r.clientLeft||0)+h[0],g=p.top-d.top+r.scrollTop-(r.clientTop||0)+h[1],m=p.width,y=p.height,x=Kn(n,i,u),S=Yo(x,c,f,n),C=S.left,b=S.top,T=S.width,D=S.height,w=bt(x,o,n),E=rt(w,[C,b]),A=[v+E[0]*m/T,g+E[1]*y/D],_=[0,0],R=0;++R<10;){var I=me(i,n);a=P(rt(bt(I,A,n),bt(I,w,n)),2),_[0]=a[0],_[1]=a[1];var k=Kn(n,i,Qe(_,n),u),O=Yo(k,c,f,n),B=O.left,F=O.top,G=B-v,j=F-g;if(N(G)<2&&N(j)<2)break;A[0]-=G,A[1]-=j}return _.map(function(z){return Math.round(z)})}function wg(t,e,r){var n=t.length===16,i=n?4:3,a=e.map(function(u){return bt(t,u,i)}),s=r.left,o=r.top;return a.map(function(u){return[u[0]+s,u[1]+o]})}function ae(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Hc(t,e){return ae([e[0]-t[0],e[1]-t[1]])}function Vr(t,e,r,n){r===void 0&&(r=1),n===void 0&&(n=Et(t,e));var i=Hc(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(i,"px")}}function ni(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=r.length,a=r.reduce(function(o,u){return o+u[0]},0)/i,s=r.reduce(function(o,u){return o+u[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function er(t,e){var r=t[e];return fe(r)?M(M({},t),r):t}function Yc(t){var e=t&&!Qa(t.offsetWidth),r=0,n=0,i=0,a=0,s=0,o=0,u=0,l=0,c=0,f=0,d=0,h=0,p=1/0,v=1/0,g=1/0,m=1/0,y=0,x=0,S=!1;if(t)if(!e&&t.ownerSVGElement){var C=t.getBBox();S=!0,r=C.width,n=C.height,s=r,o=n,u=r,l=n,i=r,a=n}else{var b=Zt(t),T=t.style,D=b("boxSizing")==="border-box",w=parseFloat(b("borderLeftWidth"))||0,E=parseFloat(b("borderRightWidth"))||0,A=parseFloat(b("borderTopWidth"))||0,_=parseFloat(b("borderBottomWidth"))||0,R=parseFloat(b("paddingLeft"))||0,I=parseFloat(b("paddingRight"))||0,k=parseFloat(b("paddingTop"))||0,O=parseFloat(b("paddingBottom"))||0,B=R+I,F=k+O,G=w+E,j=A+_,z=B+G,U=F+j,$=b("position"),Y=0,q=0;if("clientLeft"in t){var V=null;if($==="absolute"){var K=tn(t,Fe(t));V=K.offsetParent}else V=t.parentElement;if(V){var tt=Zt(V);Y=parseFloat(tt("width")),q=parseFloat(tt("height"))}}c=Math.max(B,vt(b("minWidth"),Y)||0),f=Math.max(F,vt(b("minHeight"),q)||0),p=vt(b("maxWidth"),Y),v=vt(b("maxHeight"),q),isNaN(p)&&(p=1/0),isNaN(v)&&(v=1/0),y=vt(T.width,0)||0,x=vt(T.height,0)||0,s=parseFloat(b("width"))||0,o=parseFloat(b("height"))||0,u=N(s-y)<1?aa(c,y||s,p):s,l=N(o-x)<1?aa(f,x||o,v):o,r=u,n=l,i=u,a=l,D?(g=p,m=v,d=c,h=f,u=r-z,l=n-U):(g=p+z,m=v+U,d=c+z,h=f+U,r=u+z,n=l+U),i=u+B,a=l+F}return{svg:S,offsetWidth:r,offsetHeight:n,clientWidth:i,clientHeight:a,contentWidth:u,contentHeight:l,inlineCSSWidth:y,inlineCSSHeight:x,cssWidth:s,cssHeight:o,minWidth:c,minHeight:f,maxWidth:p,maxHeight:v,minOffsetWidth:d,minOffsetHeight:h,maxOffsetWidth:g,maxOffsetHeight:m}}function Xc(t,e){return Et(e>0?t[0]:t[1],e>0?t[1]:t[0])}function An(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function qc(t,e){var r=t===Fe(t)||t===is(t),n={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return r&&(n.clientHeight=Math.max(e.height,n.clientHeight),n.scrollHeight=Math.max(e.height,n.scrollHeight)),n.overflow=Zt(t)("overflow")!=="visible",M(M({},e),n)}function Ni(t,e,r,n){var i=t.left,a=t.right,s=t.top,o=t.bottom,u=e.top,l=e.left,c={left:l+i,top:u+s,right:l+a,bottom:u+o,width:a-i,height:o-s};return r&&n?qc(r,c):c}function Wr(t,e){var r=0,n=0,i=0,a=0;if(t){var s=t.getBoundingClientRect();r=s.left,n=s.top,i=s.width,a=s.height}var o={left:r,top:n,width:i,height:a,right:r+i,bottom:n+a};return t&&e?qc(t,o):o}function Mg(t){var e=t.props,r=e.groupable,n=e.svgOrigin,i=t.getState(),a=i.offsetWidth,s=i.offsetHeight,o=i.svg,u=i.transformOrigin;return!r&&o&&n?Ps(n,a,s):u}function Uc(t,e,r,n){var i;if(t)i=t;else if(e)i=[0,0];else{var a=r.target;i=$c(a,n)}return i}function $c(t,e){if(t){var r=t.getAttribute("data-rotation")||"",n=t.getAttribute("data-direction");if(e.deg=r,!!n){var i=[0,0];return n.indexOf("w")>-1&&(i[0]=-1),n.indexOf("e")>-1&&(i[0]=1),n.indexOf("n")>-1&&(i[1]=-1),n.indexOf("s")>-1&&(i[1]=1),i}}}function Ds(t,e){return[dt(e,t[0]),dt(e,t[1]),dt(e,t[2]),dt(e,t[3])]}function se(t){var e=t.left,r=t.top,n=t.pos1,i=t.pos2,a=t.pos3,s=t.pos4;return Ds([n,i,a,s],[e,r])}function Ta(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(r){r.unset&&r.unset(t)})}function cr(t,e){var r=e?"controlGesto":"targetGesto",n=t[r];(n==null?void 0:n.isIdle())===!1&&Ta(t,e),n==null||n.unset(),t[r]=null}function Yt(t,e){if(e){var r=Pr(e);r.nextStyle=M(M({},r.nextStyle),t)}return{style:t,cssText:wr(t).map(function(n){return"".concat(Yh(n,"-"),": ").concat(t[n],";")}).join("")}}function Kc(t,e,r){var n=e.afterTransform||e.transform;return M(M({},Yt(M(M(M({},t.style),e.style),{transform:n}),r)),{afterTransform:n,transform:t.transform})}function ut(t,e,r,n){var i=e.datas;i.datas||(i.datas={});var a=M(M({},r),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?n||(i.lastEvent=a):i.isStartEvent=!0,a}function Qt(t,e,r){var n=e.datas,i="isDrag"in r?r.isDrag:e.isDrag;return n.datas||(n.datas={}),M(M({isDrag:i},r),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:e.isDouble,datas:n.datas,isFirstDrag:!!e.isFirstDrag})}function Si(t,e,r){t._emitter.on(e,r)}function Z(t,e,r,n,i){return t.triggerEvent(e,r,n,i)}function Ts(t,e){return Oe(t).getComputedStyle(t,e)}function On(t,e,r){var n={},i={};return t.filter(function(a){var s=a.name;if(n[s]||!e.some(function(o){return a[o]}))return!1;if(!r&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return n[s]=!0,!0})}function Ea(t,e){return t===e||t==null&&e==null}function Xo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length-1,n=0;n<r;++n){var i=t[n];if(!Qa(i))return i}return t[r]}function Zc(t,e){var r=[],n=[];return t.forEach(function(i,a){var s=e(i,a,t),o=n.indexOf(s),u=r[o]||[];o===-1&&(n.push(s),r.push(u)),u.push(i)}),r}function Pg(t,e){var r=[],n={};return t.forEach(function(i,a){var s=e(i,a,t),o=n[s];o||(o=[],n[s]=o,r.push(o)),o.push(i)}),r}function Jc(t){return t.reduce(function(e,r){return e.concat(r)},[])}function br(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(r,n){return N(n)-N(r)}),t[0]}function Cr(t,e,r){return Lt(me(t,r),Je(e,r),r)}function Rg(t,e){var r,n=t.is3d,i=t.rootMatrix,a=n?4:3;return r=P(Cr(i,[e.distX,e.distY],a),2),e.distX=r[0],e.distY=r[1],e}function te(t,e,r,n){if(!r[0]&&!r[1])return e;var i=bt(t,[jo(r[0]||1),0],n),a=bt(t,[0,jo(r[1]||1)],n),s=bt(t,[r[0]/ae(i),r[1]/ae(a)],n);return dt(e,s)}function le(t,e,r){return r?"".concat(t/e*100,"%"):"".concat(t,"px")}function ii(t){return N(t)<=qt?0:t}function Es(t){return function(e){if(!e.isDragging(t))return"";var r=yv(e,t),n=r.deg;return n?et("view-control-rotation".concat(n)):""}}function ws(t,e){return e===void 0&&(e=[t]),function(r,n){if(n.isRequest)return e.some(function(a){return n.requestAble===a})?n.parentDirection:!1;var i=n.inputEvent.target;return At(i,et("direction"))&&(!t||At(i,et(t)))}}function _g(t,e,r){var n,i=yr(t,{"x%":function(C){return C/100*e.offsetWidth},"y%":function(C){return C/100*e.offsetHeight}}),a=t.slice(0,r<0?void 0:r),s=t.slice(0,r<0?void 0:r+1),o=t[r]||"",u=r<0?[]:t.slice(r),l=r<0?[]:t.slice(r+1),c=i.slice(0,r<0?void 0:r),f=i.slice(0,r<0?void 0:r+1),d=(n=i[r])!==null&&n!==void 0?n:yr([""])[0],h=r<0?[]:i.slice(r),p=r<0?[]:i.slice(r+1),v=d?[d]:[],g=sr(c),m=sr(f),y=sr(h),x=sr(p),S=gt(g,y,4);return{transforms:t,beforeFunctionMatrix:g,beforeFunctionMatrix2:m,targetFunctionMatrix:sr(v),afterFunctionMatrix:y,afterFunctionMatrix2:x,allFunctionMatrix:S,beforeFunctions:c,beforeFunctions2:f,targetFunction:v[0],afterFunctions:h,afterFunctions2:p,beforeFunctionTexts:a,beforeFunctionTexts2:s,targetFunctionText:o,afterFunctionTexts:u,afterFunctionTexts2:l}}function Ag(t){return!t||!fe(t)||as(t)?!1:kt(t)||"length"in t}function he(t,e){return t?as(t)?t:Te(t)?e?document.querySelector(t):t:ts(t)?t():Zl(t)?t:"current"in t?t.current:t:null}function Ms(t,e){if(!t)return[];var r=Ag(t)?[].slice.call(t):[t];return r.reduce(function(n,i){return Te(i)&&e?X(X([],P(n),!1),P([].slice.call(document.querySelectorAll(i))),!1):(kt(i)?n.push(Ms(i,e)):n.push(he(i,e)),n)},[])}function Og(t,e,r){var n=Et(t,e)/Math.PI*180;return n=r>=0?n:180-n,n=n>=0?n:360+n,n}function qo(t,e){var r=t.rootMatrix,n=t.is3d,i=n?4:3,a=me(r,i);return n||(a=de(a,3,4)),a[12]=0,a[13]=0,a[14]=0,op(a,e)}function Qc(t,e,r,n,i){var a=P(t,2),s=a[0],o=a[1],u=0,l=0;if(i&&s&&o){var c=Et([0,0],e),f=Et([0,0],n),d=ae(e),h=Math.cos(c-f)*d;if(!n[0])l=h,u=l*r;else if(!n[1])u=h,l=u/r;else{var p=n[0]*s,v=n[1]*o,g=Math.atan2(p+e[0],v+e[1]),m=Math.atan2(p,v);g<0&&(g+=Math.PI*2),m<0&&(m+=Math.PI*2);var y=0;N(g-m)<Math.PI/2||N(g-m)>Math.PI/2*3||(m+=Math.PI),y=g-m,y>Math.PI*2?y-=Math.PI*2:y>Math.PI?y=2*Math.PI-y:y<-Math.PI&&(y=-2*Math.PI-y);var x=ae([p+e[0],v+e[1]])*Math.cos(y);u=x*Math.sin(m)-p,l=x*Math.cos(m)-v,n[0]<0&&(u*=-1),n[1]<0&&(l*=-1)}}else u=n[0]*e[0],l=n[1]*e[1];return[u,l]}function tf(t,e,r,n){var i,a=r.ratio,s=r.startOffsetWidth,o=r.startOffsetHeight,u=0,l=0,c=n.distX,f=n.distY,d=n.pinchScale,h=n.parentDistance,p=n.parentDist,v=n.parentScale,g=r.fixedDirection,m=[0,1].map(function(T){return N(t[T]-g[T])}),y=[0,1].map(function(T){var D=m[T];return D!==0&&(D=2/D),D});if(p)u=p[0],l=p[1],e&&(u?l||(l=u/a):u=l*a);else if(Kr(d))u=(d-1)*s,l=(d-1)*o;else if(v)u=(v[0]-1)*s,l=(v[1]-1)*o;else if(h){var x=s*m[0],S=o*m[1],C=ae([x,S]);u=h/C*x*y[0],l=h/C*S*y[1]}else{var b=ye({datas:r,distX:c,distY:f});b=y.map(function(T,D){return b[D]*T}),i=P(Qc([s,o],b,a,t,e),2),u=i[0],l=i[1]}return{distWidth:u,distHeight:l}}function wa(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var r=P(t.split(" "),2),n=r[0],i=r[1],a=wa(n||""),s=wa(i||""),o=M(M({},a),s),u={x:"50%",y:"50%"};return o.x&&(u.x=o.x),o.y&&(u.y=o.y),o.value&&(o.x&&!o.y&&(u.y=o.value),!o.x&&o.y&&(u.x=o.value)),u}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function Ps(t,e,r){var n=wa(t,!0),i=n.x,a=n.y;return[vt(i,e)||0,vt(a,r)||0]}function Ig(t,e,r){var n=t.map(function(a){return rt(a,e)}),i=n.map(function(a){return cn(a,r)});return{prev:n,next:i,result:i.map(function(a){return dt(a,e)})}}function ef(t,e){return t.length===e.length&&t.every(function(r,n){var i=e[n],a=kt(r),s=kt(i);return a&&s?ef(r,i):!a&&!s?r===i:!1})}function fr(t,e,r,n,i){var a=t._store,s=a[e];if(!(e in a))if(i!=null)a[e]=i,s=i;else return a[e]=r,r;return s===r||n(s)===n(r)?s:(a[e]=r,r)}function Ht(t){return t>=0?1:-1}function N(t){return Math.abs(t)}function ji(t,e){return $h(t).map(function(r){return e(r)})}function rf(t){return Kr(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var kg=hn("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var r=e.datas,n=e.targets,i=e.angle,a=e.originalDatas,s=t.props,o=s.pinchable,u=s.ables;if(!o)return!1;var l="onPinch".concat(n?"Group":"","Start"),c="drag".concat(n?"Group":"","ControlStart"),f=(o===!0?t.controlAbles:u.filter(function(v){return o.indexOf(v.name)>-1})).filter(function(v){return v.canPinch&&v[c]}),d=ut(t,e,{});n&&(d.targets=n);var h=Z(t,l,d);r.isPinch=h!==!1,r.ables=f;var p=r.isPinch;return p?(f.forEach(function(v){if(a[v.name]=a[v.name]||{},!!v[c]){var g=M(M({},e),{datas:a[v.name],parentRotate:i,isPinch:!0});v[c](t,g)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p):!1},pinch:function(t,e){var r=e.datas,n=e.scale,i=e.distance,a=e.originalDatas,s=e.inputEvent,o=e.targets,u=e.angle;if(r.isPinch){var l=i*(1-1/n),c=ut(t,e,{});o&&(c.targets=o);var f="onPinch".concat(o?"Group":"");Z(t,f,c);var d=r.ables,h="drag".concat(o?"Group":"","Control");return d.forEach(function(p){p[h]&&p[h](t,M(M({},e),{datas:a[p.name],inputEvent:s,resolveMatrix:!0,pinchScale:n,parentDistance:l,parentRotate:u,isPinch:!0}))}),c}},pinchEnd:function(t,e){var r=e.datas,n=e.isPinch,i=e.inputEvent,a=e.targets,s=e.originalDatas;if(r.isPinch){var o="onPinch".concat(a?"Group":"","End"),u=Qt(t,e,{isDrag:n});a&&(u.targets=a),Z(t,o,u);var l=r.ables,c="drag".concat(a?"Group":"","ControlEnd");return l.forEach(function(f){f[c]&&f[c](t,M(M({},e),{isDrag:n,datas:s[f.name],inputEvent:i,isPinch:!0}))}),n}},pinchGroupStart:function(t,e){return this.pinchStart(t,M(M({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,M(M({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,M(M({},e),{targets:t.props.targets}))}}),Uo=ws("scalable"),Bg={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:Cc("scalable"),dragControlCondition:Uo,viewClassName:Es("scalable"),dragControlStart:function(t,e){var r=e.datas,n=e.isPinch,i=e.inputEvent,a=e.parentDirection,s=Uc(a,n,i,r),o=t.state,u=o.width,l=o.height,c=o.targetTransform,f=o.target,d=o.pos1,h=o.pos2,p=o.pos4;if(!s||!f)return!1;n||rr(t,e),r.datas={},r.transform=c,r.prevDist=[1,1],r.direction=s,r.startOffsetWidth=u,r.startOffsetHeight=l,r.startValue=[1,1];var v=!s[0]&&!s[1]||s[0]||!s[1];vi(t,e,"scale"),r.isWidth=v;function g(b){r.ratio=b&&isFinite(b)?b:0}r.startPositions=se(t.state);function m(b){var T=kc(r.startPositions,b);r.fixedDirection=T.fixedDirection,r.fixedPosition=T.fixedPosition,r.fixedOffset=T.fixedOffset}r.setFixedDirection=m,g(xe(d,h)/xe(h,p)),m([-s[0],-s[1]]);var y=function(b){r.minScaleSize=b},x=function(b){r.maxScaleSize=b};y([-1/0,-1/0]),x([1/0,1/0]);var S=ut(t,e,M(M({direction:s,set:function(b){r.startValue=b},setRatio:g,setFixedDirection:m,setMinScaleSize:y,setMaxScaleSize:x},pi(t,e)),{dragStart:Wt.dragStart(t,new xr().dragStart([0,0],e))})),C=Z(t,"onScaleStart",S);return r.startFixedDirection=r.fixedDirection,C!==!1&&(r.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),r.isScale?S:!1},dragControl:function(t,e){di(t,e,"scale");var r=e.datas,n=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,s=e.dragClient,o=e.isRequest,u=e.useSnap,l=e.resolveMatrix,c=r.prevDist,f=r.direction,d=r.startOffsetWidth,h=r.startOffsetHeight,p=r.isScale,v=r.startValue,g=r.isWidth,m=r.ratio;if(!p)return!1;var y=t.props,x=y.throttleScale,S=y.parentMoveable,C=f;!f[0]&&!f[1]&&(C=[1,1]);var b=m&&(n??y.keepRatio)||!1,T=t.state,D=[v[0],v[1]];function w(){var H=tf(C,b,r,e),Q=H.distWidth,ft=H.distHeight,it=d?(d+Q)/d:1,ot=h?(h+ft)/h:1;v[0]||(D[0]=Q/d),v[1]||(D[1]=ft/h);var ct=(C[0]||b?it:1)*D[0],pt=(C[1]||b?ot:1)*D[1];return ct===0&&(ct=Ht(c[0])*Mn),pt===0&&(pt=Ht(c[1])*Mn),[ct,pt]}var E=w();if(!a&&t.props.groupable){var A=T.snapRenderInfo||{},_=A.direction;kt(_)&&(_[0]||_[1])&&(T.snapRenderInfo={direction:f,request:e.isRequest})}Z(t,"onBeforeScale",ut(t,e,{scale:E,setFixedDirection:function(H){return r.setFixedDirection(H),E=w(),E},startFixedDirection:r.startFixedDirection,setScale:function(H){E=H}},!0));var R=[E[0]/D[0],E[1]/D[1]],I=s,k=[0,0],O=Ht(R[0]*R[1]),B=!s&&!i&&a;if(B||l?I=vs(t,r.targetAllTransform,[0,0],[0,0],r):s||(I=r.fixedPosition),a||(k=dg(t,R,f,!u&&o,r)),b){C[0]&&C[1]&&k[0]&&k[1]&&(Math.abs(k[0]*d)>Math.abs(k[1]*h)?k[1]=0:k[0]=0);var F=!k[0]&&!k[1];if(F&&(g?R[0]=st(R[0]*D[0],x)/D[0]:R[1]=st(R[1]*D[1],x)/D[1]),C[0]&&!C[1]||k[0]&&!k[1]||F&&g){R[0]+=k[0];var G=d*R[0]*D[0]/m;R[1]=Ht(O*R[0])*N(G/h/D[1])}else if(!C[0]&&C[1]||!k[0]&&k[1]||F&&!g){R[1]+=k[1];var j=h*R[1]*D[1]*m;R[0]=Ht(O*R[1])*N(j/d/D[0])}}else R[0]+=k[0],R[1]+=k[1],k[0]||(R[0]=st(R[0]*D[0],x)/D[0]),k[1]||(R[1]=st(R[1]*D[1],x)/D[1]);R[0]===0&&(R[0]=Ht(c[0])*Mn),R[1]===0&&(R[1]=Ht(c[1])*Mn),E=gg(R,[D[0],D[1]]);var z=[d,h],U=[d*E[0],h*E[1]];U=Ul(U,r.minScaleSize,r.maxScaleSize,b?m:!1),E=ji(2,function(H){return z[H]?U[H]/z[H]:U[H]}),R=ji(2,function(H){return E[H]/D[H]});var $=ji(2,function(H){return c[H]?R[H]/c[H]:R[H]}),Y="scale(".concat(R.join(", "),")"),q="scale(".concat(E.join(", "),")"),V=hi(r,q,Y),K=!v[0]||!v[1],tt=dv(t,K?q:Y,r.fixedDirection,I,r.fixedOffset,r,K),nt=B?tt:rt(tt,r.prevInverseDist||[0,0]);if(r.prevDist=R,r.prevInverseDist=tt,E[0]===c[0]&&E[1]===c[1]&&nt.every(function(H){return!H})&&!S&&!B)return!1;var J=ut(t,e,M({offsetWidth:d,offsetHeight:h,direction:f,scale:E,dist:R,delta:$,isPinch:!!a},gc(t,V,nt,a,e)));return Z(t,"onScale",J),J},dragControlEnd:function(t,e){var r=e.datas;if(!r.isScale)return!1;r.isScale=!1;var n=Qt(t,e,{});return Z(t,"onScaleEnd",n),n},dragGroupControlCondition:Uo,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var i=ce(t,"resizable",e);r.moveableScale=t.scale;var a=Se(t,this,"dragControlStart",e,function(l,c){return Qn(t,l,r,c)}),s=function(l){n.setFixedDirection(l),a.forEach(function(c,f){c.setFixedDirection(l),Qn(t,c.moveable,r,i[f])})};r.setFixedDirection=s;var o=M(M({},n),{targets:t.props.targets,events:a,setFixedDirection:s}),u=Z(t,"onScaleGroupStart",o);return r.isScale=u!==!1,r.isScale?o:!1},dragGroupControl:function(t,e){var r=e.datas;if(r.isScale){Si(t,"onBeforeScale",function(c){Z(t,"onBeforeScaleGroup",ut(t,e,M(M({},c),{targets:t.props.targets}),!0))});var n=this.dragControl(t,e);if(n){var i=n.dist,a=r.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var s=t.props.keepRatio,o=r.fixedPosition,u=Se(t,this,"dragControl",e,function(c,f){var d=P(Lt(fn(t.rotation/180*Math.PI,3),[f.datas.originalX*i[0],f.datas.originalY*i[1],1],3),2),h=d[0],p=d[1];return M(M({},f),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:dt(o,[h,p])})}),l=M({targets:t.props.targets,events:u},n);return Z(t,"onScaleGroup",l),l}}},dragGroupControlEnd:function(t,e){var r=e.isDrag,n=e.datas;if(n.isScale){this.dragControlEnd(t,e);var i=Se(t,this,"dragControlEnd",e),a=Qt(t,e,{targets:t.props.targets,events:i});return Z(t,"onScaleGroupEnd",a),r}},request:function(){var t={},e=0,r=0,n=!1;return{isControl:!0,requestStart:function(i){return n=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:n}},request:function(i){return e+=i.deltaWidth,r+=i.deltaHeight,{datas:t,parentDist:[e,r],parentKeepRatio:i.keepRatio,useSnap:n}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:n}}}}};function Me(t,e){return t.map(function(r,n){return $n(r,e[n],1,2)})}function $o(t,e,r){var n=Et(t,e),i=Et(t,r),a=i-n;return a>=0?a:a+2*Math.PI}function Vg(t,e){var r=$o(t[0],t[1],t[2]),n=$o(e[0],e[1],e[2]),i=Math.PI;return!(r>=i&&n<=i||r<=i&&n>=i)}var zg={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:Es("warpable"),render:function(t,e){var r=t.props,n=r.resizable,i=r.scalable,a=r.warpable,s=r.zoom;if(n||i||!a)return[];var o=t.state,u=o.pos1,l=o.pos2,c=o.pos3,f=o.pos4,d=Me(u,l),h=Me(l,u),p=Me(u,c),v=Me(c,u),g=Me(c,f),m=Me(f,c),y=Me(l,f),x=Me(f,l);return X([e.createElement("div",{className:et("line"),key:"middeLine1",style:Vr(d,g,s)}),e.createElement("div",{className:et("line"),key:"middeLine2",style:Vr(h,m,s)}),e.createElement("div",{className:et("line"),key:"middeLine3",style:Vr(p,y,s)}),e.createElement("div",{className:et("line"),key:"middeLine4",style:Vr(v,x,s)})],P(Dc(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var r=e.inputEvent.target;return At(r,et("direction"))&&At(r,et("warpable"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,i=t.props.target,a=n.target,s=$c(a,r);if(!s||!i)return!1;var o=t.state,u=o.transformOrigin,l=o.is3d,c=o.targetTransform,f=o.targetMatrix,d=o.width,h=o.height,p=o.left,v=o.top;r.datas={},r.targetTransform=c,r.warpTargetMatrix=l?f:de(f,3,4),r.targetInverseMatrix=Jl(me(r.warpTargetMatrix,4),3,4),r.direction=s,r.left=p,r.top=v,r.poses=[[0,0],[d,0],[0,h],[d,h]].map(function(y){return rt(y,u)}),r.nextPoses=r.poses.map(function(y){var x=P(y,2),S=x[0],C=x[1];return Lt(r.warpTargetMatrix,[S,C,0,1],4)}),r.startValue=xt(4),r.prevMatrix=xt(4),r.absolutePoses=se(o),r.posIndexes=vc(s),rr(t,e),vi(t,e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var g=ut(t,e,M({set:function(y){r.startValue=y}},pi(t,e))),m=Z(t,"onWarpStart",g);return m!==!1&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var r=e.datas,n=e.isRequest,i=e.distX,a=e.distY,s=r.targetInverseMatrix,o=r.prevMatrix,u=r.isWarp,l=r.startValue,c=r.poses,f=r.posIndexes,d=r.absolutePoses;if(!u)return!1;if(di(t,e,"matrix3d"),Rr(t,"warpable")){var h=f.map(function(w){return d[w]});h.length>1&&h.push([(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]);var p=yi(t,n,{horizontal:h.map(function(w){return w[1]+a}),vertical:h.map(function(w){return w[0]+i})}),v=p.horizontal,g=p.vertical;a-=v.offset,i-=g.offset}var m=ye({datas:r,distX:i,distY:a},!0),y=r.nextPoses.slice();if(f.forEach(function(w){y[w]=dt(y[w],m)}),!ev.every(function(w){return Vg(w.map(function(E){return c[E]}),w.map(function(E){return y[E]}))}))return!1;var x=os(c[0],c[2],c[1],c[3],y[0],y[2],y[1],y[3]);if(!x.length)return!1;var S=gt(s,x,4),C=hc(r,S,!0),b=gt(me(o,4),C,4);r.prevMatrix=C;var T=gt(l,C,4),D=hi(r,"matrix3d(".concat(T.join(", "),")"),"matrix3d(".concat(C.join(", "),")"));return ps(e,D),Z(t,"onWarp",ut(t,e,M({delta:b,matrix:T,dist:C,multiply:gt,transform:D},Yt({transform:D},e)))),!0},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return r.isWarp?(r.isWarp=!1,Z(t,"onWarpEnd",Qt(t,e,{})),n):!1}},Fg=et("area-pieces"),In=et("area-piece"),nf=et("avoid"),Gg=et("view-dragging");function Wi(t){var e=t.areaElement;if(e){var r=t.state,n=r.width,i=r.height;Kl(e,nf),e.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(i,"px")}}function Ko(t){return t.createElement("div",{key:"area_pieces",className:Fg},t.createElement("div",{className:In}),t.createElement("div",{className:In}),t.createElement("div",{className:In}),t.createElement("div",{className:In}))}var af={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var r=t.props,n=r.target,i=r.dragArea,a=r.groupable,s=r.passDragArea,o=t.getState(),u=o.width,l=o.height,c=o.renderPoses,f=s?et("area","pass"):et("area");if(a)return[e.createElement("div",{key:"area",ref:$e(t,"areaElement"),className:f}),Ko(e)];if(!n||!i)return[];var d=os([0,0],[u,0],[0,l],[u,l],c[0],c[1],c[2],c[3]),h=d.length?xi(d,!0):"none";return[e.createElement("div",{key:"area",ref:$e(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(l,"px"),transformOrigin:"0 0",transform:h}}),Ko(e)]},dragStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;r.isDragArea=!1;var s=t.areaElement,o=t.state,u=o.moveableClientRect,l=o.renderPoses,c=o.rootMatrix,f=o.is3d,d=u.left,h=u.top,p=ne(l),v=p.left,g=p.top,m=p.width,y=p.height,x=f?4:3,S=P(Cr(c,[n-d,i-h],x),2),C=S[0],b=S[1];C-=v,b-=g;var T=[{left:v,top:g,width:m,height:b-10},{left:v,top:g,width:C-10,height:y},{left:v,top:g+b+10,width:m,height:y-b-10},{left:v+C+10,top:g,width:m-C-10,height:y}],D=[].slice.call(s.nextElementSibling.children);T.forEach(function(w,E){D[E].style.cssText="left: ".concat(w.left,"px;top: ").concat(w.top,"px; width: ").concat(w.width,"px; height: ").concat(w.height,"px;")}),$l(s,nf),o.disableNativeEvent=!0},drag:function(t,e){var r=e.datas,n=e.inputEvent;if(this.enableNativeEvent(t),!n)return!1;r.isDragArea||(r.isDragArea=!0,Wi(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var r=e.inputEvent,n=e.datas;if(!r)return!1;n.isDragArea||Wi(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){Wi(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&ql(function(){e.disableNativeEvent=!1})}},Lg=hn("origin",{props:["origin","svgOrigin"],render:function(t,e){var r=t.props,n=r.zoom,i=r.svgOrigin,a=r.groupable,s=t.getState(),o=s.beforeOrigin,u=s.rotation,l=s.svg,c=s.allMatrix,f=s.is3d,d=s.left,h=s.top,p=s.offsetWidth,v=s.offsetHeight,g;if(!a&&l&&i){var m=P(Ps(i,p,v),2),y=m[0],x=m[1],S=f?4:3,C=bt(c,[y,x],S);g=ni(u,n,rt(C,[d,h]))}else g=ni(u,n,o);return[e.createElement("div",{className:et("control","origin"),style:g,key:"beforeOrigin"})]}});function Ng(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var jg={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var r=t.props,n=r.scrollContainer,i=n===void 0?t.getContainer():n,a=r.scrollOptions,s=new Sp,o=he(i,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var u=e.isControl?"controlGesto":"targetGesto",l=e.targets;s.on("scroll",function(c){var f=c.container,d=c.direction,h=ut(t,e,{scrollContainer:f,direction:d}),p=l?"onScrollGroup":"onScroll";l&&(h.targets=l),Z(t,p,h)}).on("move",function(c){var f=c.offsetX,d=c.offsetY,h=c.inputEvent;t[u].scrollBy(f,d,h.inputEvent,!1)}).on("scrollDrag",function(c){var f=c.next;f(t[u].getCurrentEvent())}),s.dragStart(e,M({container:o},a))},checkScroll:function(t,e){var r=e.datas.dragScroll;if(r){var n=t.props,i=n.scrollContainer,a=i===void 0?t.getContainer():i,s=n.scrollThreshold,o=s===void 0?0:s,u=n.scrollThrottleTime,l=u===void 0?0:u,c=n.getScrollPosition,f=c===void 0?Ng:c,d=n.scrollOptions;return r.drag(e,M({container:a,threshold:o,throttleTime:l,getScrollPosition:function(h){return f({scrollContainer:h.container,direction:h.direction})}},d)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,M(M({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,M(M({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,M(M({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,M(M({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,M(M({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,M(M({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,M(M({},e),{targets:t.props.targets}))},unset:function(t){var e,r=t.state;(e=r.dragScroll)===null||e===void 0||e.dragEnd(),r.dragScroll=null}},sf={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},Wg=hn("padding",{props:["padding"],render:function(t,e){var r=t.props;if(r.dragArea)return[];var n=rf(r.padding||{}),i=n.left,a=n.top,s=n.right,o=n.bottom,u=t.getState(),l=u.renderPoses,c=u.pos1,f=u.pos2,d=u.pos3,h=u.pos4,p=[c,f,d,h],v=[];return i>0&&v.push([0,2]),a>0&&v.push([0,1]),s>0&&v.push([1,3]),o>0&&v.push([2,3]),v.map(function(g,m){var y=P(g,2),x=y[0],S=y[1],C=p[x],b=p[S],T=l[x],D=l[S],w=os([0,0],[100,0],[0,100],[100,100],C,b,T,D);if(w.length)return e.createElement("div",{key:"padding".concat(m),className:et("padding"),style:{transform:xi(w,!0)}})})}}),Zo=["nw","ne","se","sw"];function kn(t,e){var r=t[0]+t[1],n=r>e?e/r:1;return t[0]*=n,t[1]=e-t[1]*n,t}var Hg=[1,2,5,6],Yg=[0,3,4,7],He=[1,-1,-1,1],Ye=[1,1,-1,-1];function Rs(t,e,r,n,i,a,s,o){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=r),o===void 0&&(o=n);var u=[],l=!1,c=t.filter(function(d){return!d.virtual}),f=c.map(function(d){var h=d.horizontal,p=d.vertical,v=d.pos;if(p&&!l&&(l=!0,u.push("/")),l){var g=Math.max(0,p===1?v[1]-a:o-v[1]);return u.push(le(g,n,e)),g}else{var g=Math.max(0,h===1?v[0]-i:s-v[0]);return u.push(le(g,r,e)),g}});return{radiusPoses:c,styles:u,raws:f}}function of(t){for(var e=[0,0],r=[0,0],n=t.length,i=0;i<n;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,r[0]=i+1),a.vertical&&(r[1]===0&&(r[0]=i),r[1]=i-r[0]+1))}return{horizontalRange:e,verticalRange:r}}function uf(t,e,r,n,i,a,s){var o,u,l,c;a===void 0&&(a=[0,0]),s===void 0&&(s=!1);var f=t.indexOf("/"),d=(f>-1?t.slice(0,f):t).length,h=t.slice(0,d),p=t.slice(d+1),v=h.length,g=p.length,m=g>0,y=P(h,4),x=y[0],S=x===void 0?"0px":x,C=y[1],b=C===void 0?S:C,T=y[2],D=T===void 0?S:T,w=y[3],E=w===void 0?b:w,A=P(p,4),_=A[0],R=_===void 0?S:_,I=A[1],k=I===void 0?m?R:b:I,O=A[2],B=O===void 0?m?R:D:O,F=A[3],G=F===void 0?m?k:E:F,j=[S,b,D,E].map(function(V){return vt(V,e)}),z=[R,k,B,G].map(function(V){return vt(V,r)}),U=j.slice(),$=z.slice();o=P(kn([U[0],U[1]],e),2),U[0]=o[0],U[1]=o[1],u=P(kn([U[3],U[2]],e),2),U[3]=u[0],U[2]=u[1],l=P(kn([$[0],$[3]],r),2),$[0]=l[0],$[3]=l[1],c=P(kn([$[1],$[2]],r),2),$[1]=c[0],$[2]=c[1];var Y=s?U:U.slice(0,Math.max(a[0],v)),q=s?$:$.slice(0,Math.max(a[1],g));return X(X([],P(Y.map(function(V,K){var tt=Zo[K];return{virtual:K>=v,horizontal:He[K],vertical:0,pos:[n+V,i+(Ye[K]===-1?r:0)],sub:!0,raw:j[K],direction:tt}})),!1),P(q.map(function(V,K){var tt=Zo[K];return{virtual:K>=g,horizontal:0,vertical:Ye[K],pos:[n+(He[K]===-1?e:0),i+V],sub:!0,raw:z[K],direction:tt}})),!1)}function Xg(t,e,r,n,i){i===void 0&&(i=e.length);var a=of(t.slice(n)),s=a.horizontalRange,o=a.verticalRange,u=r-n,l=0;if(u===0)l=i;else if(u>0&&u<s[1])l=s[1]-u;else if(u>=o[0])l=o[0]+o[1]-u;else return;t.splice(r,l),e.splice(r,l)}function qg(t,e,r,n,i,a,s,o,u,l,c){l===void 0&&(l=0),c===void 0&&(c=0);var f=of(t.slice(r)),d=f.horizontalRange,h=f.verticalRange;if(n>-1)for(var p=He[n]===1?a-l:o-a,v=d[1];v<=n;++v){var g=Ye[v]===1?c:u,m=0;if(n===v?m=a:v===0?m=l+p:He[v]===-1&&(m=o-(e[r][0]-l)),t.splice(r+v,0,{horizontal:He[v],vertical:0,pos:[m,g]}),e.splice(r+v,0,[m,g]),v===0)break}else if(i>-1){var y=Ye[i]===1?s-c:u-s;if(d[1]===0&&h[1]===0){var x=[l+y,c];t.push({horizontal:He[0],vertical:0,pos:x}),e.push(x)}for(var S=h[0],v=h[1];v<=i;++v){var m=He[v]===1?l:o,g=0;if(i===v?g=s:v===0?g=c+y:Ye[v]===1?g=e[r+S][1]:Ye[v]===-1&&(g=u-(e[r+S][1]-c)),t.push({horizontal:0,vertical:Ye[v],pos:[m,g]}),e.push([m,g]),v===0)break}}}function Ug(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var r=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),n=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:r,verticals:n}}var $g=[[0,-1,"n"],[1,0,"e"]],Kg=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function _s(t,e,r){var n=t.props.clipRelative,i=t.state,a=i.width,s=i.height,o=e,u=o.type,l=o.poses,c=u==="rect",f=u==="circle";if(u==="polygon")return r.map(function(b){return"".concat(le(b[0],a,n)," ").concat(le(b[1],s,n))});if(c||u==="inset"){var d=r[1][1],h=r[3][0],p=r[7][0],v=r[5][1];if(c)return[d,h,v,p].map(function(b){return"".concat(b,"px")});var g=[d,a-h,s-v,p].map(function(b,T){return le(b,T%2?a:s,n)});if(r.length>8){var m=P(rt(r[4],r[0]),2),y=m[0],x=m[1];g.push.apply(g,X(["round"],P(Rs(l.slice(8).map(function(b,T){return M(M({},b),{pos:r[T]})}),n,y,x,p,d,h,v).styles),!1))}return g}else if(f||u==="ellipse"){var S=r[0],C=le(N(r[1][1]-S[1]),f?Math.sqrt((a*a+s*s)/2):s,n),g=f?[C]:[le(N(r[2][0]-S[0]),a,n),C];return g.push("at",le(S[0],a,n),le(S[1],s,n)),g}}function ai(t,e,r,n){var i=[n,(n+e)/2,e],a=[t,(t+r)/2,r];return Kg.map(function(s){var o=P(s,3),u=o[0],l=o[1],c=o[2],f=i[u+1],d=a[l+1];return{vertical:N(l),horizontal:N(u),direction:c,pos:[f,d]}})}function lf(t){var e=[1/0,-1/0],r=[1/0,-1/0];return t.forEach(function(n){var i=n.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),r[0]=Math.min(r[0],i[1]),r[1]=Math.max(r[1],i[1])}),[N(e[1]-e[0]),N(r[1]-r[0])]}function Jo(t,e,r,n,i){var a,s,o,u,l,c,f,d,h;if(t){var p=i;if(!p){var v=Zt(t),g=v("clipPath");p=g!=="none"?g:v("clip")}if(!((!p||p==="none"||p==="auto")&&(p=n,!p))){var m=Xl(p),y=m.prefix,x=y===void 0?p:y,S=m.value,C=S===void 0?"":S,b=x==="circle",T=" ";if(x==="polygon"){var D=Xe(C||"0% 0%, 100% 0%, 100% 100%, 0% 100%");T=",";var w=D.map(function(It){var Nt=P(It.split(" "),2),zt=Nt[0],wt=Nt[1];return{vertical:1,horizontal:1,pos:[vt(zt,e),vt(wt,r)]}}),E=tr(w.map(function(It){return It.pos}));return{type:x,clipText:p,poses:w,splitter:T,left:E.minX,right:E.maxX,top:E.minY,bottom:E.maxY}}else if(b||x==="ellipse"){var A="",_="",R=0,I=0,D=Ie(C);if(b){var k="";a=P(D,4),s=a[0],k=s===void 0?"50%":s,o=a[2],A=o===void 0?"50%":o,u=a[3],_=u===void 0?"50%":u,R=vt(k,Math.sqrt((e*e+r*r)/2)),I=R}else{var O="",B="";l=P(D,5),c=l[0],O=c===void 0?"50%":c,f=l[1],B=f===void 0?"50%":f,d=l[3],A=d===void 0?"50%":d,h=l[4],_=h===void 0?"50%":h,R=vt(O,e),I=vt(B,r)}var F=[vt(A,e),vt(_,r)],w=X([{vertical:1,horizontal:1,pos:F,direction:"nesw"}],P($g.slice(0,b?1:2).map(function(zt){return{vertical:N(zt[1]),horizontal:zt[0],direction:zt[2],sub:!0,pos:[F[0]+zt[0]*R,F[1]+zt[1]*I]}})),!1);return{type:x,clipText:p,radiusX:R,radiusY:I,left:F[0]-R,top:F[1]-I,right:F[0]+R,bottom:F[1]+I,poses:w,splitter:T}}else if(x==="inset"){var D=Ie(C||"0 0 0 0"),G=D.indexOf("round"),j=(G>-1?D.slice(0,G):D).length,z=D.slice(j+1),U=P(D.slice(0,j),4),$=U[0],Y=U[1],q=Y===void 0?$:Y,V=U[2],K=V===void 0?$:V,tt=U[3],nt=tt===void 0?q:tt,J=P([$,K].map(function(zt){return vt(zt,r)}),2),H=J[0],Q=J[1],ft=P([nt,q].map(function(zt){return vt(zt,e)}),2),it=ft[0],ot=ft[1],ct=e-ot,pt=r-Q,mt=uf(z,ct-it,pt-H,it,H),w=X(X([],P(ai(H,ct,pt,it)),!1),P(mt),!1);return{type:"inset",clipText:p,poses:w,top:H,left:it,right:ct,bottom:pt,radius:z,splitter:T}}else if(x==="rect"){var D=Xe(C||"0px, ".concat(e,"px, ").concat(r,"px, 0px"));T=",";var lt=P(D.map(function(Ee){var we=ln(Ee).value;return we}),4),ht=lt[0],ot=lt[1],Q=lt[2],it=lt[3],w=ai(ht,ot,Q,it);return{type:"rect",clipText:p,poses:w,top:ht,right:ot,bottom:Q,left:it,values:D,splitter:T}}}}}function Zg(t,e,r,n,i){var a=t[e],s=a.direction,o=a.sub,u=t.map(function(){return[0,0]}),l=s?s.split(""):[];if(n&&e<8){var c=l.filter(function(R){return R==="w"||R==="e"}),f=l.filter(function(R){return R==="n"||R==="s"}),d=c[0],h=f[0];u[e]=r;var p=P(lf(t),2),v=p[0],g=p[1],m=v&&g?v/g:0;if(m&&i){var y=(e+4)%8,x=t[y].pos,S=[0,0];s.indexOf("w")>-1?S[0]=-1:s.indexOf("e")>-1&&(S[0]=1),s.indexOf("n")>-1?S[1]=-1:s.indexOf("s")>-1&&(S[1]=1);var C=Qc([v,g],r,m,S,!0),b=v+C[0],T=g+C[1],D=x[1],w=x[1],E=x[0],A=x[0];S[0]===-1?E=A-b:S[0]===1?A=E+b:(E=E-b/2,A=A+b/2),S[1]===-1?D=w-T:(S[1]===1||(D=w-T/2),w=D+T);var _=ai(D,A,w,E);t.forEach(function(R,I){u[I][0]=_[I].pos[0]-R.pos[0],u[I][1]=_[I].pos[1]-R.pos[1]})}else t.forEach(function(R,I){var k=R.direction;k&&(k.indexOf(d)>-1&&(u[I][0]=r[0]),k.indexOf(h)>-1&&(u[I][1]=r[1]))}),d&&(u[1][0]=r[0]/2,u[5][0]=r[0]/2),h&&(u[3][1]=r[1]/2,u[7][1]=r[1]/2)}else s&&!o?l.forEach(function(R){var I=R==="n"||R==="s";t.forEach(function(k,O){var B=k.direction,F=k.horizontal,G=k.vertical;!B||B.indexOf(R)===-1||(u[O]=[I||!F?0:r[0],!I||!G?0:r[1]])})}):u[e]=r;return u}function Jg(t,e){var r=P(dc(t,e),2),n=r[0],i=r[1],a=e.datas,s=a.clipPath,o=a.clipIndex,u=s,l=u.type,c=u.poses,f=u.splitter,d=c.map(function(y){return y.pos});if(l==="polygon")d.splice(o,0,[n,i]);else if(l==="inset"){var h=Hg.indexOf(o),p=Yg.indexOf(o),v=c.length;if(qg(c,d,8,h,p,n,i,d[4][0],d[4][1],d[0][0],d[0][1]),v===c.length)return}else return;var g=_s(t,s,d),m="".concat(l,"(").concat(g.join(f),")");Z(t,"onClip",ut(t,e,M({clipEventType:"added",clipType:l,poses:d,clipStyles:g,clipStyle:m,distX:0,distY:0},Yt({clipPath:m},e))))}function Qg(t,e){var r=e.datas,n=r.clipPath,i=r.clipIndex,a=n,s=a.type,o=a.poses,u=a.splitter,l=o.map(function(h){return h.pos}),c=l.length;if(s==="polygon")o.splice(i,1),l.splice(i,1);else if(s==="inset"){if(i<8||(Xg(o,l,i,8,c),c===o.length))return}else return;var f=_s(t,n,l),d="".concat(s,"(").concat(f.join(u),")");Z(t,"onClip",ut(t,e,M({clipEventType:"removed",clipType:s,poses:l,clipStyles:f,clipStyle:d,distX:0,distY:0},Yt({clipPath:d},e))))}var t0={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var r=t.props,n=r.customClipPath,i=r.defaultClipPath,a=r.clipArea,s=r.zoom,o=r.groupable,u=t.getState(),l=u.target,c=u.width,f=u.height,d=u.allMatrix,h=u.is3d,p=u.left,v=u.top,g=u.pos1,m=u.pos2,y=u.pos3,x=u.pos4,S=u.clipPathState,C=u.snapBoundInfos,b=u.rotation;if(!l||o)return[];var T=Jo(l,c,f,i||"inset",S||n);if(!T)return[];var D=h?4:3,w=T.type,E=T.poses,A=E.map(function(ot){var ct=bt(d,ot.pos,D);return[ct[0]-p,ct[1]-v]}),_=[],R=[],I=w==="rect",k=w==="inset",O=w==="polygon";if(I||k||O){var B=k?A.slice(0,8):A;R=B.map(function(ot,ct){var pt=ct===0?B[B.length-1]:B[ct-1],mt=Et(pt,ot),lt=Hc(pt,ot);return e.createElement("div",{key:"clipLine".concat(ct),className:et("line","clip-line","snap-control"),"data-clip-index":ct,style:{width:"".concat(lt,"px"),transform:"translate(".concat(pt[0],"px, ").concat(pt[1],"px) rotate(").concat(mt,"rad) scaleY(").concat(s,")")}})})}if(_=A.map(function(ot,ct){return e.createElement("div",{key:"clipControl".concat(ct),className:et("control","clip-control","snap-control"),"data-clip-index":ct,style:{transform:"translate(".concat(ot[0],"px, ").concat(ot[1],"px) rotate(").concat(b,"rad) scale(").concat(s,")")}})}),k&&_.push.apply(_,X([],P(A.slice(8).map(function(ot,ct){return e.createElement("div",{key:"clipRadiusControl".concat(ct),className:et("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+ct,style:{transform:"translate(".concat(ot[0],"px, ").concat(ot[1],"px) rotate(").concat(b,"rad) scale(").concat(s,")")}})})),!1)),w==="circle"||w==="ellipse"){var F=T.left,G=T.top,j=T.radiusX,z=T.radiusY,U=P(rt(bt(d,[F,G],D),bt(d,[0,0],D)),2),$=U[0],Y=U[1],q="none";if(!a){for(var V=Math.max(10,j/5,z/5),K=[],tt=0;tt<=V;++tt){var nt=Math.PI*2/V*tt;K.push([j+(j-s)*Math.cos(nt),z+(z-s)*Math.sin(nt)])}K.push([j,-2]),K.push([-2,-2]),K.push([-2,z*2+2]),K.push([j*2+2,z*2+2]),K.push([j*2+2,-2]),K.push([j,-2]),q="polygon(".concat(K.map(function(ot){return"".concat(ot[0],"px ").concat(ot[1],"px")}).join(", "),")")}_.push(e.createElement("div",{key:"clipEllipse",className:et("clip-ellipse","snap-control"),style:{width:"".concat(j*2,"px"),height:"".concat(z*2,"px"),clipPath:q,transform:"translate(".concat(-p+$,"px, ").concat(-v+Y,"px) ").concat(xi(d))}}))}if(a){var J=ne(X([g,m,y,x],P(A),!1)),H=J.width,Q=J.height,ft=J.left,it=J.top;if(O||I||k){var K=k?A.slice(0,8):A;_.push(e.createElement("div",{key:"clipArea",className:et("clip-area","snap-control"),style:{width:"".concat(H,"px"),height:"".concat(Q,"px"),transform:"translate(".concat(ft,"px, ").concat(it,"px)"),clipPath:"polygon(".concat(K.map(function(ct){return"".concat(ct[0]-ft,"px ").concat(ct[1]-it,"px")}).join(", "),")")}}))}}return C&&["vertical","horizontal"].forEach(function(ot){var ct=C[ot],pt=ot==="horizontal";ct.isSnap&&R.push.apply(R,X([],P(ct.snap.posInfos.map(function(mt,lt){var ht=mt.pos,It=rt(bt(d,pt?[0,ht]:[ht,0],D),[p,v]),Nt=rt(bt(d,pt?[c,ht]:[ht,f],D),[p,v]);return Qr(e,"",It,Nt,s,"clip".concat(ot,"snap").concat(lt),"guideline")})),!1)),ct.isBound&&R.push.apply(R,X([],P(ct.bounds.map(function(mt,lt){var ht=mt.pos,It=rt(bt(d,pt?[0,ht]:[ht,0],D),[p,v]),Nt=rt(bt(d,pt?[c,ht]:[ht,f],D),[p,v]);return Qr(e,"",It,Nt,s,"clip".concat(ot,"bounds").concat(lt),"guideline","bounds","bold")})),!1))}),X(X([],P(_),!1),P(R),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var r=t.props,n=r.dragWithClip,i=n===void 0?!0:n;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,M(M({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var r=t.state,n=t.props,i=n.defaultClipPath,a=n.customClipPath,s=r.target,o=r.width,u=r.height,l=e.inputEvent?e.inputEvent.target:null,c=l&&l.getAttribute("class")||"",f=e.datas,d=Jo(s,o,u,i||"inset",a);if(!d)return!1;var h=d.clipText,p=d.type,v=d.poses,g=Z(t,"onClipStart",ut(t,e,{clipType:p,clipStyle:h,poses:v.map(function(m){return m.pos})}));return g===!1?(f.isClipStart=!1,!1):(f.isControl=c&&c.indexOf("clip-control")>-1,f.isLine=c.indexOf("clip-line")>-1,f.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,f.clipIndex=l?parseInt(l.getAttribute("data-clip-index"),10):-1,f.clipPath=d,f.isClipStart=!0,r.clipPathState=h,rr(t,e),!0)},dragControl:function(t,e){var r,n,i,a=e.datas,s=e.originalDatas,o=e.isDragTarget;if(!a.isClipStart)return!1;var u=a,l=u.isControl,c=u.isLine,f=u.isArea,d=u.clipIndex,h=u.clipPath;if(!h)return!1;var p=er(t.props,"clippable"),v=p.keepRatio,g=0,m=0,y=s.draggable,x=ye(e);o&&y?(r=P(y.prevBeforeDist,2),g=r[0],m=r[1]):(n=P(x,2),g=n[0],m=n[1]);var S=[g,m],C=t.state,b=C.width,T=C.height,D=!f&&!l&&!c,w=h.type,E=h.poses,A=h.splitter,_=E.map(function(yt){return yt.pos});D&&(g=-g,m=-m);var R=!l||E[d].direction==="nesw",I=w==="inset"||w==="rect",k=E.map(function(){return[0,0]});if(l&&!R){var O=E[d],B=O.horizontal,F=O.vertical,G=[g*N(B),m*N(F)];k=Zg(E,d,G,I,v)}else R&&(k=_.map(function(){return[g,m]}));var j=_.map(function(yt,jt){return dt(yt,k[jt])}),z=X([],P(j),!1);C.snapBoundInfos=null;var U=h.type==="circle",$=h.type==="ellipse";if(U||$){var Y=ne(j),q=N(Y.bottom-Y.top),V=N($?Y.right-Y.left:q),K=j[0][1]+q,tt=j[0][0]-V,nt=j[0][0]+V;U&&(z.push([nt,Y.bottom]),k.push([1,0])),z.push([Y.left,K]),k.push([0,1]),z.push([tt,Y.bottom]),k.push([1,0])}var J=Fc((p.clipHorizontalGuidelines||[]).map(function(yt){return vt("".concat(yt),T)}),(p.clipVerticalGuidelines||[]).map(function(yt){return vt("".concat(yt),b)}),b,T),H=[],Q=[];if(U||$)H=[z[4][0],z[2][0]],Q=[z[1][1],z[3][1]];else if(I){var ft=[z[0],z[2],z[4],z[6]],it=[k[0],k[2],k[4],k[6]];H=ft.filter(function(yt,jt){return it[jt][0]}).map(function(yt){return yt[0]}),Q=ft.filter(function(yt,jt){return it[jt][1]}).map(function(yt){return yt[1]})}else H=z.filter(function(yt,jt){return k[jt][0]}).map(function(yt){return yt[0]}),Q=z.filter(function(yt,jt){return k[jt][1]}).map(function(yt){return yt[1]});var ot=[0,0],ct=Vo(J,p.clipTargetBounds&&{left:0,top:0,right:b,bottom:T},H,Q,5,5),pt=ct.horizontal,mt=ct.vertical,lt=pt.offset,ht=mt.offset;if(pt.isBound&&(ot[1]+=lt),mt.isBound&&(ot[0]+=ht),($||U)&&k[0][0]===0&&k[0][1]===0){var Y=ne(j),It=Y.bottom-Y.top,Nt=$?Y.right-Y.left:It,zt=mt.isBound?N(ht):mt.snapIndex===0?-ht:ht,wt=pt.isBound?N(lt):pt.snapIndex===0?-lt:lt;Nt-=zt,It-=wt,U&&(It=_c(mt,pt)>0?It:Nt,Nt=It);var _t=z[0];z[1][1]=_t[1]-It,z[2][0]=_t[0]+Nt,z[3][1]=_t[1]+It,z[4][0]=_t[0]-Nt}else if(I&&v&&l){var Ee=P(lf(E),2),we=Ee[0],vo=Ee[1],go=we&&vo?we/vo:0,Kd=E[d],Sn=Kd.direction||"",Ei=z[1][1],K=z[5][1],tt=z[7][0],nt=z[3][0];N(lt)<=N(ht)?lt=Ht(lt)*N(ht)/go:ht=Ht(ht)*N(lt)*go,Sn.indexOf("w")>-1?tt-=ht:Sn.indexOf("e")>-1?nt-=ht:(tt+=ht/2,nt-=ht/2),Sn.indexOf("n")>-1?Ei-=lt:Sn.indexOf("s")>-1?K-=lt:(Ei+=lt/2,K-=lt/2);var Zd=ai(Ei,nt,K,tt);z.forEach(function(xo,eh){var Pi;Pi=P(Zd[eh].pos,2),xo[0]=Pi[0],xo[1]=Pi[1]})}else z.forEach(function(yt,jt){var yo=k[jt];yo[0]&&(yt[0]-=ht),yo[1]&&(yt[1]-=lt)});var mo=_s(t,h,j),wi="".concat(w,"(").concat(mo.join(A),")");if(C.clipPathState=wi,U||$)H=[z[4][0],z[2][0]],Q=[z[1][1],z[3][1]];else if(I){var ft=[z[0],z[2],z[4],z[6]];H=ft.map(function(jt){return jt[0]}),Q=ft.map(function(jt){return jt[1]})}else H=z.map(function(yt){return yt[0]}),Q=z.map(function(yt){return yt[1]});if(C.snapBoundInfos=Vo(J,p.clipTargetBounds&&{left:0,top:0,right:b,bottom:T},H,Q,1,1),y){var Jd=C.is3d,Qd=C.allMatrix,th=Jd?4:3,Mi=ot;o&&(Mi=[S[0]+ot[0]-x[0],S[1]+ot[1]-x[1]]),y.deltaOffset=gt(Qd,[Mi[0],Mi[1],0,0],th)}return Z(t,"onClip",ut(t,e,M({clipEventType:"changed",clipType:w,poses:j,clipStyle:wi,clipStyles:mo,distX:g,distY:m},Yt((i={},i[w==="rect"?"clip":"clipPath"]=wi,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var r=e.isDrag,n=e.datas,i=e.isDouble,a=n.isLine,s=n.isClipStart,o=n.isControl;return s?(Z(t,"onClipEnd",Qt(t,e,{})),i&&(o?Qg(t,e):a&&Jg(t,e)),i||r):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},e0={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":At(e.inputEvent.target,et("origin"))},dragControlStart:function(t,e){var r=e.datas;rr(t,e);var n=ut(t,e,{dragStart:Wt.dragStart(t,new xr().dragStart([0,0],e))}),i=Z(t,"onDragOriginStart",n);return r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,i===!1?(r.isDragOrigin=!1,!1):n},dragControl:function(t,e){var r=e.datas,n=e.isPinch,i=e.isRequest;if(!r.isDragOrigin)return!1;var a=P(ye(e),2),s=a[0],o=a[1],u=t.state,l=u.width,c=u.height,f=u.offsetMatrix,d=u.targetMatrix,h=u.is3d,p=t.props.originRelative,v=p===void 0?!0:p,g=h?4:3,m=[s,o];if(i){var y=e.distOrigin;(y[0]||y[1])&&(m=y)}var x=dt(r.startOrigin,m),S=dt(r.startTargetOrigin,m),C=rt(m,r.prevOrigin),b=vn(f,d,x,g),T=t.getRect(),D=ne(nr(b,l,c,g)),w=[T.left-D.left,T.top-D.top];r.prevOrigin=m;var E=[le(S[0],l,v),le(S[1],c,v)].join(" "),A=Wt.drag(t,pn(e,t.state,w,!!n)),_=ut(t,e,M(M({width:l,height:c,origin:x,dist:m,delta:C,transformOrigin:E,drag:A},Yt({transformOrigin:E,transform:A.transform},e)),{afterTransform:A.transform}));return Z(t,"onDragOrigin",_),_},dragControlEnd:function(t,e){var r=e.datas;return r.isDragOrigin?(Z(t,"onDragOriginEnd",Qt(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var r=this.dragControlStart(t,e);return!!r},dragGroupControl:function(t,e){var r=this.dragControl(t,e);return r?(t.transformOrigin=r.transformOrigin,!0):!1},request:function(t){var e={},r=t.getRect(),n=0,i=0,a=r.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-a[0],s[1]=o.origin[1]-a[1]):("x"in o?n=o.x-r.left:"deltaX"in o&&(n+=o.deltaX),"y"in o?i=o.y-r.top:"deltaY"in o&&(i+=o.deltaY)),{datas:e,distX:n,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function r0(t,e,r,n){var i=t.filter(function(u){var l=u.virtual,c=u.horizontal;return c&&!l}).length,a=t.filter(function(u){var l=u.virtual,c=u.vertical;return c&&!l}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(a===0?s=4:a<4&&(s=7)),e===1&&(a<=1?s=5:a<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];n0(t,s),s<4?o.pos[0]=r:o.pos[1]=n}}function n0(t,e){e<4?t.slice(0,e+1).forEach(function(r){r.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(r){r.virtual=!1}))}function i0(t,e){e<4?t.slice(e,4).forEach(function(r){r.virtual=!0}):t.slice(e).forEach(function(r){r.virtual=!0})}function Qo(t,e,r,n,i){n===void 0&&(n=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=Ie(t),uf(a,e,r,0,0,n,i)}function tu(t,e,r,n,i){var a=t.state,s=a.width,o=a.height,u=Rs(i,t.props.roundRelative,s,o),l=u.raws,c=u.styles,f=u.radiusPoses,d=Ug(f,l),h=d.horizontals,p=d.verticals,v=c.join(" ");a.borderRadiusState=v;var g=ut(t,e,M({horizontals:h,verticals:p,borderRadius:v,width:s,height:o,delta:n,dist:r},Yt({borderRadius:v},e)));return Z(t,"onRound",g),g}function eu(t){var e,r,n=t.getState().style,i=n.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],s=t.getTargets()[0];s&&((a==null?void 0:a.props.target)===s?(i=(r=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&r!==void 0?r:"",n.borderRadius=i):(i=Ts(s).borderRadius,n.borderRadius=i))}return i}var a0={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?et("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var r=t.getState(),n=r.target,i=r.width,a=r.height,s=r.allMatrix,o=r.is3d,u=r.left,l=r.top,c=r.borderRadiusState,f=t.props,d=f.minRoundControls,h=d===void 0?[0,0]:d,p=f.maxRoundControls,v=p===void 0?[4,4]:p,g=f.zoom,m=f.roundPadding,y=m===void 0?0:m,x=f.isDisplayShadowRoundControls,S=f.groupable;if(!n)return null;var C=c||eu(t),b=o?4:3,T=Qo(C,i,a,h,!0);if(!T)return null;var D=0,w=0,E=S?[0,0]:[u,l];return T.map(function(A,_){var R=A.horizontal,I=A.vertical,k=A.direction||"",O=X([],P(A.pos),!1);w+=Math.abs(R),D+=Math.abs(I),R&&k.indexOf("n")>-1&&(O[1]-=y),I&&k.indexOf("w")>-1&&(O[0]-=y),R&&k.indexOf("s")>-1&&(O[1]+=y),I&&k.indexOf("e")>-1&&(O[0]+=y);var B=rt(bt(s,O,b),E),F=x&&x!=="horizontal",G=A.vertical?D<=v[1]&&(F||!A.virtual):w<=v[0]&&(x||!A.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(_),className:et("control","border-radius",A.vertical?"vertical":"",A.virtual?"virtual":""),"data-radius-index":_,style:{display:G?"block":"none",transform:"translate(".concat(B[0],"px, ").concat(B[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var r=e.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var r=e.inputEvent,n=e.datas,i=r.target,a=i.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,o=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=s?parseInt(i.getAttribute("data-radius-index"),10):-1,l=-1;if(o){var c=i.getAttribute("data-line-key")||"";c&&(l=parseInt(c.replace(/render-line-/g,""),10),isNaN(l)&&(l=-1))}if(!s&&!o)return!1;var f=ut(t,e,{}),d=Z(t,"onRoundStart",f);if(d===!1)return!1;n.lineIndex=l,n.controlIndex=u,n.isControl=s,n.isLine=o,rr(t,e);var h=t.props,p=h.roundRelative,v=h.minRoundControls,g=v===void 0?[0,0]:v,m=t.state,y=m.width,x=m.height;n.isRound=!0,n.prevDist=[0,0];var S=eu(t),C=Qo(S||"",y,x,g,!0)||[];return n.controlPoses=C,m.borderRadiusState=Rs(C,p,y,x).styles.join(" "),f},dragControl:function(t,e){var r=e.datas,n=r.controlPoses;if(!r.isRound||!r.isControl||!n.length)return!1;var i=r.controlIndex,a=P(ye(e),2),s=a[0],o=a[1],u=[s,o],l=rt(u,r.prevDist),c=t.props.maxRoundControls,f=c===void 0?[4,4]:c,d=t.state,h=d.width,p=d.height,v=n[i],g=v.vertical,m=v.horizontal,y=n.map(function(S){var C=S.horizontal,b=S.vertical,T=[C*m*u[0],b*g*u[1]];if(C){if(f[0]===1)return T;if(f[0]<4&&C!==m)return T}else{if(f[1]===0)return T[1]=b*m*u[0]/h*p,T;if(g){if(f[1]===1)return T;if(f[1]<4&&b!==g)return T}}return[0,0]});y[i]=u;var x=n.map(function(S,C){return M(M({},S),{pos:dt(S.pos,y[C])})});return i<4?x.slice(0,i+1).forEach(function(S){S.virtual=!1}):x.slice(4,i+1).forEach(function(S){S.virtual=!1}),r.prevDist=[s,o],tu(t,e,u,l,x)},dragControlEnd:function(t,e){var r=t.state;r.borderRadiusState="";var n=e.datas,i=e.isDouble;if(!n.isRound)return!1;var a=n.isControl,s=n.controlIndex,o=n.isLine,u=n.lineIndex,l=n.controlPoses,c=l.filter(function(m){var y=m.virtual;return y}).length,f=t.props.roundClickable,d=f===void 0?!0:f;if(i&&d){if(a&&(d===!0||d==="control"))i0(l,s);else if(o&&(d===!0||d==="line")){var h=P(dc(t,e),2),p=h[0],v=h[1];r0(l,u,p,v)}c!==l.filter(function(m){var y=m.virtual;return y}).length&&tu(t,e,[0,0],[0,0],l)}var g=Qt(t,e,{});return Z(t,"onRoundEnd",g),r.borderRadiusState="",g},dragGroupControlStart:function(t,e){var r=this.dragControlStart(t,e);if(!r)return!1;var n=t.moveables,i=t.props.targets,a=ce(t,"roundable",e),s=M({targets:t.props.targets,events:a.map(function(o,u){return M(M({},o),{target:i[u],moveable:n[u],currentTarget:n[u]})})},r);return Z(t,"onRoundGroupStart",s),r},dragGroupControl:function(t,e){var r=this.dragControl(t,e);if(!r)return!1;var n=t.moveables,i=t.props.targets,a=ce(t,"roundable",e),s=M({targets:t.props.targets,events:a.map(function(o,u){return M(M(M({},o),{target:i[u],moveable:n[u],currentTarget:n[u]}),Yt({borderRadius:r.borderRadius},o))})},r);return Z(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var r=t.moveables,n=t.props.targets,i=ce(t,"roundable",e);Si(t,"onRound",function(o){var u=M({targets:t.props.targets,events:i.map(function(l,c){return M(M(M({},l),{target:n[c],moveable:r[c],currentTarget:r[c]}),Yt({borderRadius:o.borderRadius},l))})},o);Z(t,"onRoundGroup",u)});var a=this.dragControlEnd(t,e);if(!a)return!1;var s=M({targets:t.props.targets,events:i.map(function(o,u){var l;return M(M({},o),{target:n[u],moveable:r[u],currentTarget:r[u],lastEvent:(l=o.datas)===null||l===void 0?void 0:l.lastEvent})})},a);return Z(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function s0(t,e){var r=e?4:3,n=xt(r),i="matrix".concat(e?"3d":"","(").concat(n.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var cf={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var r=t.state,n=r.is3d,i=r.targetMatrix,a=r.inlineTransform,s=n?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(tc(i,!0),")"),o=!a||a==="none"?s:a;e.datas.startTransforms=s0(o,n)?[]:Ie(o)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ut(t,e,{setTransform:function(r){e.datas.startTransforms=kt(r)?r:Ie(r)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ut(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Z(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Z(t,"onBeforeRender",ut(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Z(t,"onBeforeRenderEnd",ut(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var r=this;this.dragStart(t,e);var n=ce(t,"beforeRenderable",e),i=t.moveables,a=n.map(function(s,o){var u=i[o];return r.setTransform(u,s),r.resetStyle(s),r.fillDragStartParams(u,s)});Z(t,"onBeforeRenderGroupStart",ut(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var r=this;this.drag(t,e);var n=ce(t,"beforeRenderable",e),i=t.moveables,a=n.map(function(s,o){var u=i[o];return r.resetStyle(s),r.fillDragParams(u,s)});Z(t,"onBeforeRenderGroup",ut(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Z(t,"onBeforeRenderGroupEnd",ut(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},ff={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Z(t,"onRenderStart",ut(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Z(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Z(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Z(t,"onRenderGroupStart",ut(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var r=this,n=ce(t,"beforeRenderable",e),i=t.moveables,a=n.map(function(s,o){var u=i[o];return r.fillDragParams(u,s)});Z(t,"onRenderGroup",ut(t,e,M(M({isPinch:!!e.isPinch,targets:t.props.targets,transform:Pn(e),transformObject:{}},Yt(Rn(e))),{events:a})))},dragGroupEnd:function(t,e){var r=this,n=ce(t,"beforeRenderable",e),i=t.moveables,a=n.map(function(s,o){var u=i[o];return r.fillDragEndParams(u,s)});Z(t,"onRenderGroupEnd",ut(t,e,M({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:Pn(e)},Yt(Rn(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var r={};return yr(Jn(e)||[]).forEach(function(n){r[n.name]=n.functionValue}),ut(t,e,M({isPinch:!!e.isPinch,transformObject:r,transform:Pn(e)},Yt(Rn(e))))},fillDragEndParams:function(t,e){var r={};return yr(Jn(e)||[]).forEach(function(n){r[n.name]=n.functionValue}),ut(t,e,M({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:r,transform:Pn(e)},Yt(Rn(e))))}};function Hr(t,e,r,n,i,a,s){a.clientDistX=a.distX,a.clientDistY=a.distY;var o=i==="Start",u=i==="End",l=i==="After",c=t.state.target,f=a.isRequest,d=n.indexOf("Control")>-1;if(!c||o&&d&&!f&&t.areaElement===a.inputEvent.target)return!1;var h=X([],P(e),!1);if(f){var p=a.requestAble;h.some(function(_){return _.name===p})||h.push.apply(h,X([],P(t.props.ables.filter(function(_){return _.name===p})),!1))}if(!h.length||h.every(function(_){return _.dragRelation}))return!1;var v=a.inputEvent,g;u&&v&&(g=document.elementFromPoint(a.clientX,a.clientY)||v.target);var m=!1,y=function(){var _;m=!0,(_=a.stop)===null||_===void 0||_.call(a)},x=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());x&&t.updateRect(i,!0,!1);var S=a.datas,C=d?"controlGesto":"targetGesto",b=t[C],T=function(_,R,I){if(!(R in _)||b!==t[C])return!1;var k=_.name,O=S[k]||(S[k]={});if(o&&(O.isEventStart=!I||!_[I]||_[I](t,a)),!O.isEventStart)return!1;var B=_[R](t,M(M({},a),{stop:y,datas:O,originalDatas:S,inputTarget:g}));return t._emitter.off(),o&&B===!1&&(O.isEventStart=!1),B};x&&h.forEach(function(_){_.unset&&_.unset(t)}),T(cf,"drag".concat(n).concat(i));var D=0,w=0;r.forEach(function(_){if(m)return!1;var R="".concat(_).concat(n).concat(i),I="".concat(_).concat(n,"Condition");i===""&&!f&&Rg(t.state,a);var k=h.filter(function(F){return F[R]});k=k.filter(function(F,G){return F.name&&k.indexOf(F)===G});var O=k.filter(function(F){return T(F,R,I)}),B=O.length;m&&++D,B&&++w,!m&&o&&k.length&&!B&&(D+=k.filter(function(F){var G=F.name,j=S[G];return j.isEventStart?F.dragRelation!=="strong":!1}).length?1:0)}),(!l||w)&&T(ff,"drag".concat(n).concat(i));var E=b!==t[C]||D===r.length;if((u||m||E)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(_){_.state.gestos={}}),h.forEach(function(_){_.unset&&_.unset(t)})),o&&!E&&!f&&w&&t.props.preventDefault&&(a==null||a.preventDefault()),t.isUnmounted||E)return!1;if(!o&&w&&!s||u){var A=t.props.flushSync||Nc;A(function(){t.updateRect(u?i:"",!0,!1),t.forceUpdate()})}return!o&&!u&&!l&&w&&!s&&Hr(t,e,r,n,i+"After",a),!0}function As(t,e){return function(r,n){var i;n===void 0&&(n=r.inputEvent.target);var a=n,s=t.areaElement,o=t._dragTarget;return!o||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===o||o.contains(a)||a===s||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||At(a,"moveable-area")||At(a,"moveable-padding")||At(a,"moveable-edgeDraggable")}}function df(t,e,r){var n=t.controlBox,i=[],a=t.props,s=a.dragArea,o=t.state.target,u=a.dragTarget;i.push(n),(!s||u)&&i.push(e),!s&&u&&o&&e!==o&&a.dragTargetSelf&&i.push(o);var l=As(t);return pf(t,i,"targetAbles",r,{dragStart:l,pinchStart:l})}function hf(t,e){var r=t.controlBox,n=[];n.push(r);var i=As(t,!0),a=function(s,o){if(o===void 0&&(o=s.inputEvent.target),o===r)return!0;var u=i(s,o);return!u};return pf(t,n,"controlAbles",e,{dragStart:a,pinchStart:a})}function pf(t,e,r,n,i){i===void 0&&(i={});var a=r==="targetAbles",s=t.props,o=s.pinchOutside,u=s.pinchThreshold,l=s.preventClickEventOnDrag,c=s.preventClickDefault,f=s.checkInput,d=s.dragFocusedInput,h=s.preventDefault,p=h===void 0?!0:h,v=s.preventRightClick,g=v===void 0?!0:v,m=s.preventWheelClick,y=m===void 0?!0:m,x=s.dragContainer,S=he(x,!0),C={preventDefault:p,preventRightClick:g,preventWheelClick:y,container:S||Oe(t.getControlBoxElement()),pinchThreshold:u,pinchOutside:o,preventClickEventOnDrag:a?l:!1,preventClickEventOnDragStart:a?c:!1,preventClickEventByCondition:a?null:function(D){return t.controlBox.contains(D.target)},checkInput:a?f:!1,dragFocusedInput:d},b=new Op(e,C),T=n==="Control";return["drag","pinch"].forEach(function(D){["Start","","End"].forEach(function(w){b.on("".concat(D).concat(w),function(E){var A,_=E.eventType,R=D==="drag"&&E.isPinch;if(i[_]&&!i[_](E)){E.stop();return}if(!R){var I=D==="drag"?[D]:["drag",D],k=X([],P(t[r]),!1),O=Hr(t,k,I,n,w,E);O?(t.props.stopPropagation||w==="Start"&&T)&&((A=E==null?void 0:E.inputEvent)===null||A===void 0||A.stopPropagation()):E.stop()}})})}),b}var o0=function(){function t(e,r,n){var i=this;this.target=e,this.moveable=r,this.eventName=n,this.ables=[],this._onEvent=function(a){var s=i.eventName,o=i.moveable;o.state.disableNativeEvent||i.ables.forEach(function(u){u[s](o,{inputEvent:a})})},e.addEventListener(n.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function u0(t,e,r,n){var i;r===void 0&&(r=e);var a=yc(t,e),s=a.matrixes,o=a.is3d,u=a.targetMatrix,l=a.transformOrigin,c=a.targetOrigin,f=a.offsetContainer,d=a.hasFixed,h=a.zoom,p=Cv(f,r),v=p.matrixes,g=p.is3d,m=p.offsetContainer,y=p.zoom,x=n,S=4,C=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,b=u,T=xt(S),D=xt(S),w=xt(S),E=xt(S),A=s.length,_=v.map(function(G){return M(M({},G),{matrix:G.matrix?X([],P(G.matrix),!1):void 0})}).reverse();s.reverse(),!o&&x&&(b=de(b,3,4),Da(s)),!g&&x&&Da(_),_.forEach(function(G){D=gt(D,G.matrix,S)});var R=r||Fe(t),I=((i=_[0])===null||i===void 0?void 0:i.target)||tn(R,R,!0).offsetParent,k=_.slice(1).reduce(function(G,j){return gt(G,j.matrix,S)},xt(S));s.forEach(function(G,j){if(A-2===j&&(w=T.slice()),A-1===j&&(E=T.slice()),!G.matrix){var z=s[j+1],U=Eg(G,z,I,S,gt(k,T,S));G.matrix=Qe(U,S)}T=gt(T,G.matrix,S)});var O=!C&&o;b||(b=xt(O?4:3));var B=xi(C&&b.length===16?de(b,4,3):b,O),F=D;return D=Jl(D,S,S),{hasZoom:h!==1||y!==1,hasFixed:d,matrixes:s,rootMatrix:D,originalRootMatrix:F,beforeMatrix:w,offsetMatrix:E,allMatrix:T,targetMatrix:b,targetTransform:B,inlineTransform:t.style.transform,transformOrigin:l,targetOrigin:c,is3d:x,offsetContainer:f,offsetRootContainer:m}}function l0(t,e,r,n){r===void 0&&(r=e);var i=0,a=0,s=0,o={},u=Yc(t);if(t&&(i=u.offsetWidth,a=u.offsetHeight),t){var l=u0(t,e,r,n),c=mr(l.allMatrix,l.transformOrigin,i,a);o=M(M({},l),c);var f=mr(l.allMatrix,[50,50],100,100);s=Xc([f.pos1,f.pos2],f.direction)}var d=4;return M(M(M({hasZoom:!1,width:i,height:a,rotation:s},u),{originalRootMatrix:xt(d),rootMatrix:xt(d),beforeMatrix:xt(d),offsetMatrix:xt(d),allMatrix:xt(d),targetMatrix:xt(d),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),o)}function Ma(t,e,r,n,i,a){a===void 0&&(a=[]);var s=1,o=[0,0],u=An(),l=An(),c=An(),f=An(),d=[0,0],h={},p=l0(e,r,i,!0);if(e){var v=Zt(e);a.forEach(function(_){h[_]=v(_)});var g=p.is3d?4:3,m=mr(p.offsetMatrix,dt(p.transformOrigin,Ql(p.targetMatrix,g)),p.width,p.height);s=m.direction,o=dt(m.origin,[m.left-p.left,m.top-p.top]),f=Wr(p.offsetRootContainer);var y=tn(n,n,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var x=mr(gt(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),S=mr(p.originalRootMatrix,ri(Zt(y)("transformOrigin")).map(function(_){return parseFloat(_)}),y.offsetWidth,y.offsetHeight);if(u=Ni(x,f),c=Ni(S,f,y,!0),t){var C=x.left,b=x.top;l=Ni({left:C,top:b,bottom:b,right:b},f)}}else{u=Wr(e),c=bv(y),t&&(l=Wr(t));var T=c.left,D=c.top,w=c.clientLeft,E=c.clientTop,A=[u.left-T,u.top-D];d=rt(Cr(p.rootMatrix,A,4),[w+p.left,E+p.top])}}return M({targetClientRect:u,containerClientRect:c,moveableClientRect:l,rootContainerClientRect:f,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:h,offsetDelta:d},p)}function ru(t){var e=t.pos1,r=t.pos2,n=t.pos3,i=t.pos4;if(!e||!r||!n||!i)return null;var a=tr([e,r,n,i]),s=[a.minX,a.minY],o=rt(t.origin,s);return e=rt(e,s),r=rt(r,s),n=rt(n,s),i=rt(i,s),M(M({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:r,pos3:n,pos4:i,origin:o,beforeOrigin:o,isPersisted:!0})}var Dr=function(t){dn(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state=M({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Ma(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new ls,r._prevOriginalDragTarget=null,r._originalDragTarget=null,r._prevDragTarget=null,r._dragTarget=null,r._prevPropTarget=null,r._propTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._reiszeObserver=null,r._observerId=0,r._mutationObserver=null,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r._store={},r.checkUpdateRect=function(){if(!r.isDragging()){var n=r.props.parentMoveable;if(n){n.checkUpdateRect();return}Xh(r._observerId),r._observerId=ql(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},r}return e.prototype.render=function(){var r=this.props,n=this.getState(),i=r.parentPosition,a=r.className,s=r.target,o=r.zoom,u=r.cspNonce,l=r.translateZ,c=r.cssStyled,f=r.groupable,d=r.linePadding,h=r.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=P(i||[0,0],2),v=p[0],g=p[1],m=n.left,y=n.top,x=n.target,S=n.direction,C=n.hasFixed,b=n.offsetDelta,T=r.targets,D=this.isDragging(),w={};this.getEnabledAbles().forEach(function(k){w["data-able-".concat(k.name.toLowerCase())]=!0});var E=this._getAbleClassName(),A=T&&T.length&&(x||f)||s||!this._hasFirstTarget&&this.state.isPersisted,_=this.controlBox||this.props.firstRenderState||this.props.persistData,R=[m-v,y-g];!f&&r.useAccuratePosition&&(R[0]+=b[0],R[1]+=b[1]);var I={position:C?"fixed":"absolute",display:A?"block":"none",visibility:_?"visible":"hidden",transform:"translate3d(".concat(R[0],"px, ").concat(R[1],"px, ").concat(l,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return d&&(I["--moveable-line-padding"]=d),h&&(I["--moveable-control-padding"]=h),L.createElement(c,M({cspNonce:u,ref:$e(this,"controlBox"),className:"".concat(et("control-box",S===-1?"reverse":"",D?"dragging":"")," ").concat(E," ").concat(a)},w,{onClick:this._onPreventClick,style:I}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var r=this.props,n=r.parentMoveable,i=r.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(r)},e.prototype.componentWillUnmount=function(){var r,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(r=this._reiszeObserver)===null||r===void 0||r.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),cr(this,!1),cr(this,!0);var a=this.events;for(var s in a){var o=a[s];o&&o.destroy()}},e.prototype.getTargets=function(){var r=this.props.target;return r?[r]:[]},e.prototype.getAble=function(r){var n=this.props.ables||[];return Jt(n,function(i){return i.name===r})},e.prototype.getContainer=function(){var r=this.props,n=r.parentMoveable,i=r.wrapperMoveable,a=r.container;return a||i&&i.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(r){var n;return r&&(((n=r.getAttribute)===null||n===void 0?void 0:n.call(r,"class"))||"").indexOf(ds)>-1},e.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var i=this.targetGesto,a=this.controlGesto;return i&&As(this)({inputEvent:r},n)?i.isFlag()||i.triggerDragStart(r):a&&this.isMoveableElement(n)&&(a.isFlag()||a.triggerDragStart(r)),this},e.prototype.hitTest=function(r){var n=this.state,i=n.target,a=n.pos1,s=n.pos2,o=n.pos3,u=n.pos4,l=n.targetClientRect;if(!i)return 0;var c;if(as(r)){var f=r.getBoundingClientRect();c={left:f.left,top:f.top,width:f.width,height:f.height}}else c=M({width:0,height:0},r);var d=c.left,h=c.top,p=c.width,v=c.height,g=Eo([a,s,u,o],l),m=wp(g,[[d,h],[d+p,h],[d+p,h+v],[d,h+v]]),y=nc(g);return!m||!y?0:Math.min(100,m/y*100)},e.prototype.isInside=function(r,n){var i=this.state,a=i.target,s=i.pos1,o=i.pos2,u=i.pos3,l=i.pos4,c=i.targetClientRect;return a?ca([r,n],Eo([s,o,l,u],c)):!1},e.prototype.updateRect=function(r,n,i){i===void 0&&(i=!0);var a=this.props,s=!a.parentPosition&&!a.wrapperMoveable;s&&Sr(!0);var o=a.parentMoveable,u=this.state,l=u.target||a.target,c=this.getContainer(),f=o?o._rootContainer:this._rootContainer,d=Ma(this.controlBox,l,c,c,f||c,this._getRequestStyles());if(!l&&this._hasFirstTarget&&a.persistData){var h=ru(a.persistData);for(var p in h)d[p]=h[p]}s&&Sr(),this.updateState(d,o?!1:i)},e.prototype.isDragging=function(r){var n,i,a=this.targetGesto,s=this.controlGesto;if(a!=null&&a.isFlag()){if(!r)return!0;var o=a.getEventData();return!!(!((n=o[r])===null||n===void 0)&&n.isEventStart)}if(s!=null&&s.isFlag()){if(!r)return!0;var o=s.getEventData();return!!(!((i=o[r])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(r){this.updateRect(r,!0)},e.prototype.getRect=function(){var r=this.state,n=se(this.state),i=P(n,4),a=i[0],s=i[1],o=i[2],u=i[3],l=ne(n),c=r.width,f=r.height,d=l.width,h=l.height,p=l.left,v=l.top,g=[r.left,r.top],m=dt(g,r.origin),y=dt(g,r.beforeOrigin),x=r.transformOrigin;return{width:d,height:h,left:p,top:v,pos1:a,pos2:s,pos3:o,pos4:u,offsetWidth:c,offsetHeight:f,beforeOrigin:y,origin:m,transformOrigin:x,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(r){if(!r||r==="target"){var n=this.targetGesto;(n==null?void 0:n.isIdle())===!1&&Ta(this,!1),n==null||n.stop()}if(!r||r==="control"){var n=this.controlGesto;(n==null?void 0:n.isIdle())===!1&&Ta(this,!0),n==null||n.stop()}},e.prototype.getRotation=function(){var r=this.state,n=r.pos1,i=r.pos2,a=r.direction;return Og(n,i,a)},e.prototype.request=function(r,n,i){n===void 0&&(n={});var a=this,s=a.props,o=s.parentMoveable||s.wrapperMoveable||a,u=o.props.ables,l=s.groupable,c=Jt(u,function(m){return m.name===r});if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var f=c.request(a),d=i||n.isInstant,h=f.isControl?"controlAbles":"targetAbles",p="".concat(l?"Group":"").concat(f.isControl?"Control":""),v=X([],P(o[h]),!1),g={request:function(m){return Hr(a,v,["drag"],p,"",M(M({},f.request(m)),{requestAble:r,isRequest:!0}),d),g},requestEnd:function(){return Hr(a,v,["drag"],p,"End",M(M({},f.requestEnd()),{requestAble:r,isRequest:!0}),d),g}};return Hr(a,v,["drag"],p,"Start",M(M({},f.requestStart(n)),{requestAble:r,isRequest:!0}),d),d?g.request(n).requestEnd():g},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var r=this.getState(),n=this.props,i=n.padding,a=r.originalBeforeOrigin,s=r.transformOrigin,o=r.allMatrix,u=r.is3d,l=r.pos1,c=r.pos2,f=r.pos3,d=r.pos4,h=r.left,p=r.top,v=r.isPersisted,g=n.zoom||1;if(!i&&g<=1){r.renderPoses=[l,c,f,d],r.renderLines=[[l,c],[c,d],[d,f],[f,l]];return}var m=rf(i||{}),y=m.left,x=m.top,S=m.bottom,C=m.right,b=u?4:3,T=[];v?T=s:this.controlBox&&n.groupable?T=a:T=dt(a,[h,p]);var D=Kn(b,Qe(T.map(function(I){return-I}),b),o,Qe(s,b)),w=te(D,l,[-y,-x],b),E=te(D,c,[C,-x],b),A=te(D,f,[-y,S],b),_=te(D,d,[C,S],b);r.renderPoses=[w,E,A,_],r.renderLines=[[w,E],[E,_],[_,A],[A,w]];{var R=g/2;r.renderLines=[[te(D,l,[-y-R,-x],b),te(D,c,[C+R,-x],b)],[te(D,c,[C,-x-R],b),te(D,d,[C,S+R],b)],[te(D,d,[C+R,S],b),te(D,f,[-y-R,S],b)],[te(D,f,[-y,S+R],b),te(D,l,[-y,-x-R],b)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,n=r.target,i=r.container,a=r.parentMoveable,s=this.state,o=s.target,u=s.container;if(!(!o&&!n)){this.updateAbles();var l=!Ea(o,n),c=l||!Ea(u,i);if(c){var f=i||this.controlBox;f&&this.unsetAbles(),this.updateState({target:n,container:i}),!a&&f&&this.updateRect("End",!1,!1),this._isPropTargetChanged=l}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(r,n){var i=this.props;if(this._emitter.trigger(r,n),i.parentMoveable&&n.isRequest&&!n.isRequestChild)return i.parentMoveable.triggerEvent(r,n,!0);var a=i[r];return a&&a(n)},e.prototype.useCSS=function(r,n){var i=this.props.customStyledMap,a=r+n;return i[a]||(i[a]=sc(r,n)),i[a]},e.prototype.getState=function(){var r,n=this.props;(n.target||!((r=n.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=n.persistData,s=n.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&a){var o=ru(a);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(r)})},e.prototype.updateAbles=function(r,n){r===void 0&&(r=this.props.ables),n===void 0&&(n="");var i=this.props,a=i.triggerAblesSimultaneously,s=this.getEnabledAbles(r),o="drag".concat(n,"Start"),u="pinch".concat(n,"Start"),l="drag".concat(n,"ControlStart"),c=On(s,[o,u],a),f=On(s,[l],a);this.enabledAbles=s,this.targetAbles=c,this.controlAbles=f},e.prototype.updateState=function(r,n){if(n){if(this.isUnmounted)return;this.setState(r)}else{var i=this.state;for(var a in r)i[a]=r[a]}},e.prototype.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var n=this.props;return r.filter(function(i){return i&&(i.always&&n[i.name]!==!1||n[i.name])})},e.prototype.renderAbles=function(){var r=this,n=this.props,i=n.triggerAblesSimultaneously,a={createElement:L.createElement};return this.renderState={},Pg(Jc(On(this.getEnabledAbles(),["render"],i).map(function(s){var o=s.render;return o(r,a)||[]})).filter(function(s){return s}),function(s){var o=s.key;return o}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(n,i){var a,s,o=(s=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return X(X([],P(n),!1),P(o),!1)},X([],P(this.props.requestStyles||[]),!1));return r},e.prototype._updateObserver=function(r){this._updateResizeObserver(r),this._updateMutationObserver(r)},e.prototype._updateEvents=function(){var r=this.targetAbles.length,n=this.controlAbles.length,i=this._dragTarget,a=!r&&this.targetGesto||this._isTargetChanged(!0);a&&(cr(this,!1),this.updateState({gestos:{}})),n||cr(this,!0),i&&r&&!this.targetGesto&&(this.targetGesto=df(this,i,"")),!this.controlGesto&&n&&(this.controlGesto=hf(this,"Control"))},e.prototype._updateTargets=function(){var r=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=r.dragArea,this._propTarget=r.target,this._originalDragTarget=r.dragTarget||r.target,this._dragTarget=he(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var r=this.props,n=r,i=n.zoom,a=n.hideDefaultLines,s=n.hideChildMoveableDefaultLines,o=n.parentMoveable;if(a||o&&s)return[];var u=this.getState(),l={createElement:L.createElement};return u.renderLines.map(function(c,f){return Qr(l,"",c[0],c[1],i,"render-line-".concat(f))})},e.prototype._isTargetChanged=function(r){var n=this.props,i=n.dragTarget||n.target,a=this._prevOriginalDragTarget,s=this._prevDragArea,o=n.dragArea,u=!o&&a!==i,l=(r||o)&&s!==o;return u||l||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var r=this,n=this.props,i=n.dragArea?this.areaElement:this.state.target,a=this.events,s=wr(a);if(this._isTargetChanged())for(var o in a){var u=a[o];u&&u.destroy(),a[o]=null}if(i){var l=this.enabledAbles;s.forEach(function(c){var f=On(l,[c]),d=f.length>0,h=a[c];if(!d){h&&(h.destroy(),a[c]=null);return}h||(h=new o0(i,r,c),a[c]=h),h.setAbles(f)})}},e.prototype._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=he(r,!0))},e.prototype._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=he(r,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(X(X([],P(this._getAbleViewClassNames()),!1),[this.isDragging()?Gg:""],!1))},e.prototype._changeAbleViewClassNames=function(r){var n=this._viewContainer,i=Zc(r.filter(Boolean),function(l){return l}).map(function(l){var c=P(l,1),f=c[0];return f}),a=this._viewClassNames,s=us(a,i),o=s.removed,u=s.added;o.forEach(function(l){Kl(n,a[l])}),u.forEach(function(l){$l(n,i[l])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(n){var i;return((i=n.viewClassName)===null||i===void 0?void 0:i.call(n,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(r){var n=this;r===void 0&&(r="");var i=this.getEnabledAbles(),a=this.targetGesto,s=this.controlGesto,o=a!=null&&a.isFlag()?a.getEventData():{},u=s!=null&&s.isFlag()?s.getEventData():{};return i.map(function(l){var c,f,d,h=l.name,p=((c=l.className)===null||c===void 0?void 0:c.call(l,n))||"";return(!((f=o[h])===null||f===void 0)&&f.isEventStart||!((d=u[h])===null||d===void 0)&&d.isEventStart)&&(p+=" ".concat(et("".concat(h).concat(r,"-dragging")))),p.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(r){var n,i=this.props,a=i.target,s=Oe(this.getControlBoxElement());if(!s.ResizeObserver||!a||!i.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(r.target===a&&this._reiszeObserver)){var o=new s.ResizeObserver(this.checkUpdateRect);o.observe(a,{box:"border-box"}),this._reiszeObserver=o}},e.prototype._updateMutationObserver=function(r){var n=this,i,a=this.props,s=a.target,o=Oe(this.getControlBoxElement());if(!o.MutationObserver||!s||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(r.target===s&&this._mutationObserver)){var u=new o.MutationObserver(function(l){var c,f;try{for(var d=Wp(l),h=d.next();!h.done;h=d.next()){var p=h.value;p.type==="attributes"&&p.attributeName==="style"&&n.checkUpdateRect()}}catch(v){c={error:v}}finally{try{h&&!h.done&&(f=d.return)&&f.call(d)}finally{if(c)throw c.error}}});u.observe(s,{attributes:!0}),this._mutationObserver=u}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Nc,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(L.PureComponent),Os={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var r,n=t.props,i=n.targets||[],a=t.getState(),s=a.left,o=a.top,u=a.isPersisted,l=n.zoom||1,c=t.renderGroupRects,f=((r=n.persistData)===null||r===void 0?void 0:r.children)||[];u?i=f.map(function(){return null}):f=[];var d=fr(t,"parentPosition",[s,o],function(p){return p.join(",")}),h=fr(t,"requestStyles",t.getRequestChildStyles(),function(p){return p.join(",")});return t.moveables=t.moveables.slice(0,i.length),X(X([],P(i.map(function(p,v){return e.createElement(Dr,{key:"moveable"+v,ref:Wl(t,"moveables",v),target:p,origin:!1,requestStyles:h,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,o],persistData:f[v],zoom:l})})),!1),P(Jc(c.map(function(p,v){var g=p.pos1,m=p.pos2,y=p.pos3,x=p.pos4,S=[g,m,y,x];return[[0,1],[1,3],[3,2],[2,0]].map(function(C,b){var T=P(C,2),D=T[0],w=T[1];return Qr(e,"",rt(S[D],d),rt(S[w],d),l,"group-rect-".concat(v,"-").concat(b))})}))),!1)}},c0=hn("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var r=t.props.target,n=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),s=!a&&t.controlBox.contains(i);if(!(!n||!i||e.isDrag||t.isMoveableElement(i)||s)){var o=r.contains(i);Z(t,"onClick",ut(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:r===i,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var r=e.inputEvent,n=e.inputTarget;if(!(!r||!n||e.isDrag||t.isMoveableElement(n)||e.datas.inputTarget===n)){var i=t.props.targets,a=i.indexOf(n),s=a>-1,o=!1;a===-1&&(a=be(i,function(u){return u.contains(n)}),o=a>-1),Z(t,"onClickGroup",ut(t,e,{isDouble:e.isDouble,targets:i,inputTarget:n,targetIndex:a,isTarget:s,containsTarget:o,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function ir(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),M(M({},t),{datas:e})}var f0=hn("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var r=t.props,n=r.edgeDraggable;return n?bc(e,"edgeDraggable",n,t.getState().renderPoses,r.zoom):[]},dragCondition:function(t,e){var r,n=t.props,i=(r=e.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!i?!1:!n.draggable&&At(i,et("direction"))&&At(i,et("edge"))&&At(i,et("edgeDraggable"))},dragStart:function(t,e){return Wt.dragStart(t,ir(e))},drag:function(t,e){return Wt.drag(t,ir(e))},dragEnd:function(t,e){return Wt.dragEnd(t,ir(e))},dragGroupCondition:function(t,e){var r,n=t.props,i=(r=e.inputEvent)===null||r===void 0?void 0:r.target;return!n.edgeDraggable||!i?!1:!n.draggable&&At(i,et("direction"))&&At(i,et("line"))},dragGroupStart:function(t,e){return Wt.dragGroupStart(t,ir(e))},dragGroup:function(t,e){return Wt.dragGroup(t,ir(e))},dragGroupEnd:function(t,e){return Wt.dragGroupEnd(t,ir(e))},unset:function(t){return Wt.unset(t)}}),vf={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},d0=[cf,sf,vg,kg,Wt,f0,Sa,Bg,zg,Zv,jg,Wg,Lg,e0,t0,a0,Os,vf,c0,af,ff];function nu(t,e){var r=P(t,3),n=r[0],i=r[1],a=r[2];return(n*e[0]+i*e[1]+a)/Math.sqrt(n*n+i*i)}function Bn(t,e){var r=P(t,2),n=r[0],i=r[1];return-n*e[0]-i*e[1]}function iu(t,e){return Math.max.apply(Math,X([],P(t.map(function(r){var n=P(r,4),i=n[0],a=n[1],s=n[2],o=n[3];return Math.max(i[e],a[e],s[e],o[e])})),!1))}function au(t,e){return Math.min.apply(Math,X([],P(t.map(function(r){var n=P(r,4),i=n[0],a=n[1],s=n[2],o=n[3];return Math.min(i[e],a[e],s[e],o[e])})),!1))}function h0(t,e){var r,n,i,a=[0,0],s=[0,0],o=[0,0],u=[0,0],l=0,c=0;if(!t.length)return{pos1:a,pos2:s,pos3:o,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:l,height:c,rotation:e};var f=st(e,qt);if(f%90){var d=f/180*Math.PI,h=Math.tan(d),p=-1/h,v=[ga,Po],g=[[0,0],[0,0]],m=[ga,Po],y=[[0,0],[0,0]];t.forEach(function($){$.forEach(function(Y){var q=nu([-h,1,0],Y),V=nu([-p,1,0],Y);v[0]>q&&(g[0]=Y,v[0]=q),v[1]<q&&(g[1]=Y,v[1]=q),m[0]>V&&(y[0]=Y,m[0]=V),m[1]<V&&(y[1]=Y,m[1]=V)})});var x=P(g,2),S=x[0],C=x[1],b=P(y,2),T=b[0],D=b[1],w=[-h,1,Bn([-h,1],S)],E=[-h,1,Bn([-h,1],C)],A=[-p,1,Bn([-p,1],T)],_=[-p,1,Bn([-p,1],D)];r=P([[w,A],[w,_],[E,A],[E,_]].map(function($){var Y=P($,2),q=Y[0],V=Y[1];return cs(q,V)[0]}),4),a=r[0],s=r[1],o=r[2],u=r[3],l=m[1]-m[0],c=v[1]-v[0]}else{var R=au(t,0),I=au(t,1),k=iu(t,0),O=iu(t,1);if(a=[R,I],s=[k,I],o=[R,O],u=[k,O],l=k-R,c=O-I,f%180){var B=[o,a,u,s];n=P(B,4),a=n[0],s=n[1],o=n[2],u=n[3],l=O-I,c=k-R}}if(f%360>180){var B=[u,o,s,a];i=P(B,4),a=i[0],s=i[1],o=i[2],u=i[3]}var F=tr([a,s,o,u]),G=F.minX,j=F.minY,z=F.maxX,U=F.maxY;return{pos1:a,pos2:s,pos3:o,pos4:u,width:l,height:c,minX:G,minY:j,maxX:z,maxY:U,rotation:e}}function gf(t,e){var r=e.map(function(n){if(kt(n)){var i=gf(t,n),a=i.length;return a>1?i:a===1?i[0]:null}else{var s=Jt(t,function(o){var u=o.manager;return u.props.target===n});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return r.length===1&&kt(r[0])?r[0]:r}var p0=function(t){dn(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.differ=new rc,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(r,n,i){var a;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;Sr(!0),this.moveables.forEach(function(tt){tt.updateRect(r,!1,!1)});var o=this.props,u=this.moveables,l=s.target||o.target,c=u.map(function(tt){return{finded:!1,manager:tt}}),f=this.props.targetGroups||[],d=gf(c,f),h=o.useDefaultGroupRotate;d.push.apply(d,X([],P(c.filter(function(tt){var nt=tt.finded;return!nt}).map(function(tt){var nt=tt.manager;return nt})),!1));var p=[],v=!n||r!==""&&o.updateGroup,g=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(a=o.persistData)===null||a===void 0?void 0:a.rotation;m!=null&&(g=m)}function y(tt,nt,J){var H=tt.map(function(mt){if(kt(mt)){var lt=y(mt,nt),ht=[lt.pos1,lt.pos2,lt.pos3,lt.pos4];return p.push(lt),{poses:ht,rotation:lt.rotation}}else return{poses:se(mt.state),rotation:mt.getRotation()}}),Q=H.map(function(mt){var lt=mt.rotation;return lt}),ft=0,it=Q[0],ot=Q.every(function(mt){return Math.abs(it-mt)<.1});v?ft=!h&&ot?it:g:ft=!h&&!J&&ot?it:nt;var ct=H.map(function(mt){var lt=mt.poses;return lt}),pt=h0(ct,ft);return pt}var x=y(d,this.rotation,!0);v&&(this.rotation=x.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=f,this.renderGroupRects=p;var S=this.transformOrigin,C=this.rotation,b=this.scale,T=x.width,D=x.height,w=x.minX,E=x.minY,A=Ig([[0,0],[T,0],[0,D],[T,D]],Ps(S,T,D),this.rotation/180*Math.PI),_=tr(A.result),R=_.minX,I=_.minY,k=" rotate(".concat(C,"deg)")+" scale(".concat(Ht(b[0]),", ").concat(Ht(b[1]),")"),O="translate(".concat(-R,"px, ").concat(-I,"px)").concat(k);this.controlBox.style.transform="translate3d(".concat(w,"px, ").concat(E,"px, ").concat(this.props.translateZ||0,")"),l.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(S,";")+"width:".concat(T,"px;height:").concat(D,"px;")+"transform: ".concat(O),s.width=T,s.height=D;var B=this.getContainer(),F=Ma(this.controlBox,l,this.controlBox,this.getContainer(),this._rootContainer||B,[]),G=[F.left,F.top],j=P(se(F),4),z=j[0],U=j[1],$=j[2],Y=j[3],q=tr([z,U,$,Y]),V=[q.minX,q.minY],K=Ht(b[0]*b[1]);F.pos1=rt(z,V),F.pos2=rt(U,V),F.pos3=rt($,V),F.pos4=rt(Y,V),F.left=w-F.left+V[0],F.top=E-F.top+V[1],F.origin=rt(dt(G,F.origin),V),F.beforeOrigin=rt(dt(G,F.beforeOrigin),V),F.originalBeforeOrigin=dt(G,F.originalBeforeOrigin),F.transformOrigin=rt(dt(G,F.transformOrigin),V),l.style.transform="translate(".concat(-R-V[0],"px, ").concat(-I-V[1],"px)")+k,Sr(),this.updateState(M(M({},F),{posDelta:V,direction:K,beforeDirection:K}),i)},e.prototype.getRect=function(){return M(M({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},e.prototype.triggerEvent=function(r,n,i){if(i||r.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,r,n);this._emitter.trigger(r,n)},e.prototype.getRequestChildStyles=function(){var r=this.getEnabledAbles().reduce(function(n,i){var a,s,o=(s=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return X(X([],P(n),!1),P(o),!1)},[]);return r},e.prototype.getMoveables=function(){return X([],P(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,X(X([],P(this.props.ables),!1),[Os],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=he(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var r=this.state,n=this.props,i=this._prevDragTarget,a=n.dragTarget||this.areaElement,s=n.targets,o=this.differ.update(s),u=o.added,l=o.changed,c=o.removed,f=u.length||c.length;(f||this._prevOriginalDragTarget!==this._originalDragTarget)&&(cr(this,!1),cr(this,!0),this.updateState({gestos:{}})),i!==a&&(r.target=null),r.target||(r.target=this.areaElement,this.controlBox.style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=df(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=hf(this,"GroupControl")));var d=!Ea(r.container,n.container);d&&(r.container=n.container),(d||f||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||l.length||s.length&&!ef(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!f},e.prototype._updateObserver=function(){},e.defaultProps=M(M({},Dr.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Dr),v0=function(t){dn(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.moveables=[],r}return e.prototype.render=function(){var r=this,n,i=this.props,a=i.cspNonce,s=i.cssStyled,o=i.persistData,u=i.targets||[],l=u.length,c=this.isUnmounted||!l,f=(n=o==null?void 0:o.children)!==null&&n!==void 0?n:[];return c&&!l&&f.length?u=f.map(function(){return null}):c||(f=[]),L.createElement(s,{cspNonce:a,ref:$e(this,"controlBox"),className:et("control-box")},u.map(function(d,h){var p,v,g=(v=(p=i.individualGroupableProps)===null||p===void 0?void 0:p.call(i,d,h))!==null&&v!==void 0?v:{};return L.createElement(Dr,M({key:"moveable"+h,ref:Wl(r,"moveables",h)},i,g,{target:d,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:f[h]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(r,n,i){i===void 0&&(i=!0),Sr(!0),this.moveables.forEach(function(a){a.updateRect(r,n,i)}),Sr()},e.prototype.getRect=function(){return M(M({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},e.prototype.request=function(r,n,i){n===void 0&&(n={});var a=this.moveables.map(function(u){return u.request(r,M(M({},n),{isInstant:!1}),!1)}),s=i||n.isInstant,o={request:function(u){return a.forEach(function(l){return l.request(u)}),this},requestEnd:function(){return a.forEach(function(u){return u.requestEnd()}),this}};return s?o.request(n).requestEnd():o},e.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var i=n,a=Jt(this.moveables,function(s){var o=s.getTargets()[0],u=s.getControlBoxElement(),l=s.getDragElement();return!o||!l?!1:l===i||l.contains(i)||l!==o&&o===i||o.contains(i)||u===i||u.contains(i)});return a&&a.dragStart(r,n),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return X([],P(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(Dr);function mf(t,e){var r=[];return t.forEach(function(n){if(n){if(Te(n)){e[n]&&r.push.apply(r,X([],P(e[n]),!1));return}kt(n)?r.push.apply(r,X([],P(mf(n,e)),!1)):r.push(n)}}),r}function yf(t,e){var r=[];return t.forEach(function(n){if(n){if(Te(n)){e[n]&&r.push.apply(r,X([],P(e[n]),!1));return}kt(n)?r.push(yf(n,e)):r.push(n)}}),r}function xf(t,e){return t.length!==e.length||t.some(function(r,n){var i=e[n];return!r&&!i?!1:r!=i?kt(r)&&kt(i)?xf(r,i):!0:!1})}var g0=function(t){dn(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new rc,r._elementTargets=[],r._tmpRefTargets=[],r._tmpSelectorMap={},r._onChangeTargets=null,r}return e.makeStyled=function(){var r={},n=this.getTotalAbles();n.forEach(function(a){var s=a.css;s&&s.forEach(function(o){r[o]=!0})});var i=wr(r).join(`
`);this.defaultStyled=sc("div",kh(ds,tv+i))},e.getTotalAbles=function(){return X([sf,Os,vf,af],P(this.defaultAbles),!1)},e.prototype.render=function(){var r,n=this.constructor;n.defaultStyled||n.makeStyled();var i=this.props,a=i.ables,s=i.props,o=Np(i,["ables","props"]),u=P(this._updateRefs(!0),2),l=u[0],c=u[1],f=mf(l,c),d=f.length>1,h=n.getTotalAbles(),p=X(X([],P(h),!1),P(a||[]),!1),v=M(M(M({},o),s||{}),{ables:p,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=f;var g=null,m=this.moveable,y=o.persistData;if(y!=null&&y.children&&(d=!0),o.individualGroupable)return L.createElement(v0,M({key:"individual-group",ref:$e(this,"moveable")},v,{target:null,targets:f}));if(d){var x=yf(l,c);if(m&&!m.props.groupable&&!m.props.individualGroupable){var S=m.props.target;S&&f.indexOf(S)>-1&&(g=M({},m.state))}return L.createElement(p0,M({key:"group",ref:$e(this,"moveable")},v,(r=o.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:f,targetGroups:x,firstRenderState:g}))}else{var C=f[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var b=m.moveables||[],T=Jt(b,function(D){return D.props.target===C});T&&(g=M({},T.state))}return L.createElement(Dr,M({key:"single",ref:$e(this,"moveable")},v,{target:C,firstRenderState:g}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var r,n;return(n=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&n!==void 0?n:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var r=this,n;return this._onChangeTargets=function(){r._onChangeTargets=null,n()},new Promise(function(i){n=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(r){var n=this.refTargets,i=Ms(this.props.target||this.props.targets),a=typeof document<"u",s=xf(n,i),o=this.selectorMap,u={};return this.refTargets.forEach(function l(c){if(Te(c)){var f=o[c];f?u[c]=o[c]:a&&(s=!0,u[c]=[].slice.call(document.querySelectorAll(c)))}else kt(c)&&c.forEach(l)}),this._tmpRefTargets=i,this._tmpSelectorMap=u,[i,u,!r&&s]},e.prototype._checkChangeTargets=function(){var r,n,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),s=a.added,o=a.removed,u=s.length||o.length;u&&((n=(r=this.props).onChangeTargets)===null||n===void 0||n.call(r,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var l=P(this._updateRefs(),3),c=l[0],f=l[1],d=l[2];this.refTargets=c,this.selectorMap=f,d&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,jp([Bh(nv)],e.prototype,"moveable",void 0),e}(L.PureComponent),m0=function(t){dn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=d0,e}(g0);const su=1920,ou=1080,y0=(t="landscape")=>t==="portrait-right"||t==="portrait-left"?{width:ou,height:su}:{width:su,height:ou},Pa=20,uu=60,lu=[{bg:"rgba(74, 144, 226, 0.2)",border:"#4a90e2",bgSelected:"rgba(74, 144, 226, 0.3)"},{bg:"rgba(82, 196, 26, 0.2)",border:"#52c41a",bgSelected:"rgba(82, 196, 26, 0.3)"},{bg:"rgba(250, 173, 20, 0.2)",border:"#faad14",bgSelected:"rgba(250, 173, 20, 0.3)"},{bg:"rgba(245, 34, 45, 0.2)",border:"#f5222d",bgSelected:"rgba(245, 34, 45, 0.3)"}],Vn=(t,e=Pa)=>Math.round(t/e)*e,x0=(t,e=!1)=>{const r=lu[t%lu.length];return{backgroundColor:e?r.bgSelected:r.bg,borderColor:r.border}},S0=(t,e,r,n,i,a)=>{const s=[],o=n?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)";for(let u=0;u<=i;u+=uu)s.push(W.jsx($t,{pos:"absolute",bg:o,style:{left:u*r,top:0,width:"1px",height:e,pointerEvents:"none"}},`vertical-${u}`));for(let u=0;u<=a;u+=uu)s.push(W.jsx($t,{pos:"absolute",bg:o,style:{left:0,top:u*r,width:t,height:"1px",pointerEvents:"none"}},`horizontal-${u}`));return s},b0=({regions:t,onRegionsChange:e,orientation:r="landscape",canvasWidth:n,canvasHeight:i})=>{const{colorScheme:a}=rh(),[s,o]=L.useState(null),[u,l]=L.useState(null),[c,f]=L.useState({x:0,y:0,width:0,height:0}),[d,h]=L.useState({width:600,height:338}),[p,v]=L.useState(!1),[g,m]=L.useState(!1),[y,x]=L.useState(null),[S,C]=L.useState(!1),[b,T]=L.useState(!1),D=L.useRef(null),w=L.useRef(null),E=y0(r);L.useEffect(()=>{if(n&&i){T(!0);return}const V=()=>{if(w.current){const nt=w.current.getBoundingClientRect().width,J=E.height/E.width,H=nt*J;h({width:nt,height:Math.min(H,500)}),T(!0)}},K=new ResizeObserver(()=>{V()});return w.current&&(K.observe(w.current),V()),window.addEventListener("resize",V),()=>{window.removeEventListener("resize",V),K.disconnect()}},[n,i,E]);const A=n||d.width,_=i||d.height,R=A/E.width,I=E.height*R,k=_/E.height;E.width*k;const O=I<=_?R:k,B=E.width*O,F=E.height*O,G=L.useCallback((V,K)=>{const tt=t.map(nt=>nt.id===V?{...nt,...K}:nt);e(tt)},[t,e]),j=L.useCallback(()=>{if(t.length>=4)return;const V={id:crypto.randomUUID(),x:100,y:100,width:E.width/2,height:E.height/2,zIndex:t.length};e([...t,V])},[t,e,E]),z=L.useCallback(V=>{e(t.filter(K=>K.id!==V)),o(null),l(null)},[t,e]),U=V=>{l(V.id),f({x:V.x,y:V.y,width:V.width,height:V.height})},$=()=>{u&&(G(u,c),l(null))},Y=()=>{l(null)},q=s?t.find(V=>V.id===s):null;return L.useEffect(()=>{D.current},[b]),W.jsxs(qn,{gap:"md",ref:w,children:[W.jsxs(Re,{justify:"space-between",children:[W.jsxs(ue,{size:"sm",fw:500,children:["レイアウトエディター (",E.width,"×",E.height,")"]}),W.jsxs(Re,{gap:"md",children:[W.jsx(fi,{label:"無段階変形",size:"sm",checked:p,onChange:V=>v(V.currentTarget.checked)}),W.jsxs(Fr,{leftSection:W.jsx(mh,{size:16}),size:"xs",onClick:j,disabled:t.length>=4,children:["リージョン矩形を追加 (",t.length,"/4)"]})]})]}),W.jsxs("div",{ref:D,role:"application",style:{position:"relative",width:B,height:F,border:`2px solid ${a==="dark"?"var(--mantine-color-dark-4)":"var(--mantine-color-gray-4)"}`,backgroundColor:a==="dark"?"var(--mantine-color-dark-7)":"var(--mantine-color-gray-0)",overflow:"hidden"},onClick:()=>o(null),onKeyDown:V=>{V.key==="Escape"&&(V.preventDefault(),o(null))},children:[S0(B,F,O,a==="dark",E.width,E.height),[...t].sort((V,K)=>(V.zIndex||0)-(K.zIndex||0)).map(V=>{const K=t.findIndex(J=>J.id===V.id),tt=s===V.id,nt=x0(K,tt);return W.jsxs("div",{style:{position:"absolute",zIndex:V.zIndex||0},children:[W.jsxs("div",{role:"button",tabIndex:0,id:`region-${V.id}`,style:{position:"absolute",left:V.x*O,top:V.y*O,width:V.width*O,height:V.height*O,backgroundColor:nt.backgroundColor,border:tt?`2px solid ${nt.borderColor}`:`1px solid ${nt.borderColor}`,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:0},onClick:J=>{J.stopPropagation(),!g&&!S&&(s===V.id?o(null):o(V.id))},onKeyDown:J=>{(J.key==="Enter"||J.key===" ")&&(J.preventDefault(),J.stopPropagation(),!g&&!S&&(s===V.id?o(null):o(V.id)))},children:[W.jsxs(ue,{size:"xs",c:"white",fw:700,style:{textShadow:a==="dark"?"1px 1px 2px rgba(0,0,0,0.8)":"1px 1px 2px rgba(0,0,0,0.6)"},children:["リージョン ",K+1]}),W.jsx($t,{pos:"absolute",top:4,right:4,children:W.jsxs(Re,{gap:2,children:[W.jsxs(Ri,{opened:u===V.id,onClose:Y,position:"bottom-end",withArrow:!0,children:[W.jsx(Ri.Target,{children:W.jsx(_i,{size:"xs",variant:"filled",color:"blue",onClick:J=>{J.stopPropagation(),U(V)},children:W.jsx(nh,{size:10})})}),W.jsx(Ri.Dropdown,{children:W.jsxs(qn,{gap:"xs",miw:200,pos:"relative",children:[W.jsx(_i,{size:"xs",variant:"subtle",color:"gray",onClick:Y,style:{position:"absolute",top:"4px",right:"4px",zIndex:10},children:W.jsx(wl,{size:12})}),W.jsx(ue,{size:"sm",fw:500,children:"位置とサイズ"}),W.jsxs(Re,{gap:"xs",children:[W.jsx(bn,{label:"X",size:"xs",min:0,max:E.width-c.width,value:c.x,onChange:J=>f(H=>({...H,x:Number(J)||0}))}),W.jsx(bn,{label:"Y",size:"xs",min:0,max:E.height-c.height,value:c.y,onChange:J=>f(H=>({...H,y:Number(J)||0}))})]}),W.jsxs(Re,{gap:"xs",children:[W.jsx(bn,{label:"幅",size:"xs",min:1,max:E.width-c.x,value:c.width,onChange:J=>f(H=>({...H,width:Number(J)||1}))}),W.jsx(bn,{label:"高さ",size:"xs",min:1,max:E.height-c.y,value:c.height,onChange:J=>f(H=>({...H,height:Number(J)||1}))})]}),W.jsxs(Re,{gap:"xs",mt:"xs",children:[W.jsx(Fr,{size:"xs",onClick:$,children:"保存"}),W.jsx(Fr,{size:"xs",variant:"light",onClick:Y,children:"キャンセル"})]})]})})]}),W.jsx(_i,{size:"xs",variant:"filled",color:"red",onClick:J=>{J.stopPropagation(),z(V.id)},children:W.jsx(ih,{size:10})})]})})]}),D.current&&O>0&&b&&W.jsx(m0,{target:`#region-${V.id}`,container:D.current,draggable:!0,resizable:s===V.id,keepRatio:!1,throttleDrag:0,throttleResize:0,onDragStart:()=>{x(s),m(!0),C(!1)},onDrag:J=>{S||(C(!0),o(V.id));const H=J.left/O,Q=J.top/O,ft=p?Math.max(0,Math.min(E.width-V.width,Math.round(H))):Math.max(0,Math.min(E.width-V.width,Vn(H))),it=p?Math.max(0,Math.min(E.height-V.height,Math.round(Q))):Math.max(0,Math.min(E.height-V.height,Vn(Q)));J.target.style.left=`${ft*O}px`,J.target.style.top=`${it*O}px`,G(V.id,{x:ft,y:it})},onDragEnd:()=>{m(!1),x(null),C(!1)},onResizeStart:()=>{o(V.id)},onResize:J=>{const H=J.width/O,Q=J.height/O,ft=p?Math.max(1,Math.min(E.width-V.x,Math.round(H))):Math.max(Pa,Math.min(E.width-V.x,Vn(H))),it=p?Math.max(1,Math.min(E.height-V.y,Math.round(Q))):Math.max(Pa,Math.min(E.height-V.y,Vn(Q)));J.target.style.width=`${ft*O}px`,J.target.style.height=`${it*O}px`,G(V.id,{width:ft,height:it})},onResizeEnd:()=>{}},`${V.id}-${O}-${B}-${F}`)]},V.id)})]}),W.jsx(Nn,{align:"center",h:40,px:"sm",py:8,style:{backgroundColor:q?a==="dark"?"var(--mantine-color-blue-9)":"var(--mantine-color-blue-0)":a==="dark"?"var(--mantine-color-dark-6)":"var(--mantine-color-gray-0)",borderRadius:"4px",fontSize:"12px",border:`1px solid ${a==="dark"?"var(--mantine-color-dark-4)":"var(--mantine-color-gray-3)"}`},children:W.jsx(ue,{size:"xs",fw:500,c:q?void 0:"dimmed",children:q?`リージョン ${t.findIndex(V=>V.id===q.id)+1}: X:${q.x}, Y:${q.y}, 幅:${q.width}, 高さ:${q.height}`:"リージョンを選択してください"})})]})},Is=L.createContext({});function ks(t){const e=L.useRef(null);return e.current===null&&(e.current=t()),e.current}const Bs=typeof window<"u",Sf=Bs?L.useLayoutEffect:L.useEffect,bi=L.createContext(null);function Vs(t,e){t.indexOf(e)===-1&&t.push(e)}function zs(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const Ce=(t,e,r)=>r>e?e:r<t?t:r;let Fs=()=>{};const De={},bf=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Cf(t){return typeof t=="object"&&t!==null}const Df=t=>/^0[^.\s]+$/u.test(t);function Gs(t){let e;return()=>(e===void 0&&(e=t()),e)}const ie=t=>t,C0=(t,e)=>r=>e(t(r)),gn=(...t)=>t.reduce(C0),en=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class Ls{constructor(){this.subscriptions=[]}add(e){return Vs(this.subscriptions,e),()=>zs(this.subscriptions,e)}notify(e,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,n);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pe=t=>t*1e3,ve=t=>t/1e3;function Tf(t,e){return e?t*(1e3/e):0}const Ef=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,D0=1e-7,T0=12;function E0(t,e,r,n,i){let a,s,o=0;do s=e+(r-e)/2,a=Ef(s,n,i)-t,a>0?r=s:e=s;while(Math.abs(a)>D0&&++o<T0);return s}function mn(t,e,r,n){if(t===e&&r===n)return ie;const i=a=>E0(a,0,1,t,r);return a=>a===0||a===1?a:Ef(i(a),e,n)}const wf=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Mf=t=>e=>1-t(1-e),Pf=mn(.33,1.53,.69,.99),Ns=Mf(Pf),Rf=wf(Ns),_f=t=>(t*=2)<1?.5*Ns(t):.5*(2-Math.pow(2,-10*(t-1))),js=t=>1-Math.sin(Math.acos(t)),Af=Mf(js),Of=wf(js),w0=mn(.42,0,1,1),M0=mn(0,0,.58,1),If=mn(.42,0,.58,1),P0=t=>Array.isArray(t)&&typeof t[0]!="number",kf=t=>Array.isArray(t)&&typeof t[0]=="number",R0={linear:ie,easeIn:w0,easeInOut:If,easeOut:M0,circIn:js,circInOut:Of,circOut:Af,backIn:Ns,backInOut:Rf,backOut:Pf,anticipate:_f},_0=t=>typeof t=="string",cu=t=>{if(kf(t)){Fs(t.length===4);const[e,r,n,i]=t;return mn(e,r,n,i)}else if(_0(t))return R0[t];return t},zn=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],fu={value:null};function A0(t,e){let r=new Set,n=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},u=0;function l(f){s.has(f)&&(c.schedule(f),t()),u++,f(o)}const c={schedule:(f,d=!1,h=!1)=>{const v=h&&i?r:n;return d&&s.add(f),v.has(f)||v.add(f),f},cancel:f=>{n.delete(f),s.delete(f)},process:f=>{if(o=f,i){a=!0;return}i=!0,[r,n]=[n,r],r.forEach(l),e&&fu.value&&fu.value.frameloop[e].push(u),u=0,r.clear(),i=!1,a&&(a=!1,c.process(f))}};return c}const O0=40;function Bf(t,e){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,s=zn.reduce((x,S)=>(x[S]=A0(a,e?S:void 0),x),{}),{setup:o,read:u,resolveKeyframes:l,preUpdate:c,update:f,preRender:d,render:h,postRender:p}=s,v=()=>{const x=De.useManualTiming?i.timestamp:performance.now();r=!1,De.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(x-i.timestamp,O0),1)),i.timestamp=x,i.isProcessing=!0,o.process(i),u.process(i),l.process(i),c.process(i),f.process(i),d.process(i),h.process(i),p.process(i),i.isProcessing=!1,r&&e&&(n=!1,t(v))},g=()=>{r=!0,n=!0,i.isProcessing||t(v)};return{schedule:zn.reduce((x,S)=>{const C=s[S];return x[S]=(b,T=!1,D=!1)=>(r||g(),C.schedule(b,T,D)),x},{}),cancel:x=>{for(let S=0;S<zn.length;S++)s[zn[S]].cancel(x)},state:i,steps:s}}const{schedule:St,cancel:Ve,state:Vt,steps:Hi}=Bf(typeof requestAnimationFrame<"u"?requestAnimationFrame:ie,!0);let Wn;function I0(){Wn=void 0}const Kt={now:()=>(Wn===void 0&&Kt.set(Vt.isProcessing||De.useManualTiming?Vt.timestamp:performance.now()),Wn),set:t=>{Wn=t,queueMicrotask(I0)}},Vf=t=>e=>typeof e=="string"&&e.startsWith(t),Ws=Vf("--"),k0=Vf("var(--"),Hs=t=>k0(t)?B0.test(t.split("/*")[0].trim()):!1,B0=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,_r={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},rn={..._r,transform:t=>Ce(0,1,t)},Fn={..._r,default:1},Yr=t=>Math.round(t*1e5)/1e5,Ys=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function V0(t){return t==null}const z0=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Xs=(t,e)=>r=>!!(typeof r=="string"&&z0.test(r)&&r.startsWith(t)||e&&!V0(r)&&Object.prototype.hasOwnProperty.call(r,e)),zf=(t,e,r)=>n=>{if(typeof n!="string")return n;const[i,a,s,o]=n.match(Ys);return{[t]:parseFloat(i),[e]:parseFloat(a),[r]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},F0=t=>Ce(0,255,t),Yi={..._r,transform:t=>Math.round(F0(t))},qe={test:Xs("rgb","red"),parse:zf("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+Yi.transform(t)+", "+Yi.transform(e)+", "+Yi.transform(r)+", "+Yr(rn.transform(n))+")"};function G0(t){let e="",r="",n="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Ra={test:Xs("#"),parse:G0,transform:qe.transform},yn=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Pe=yn("deg"),ge=yn("%"),at=yn("px"),L0=yn("vh"),N0=yn("vw"),du={...ge,parse:t=>ge.parse(t)/100,transform:t=>ge.transform(t*100)},dr={test:Xs("hsl","hue"),parse:zf("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+ge.transform(Yr(e))+", "+ge.transform(Yr(r))+", "+Yr(rn.transform(n))+")"},Pt={test:t=>qe.test(t)||Ra.test(t)||dr.test(t),parse:t=>qe.test(t)?qe.parse(t):dr.test(t)?dr.parse(t):Ra.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?qe.transform(t):dr.transform(t),getAnimatableNone:t=>{const e=Pt.parse(t);return e.alpha=0,Pt.transform(e)}},j0=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function W0(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ys))==null?void 0:e.length)||0)+(((r=t.match(j0))==null?void 0:r.length)||0)>0}const Ff="number",Gf="color",H0="var",Y0="var(",hu="${}",X0=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function nn(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(X0,u=>(Pt.test(u)?(n.color.push(a),i.push(Gf),r.push(Pt.parse(u))):u.startsWith(Y0)?(n.var.push(a),i.push(H0),r.push(u)):(n.number.push(a),i.push(Ff),r.push(parseFloat(u))),++a,hu)).split(hu);return{values:r,split:o,indexes:n,types:i}}function Lf(t){return nn(t).values}function Nf(t){const{split:e,types:r}=nn(t),n=e.length;return i=>{let a="";for(let s=0;s<n;s++)if(a+=e[s],i[s]!==void 0){const o=r[s];o===Ff?a+=Yr(i[s]):o===Gf?a+=Pt.transform(i[s]):a+=i[s]}return a}}const q0=t=>typeof t=="number"?0:Pt.test(t)?Pt.getAnimatableNone(t):t;function U0(t){const e=Lf(t);return Nf(t)(e.map(q0))}const ze={test:W0,parse:Lf,createTransformer:Nf,getAnimatableNone:U0};function Xi(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function $0({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,a=0,s=0;if(!e)i=a=s=r;else{const o=r<.5?r*(1+e):r+e-r*e,u=2*r-o;i=Xi(u,o,t+1/3),a=Xi(u,o,t),s=Xi(u,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:n}}function si(t,e){return r=>r>0?e:t}const Ct=(t,e,r)=>t+(e-t)*r,qi=(t,e,r)=>{const n=t*t,i=r*(e*e-n)+n;return i<0?0:Math.sqrt(i)},K0=[Ra,qe,dr],Z0=t=>K0.find(e=>e.test(t));function pu(t){const e=Z0(t);if(!e)return!1;let r=e.parse(t);return e===dr&&(r=$0(r)),r}const vu=(t,e)=>{const r=pu(t),n=pu(e);if(!r||!n)return si(t,e);const i={...r};return a=>(i.red=qi(r.red,n.red,a),i.green=qi(r.green,n.green,a),i.blue=qi(r.blue,n.blue,a),i.alpha=Ct(r.alpha,n.alpha,a),qe.transform(i))},_a=new Set(["none","hidden"]);function J0(t,e){return _a.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function Q0(t,e){return r=>Ct(t,e,r)}function qs(t){return typeof t=="number"?Q0:typeof t=="string"?Hs(t)?si:Pt.test(t)?vu:rm:Array.isArray(t)?jf:typeof t=="object"?Pt.test(t)?vu:tm:si}function jf(t,e){const r=[...t],n=r.length,i=t.map((a,s)=>qs(a)(a,e[s]));return a=>{for(let s=0;s<n;s++)r[s]=i[s](a);return r}}function tm(t,e){const r={...t,...e},n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=qs(t[i])(t[i],e[i]));return i=>{for(const a in n)r[a]=n[a](i);return r}}function em(t,e){const r=[],n={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][n[a]],o=t.values[s]??0;r[i]=o,n[a]++}return r}const rm=(t,e)=>{const r=ze.createTransformer(e),n=nn(t),i=nn(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?_a.has(t)&&!i.values.length||_a.has(e)&&!n.values.length?J0(t,e):gn(jf(em(n,i),i.values),r):si(t,e)};function Wf(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?Ct(t,e,r):qs(t)(t,e)}const nm=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>St.update(e,r),stop:()=>Ve(e),now:()=>Vt.isProcessing?Vt.timestamp:Kt.now()}},Hf=(t,e,r=10)=>{let n="";const i=Math.max(Math.round(e/r),2);for(let a=0;a<i;a++)n+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},oi=2e4;function Us(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<oi;)e+=r,n=t.next(e);return e>=oi?1/0:e}function im(t,e=100,r){const n=r({...t,keyframes:[0,e]}),i=Math.min(Us(n),oi);return{type:"keyframes",ease:a=>n.next(i*a).value/e,duration:ve(i)}}const am=5;function Yf(t,e,r){const n=Math.max(e-am,0);return Tf(r-t(n),e-n)}const Dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ui=.001;function sm({duration:t=Dt.duration,bounce:e=Dt.bounce,velocity:r=Dt.velocity,mass:n=Dt.mass}){let i,a,s=1-e;s=Ce(Dt.minDamping,Dt.maxDamping,s),t=Ce(Dt.minDuration,Dt.maxDuration,ve(t)),s<1?(i=l=>{const c=l*s,f=c*t,d=c-r,h=Aa(l,s),p=Math.exp(-f);return Ui-d/h*p},a=l=>{const f=l*s*t,d=f*r+r,h=Math.pow(s,2)*Math.pow(l,2)*t,p=Math.exp(-f),v=Aa(Math.pow(l,2),s);return(-i(l)+Ui>0?-1:1)*((d-h)*p)/v}):(i=l=>{const c=Math.exp(-l*t),f=(l-r)*t+1;return-Ui+c*f},a=l=>{const c=Math.exp(-l*t),f=(r-l)*(t*t);return c*f});const o=5/t,u=um(i,a,o);if(t=pe(t),isNaN(u))return{stiffness:Dt.stiffness,damping:Dt.damping,duration:t};{const l=Math.pow(u,2)*n;return{stiffness:l,damping:s*2*Math.sqrt(n*l),duration:t}}}const om=12;function um(t,e,r){let n=r;for(let i=1;i<om;i++)n=n-t(n)/e(n);return n}function Aa(t,e){return t*Math.sqrt(1-e*e)}const lm=["duration","bounce"],cm=["stiffness","damping","mass"];function gu(t,e){return e.some(r=>t[r]!==void 0)}function fm(t){let e={velocity:Dt.velocity,stiffness:Dt.stiffness,damping:Dt.damping,mass:Dt.mass,isResolvedFromDuration:!1,...t};if(!gu(t,cm)&&gu(t,lm))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),i=n*n,a=2*Ce(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Dt.mass,stiffness:i,damping:a}}else{const r=sm(t);e={...e,...r,mass:Dt.mass},e.isResolvedFromDuration=!0}return e}function ui(t=Dt.visualDuration,e=Dt.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:i}=r;const a=r.keyframes[0],s=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:u,damping:l,mass:c,duration:f,velocity:d,isResolvedFromDuration:h}=fm({...r,velocity:-ve(r.velocity||0)}),p=d||0,v=l/(2*Math.sqrt(u*c)),g=s-a,m=ve(Math.sqrt(u/c)),y=Math.abs(g)<5;n||(n=y?Dt.restSpeed.granular:Dt.restSpeed.default),i||(i=y?Dt.restDelta.granular:Dt.restDelta.default);let x;if(v<1){const C=Aa(m,v);x=b=>{const T=Math.exp(-v*m*b);return s-T*((p+v*m*g)/C*Math.sin(C*b)+g*Math.cos(C*b))}}else if(v===1)x=C=>s-Math.exp(-m*C)*(g+(p+m*g)*C);else{const C=m*Math.sqrt(v*v-1);x=b=>{const T=Math.exp(-v*m*b),D=Math.min(C*b,300);return s-T*((p+v*m*g)*Math.sinh(D)+C*g*Math.cosh(D))/C}}const S={calculatedDuration:h&&f||null,next:C=>{const b=x(C);if(h)o.done=C>=f;else{let T=C===0?p:0;v<1&&(T=C===0?pe(p):Yf(x,C,b));const D=Math.abs(T)<=n,w=Math.abs(s-b)<=i;o.done=D&&w}return o.value=o.done?s:b,o},toString:()=>{const C=Math.min(Us(S),oi),b=Hf(T=>S.next(C*T).value,C,30);return C+"ms "+b},toTransition:()=>{}};return S}ui.applyToOptions=t=>{const e=im(t,100,ui);return t.ease=e.ease,t.duration=pe(e.duration),t.type="keyframes",t};function Oa({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:u,restDelta:l=.5,restSpeed:c}){const f=t[0],d={done:!1,value:f},h=D=>o!==void 0&&D<o||u!==void 0&&D>u,p=D=>o===void 0?u:u===void 0||Math.abs(o-D)<Math.abs(u-D)?o:u;let v=r*e;const g=f+v,m=s===void 0?g:s(g);m!==g&&(v=m-f);const y=D=>-v*Math.exp(-D/n),x=D=>m+y(D),S=D=>{const w=y(D),E=x(D);d.done=Math.abs(w)<=l,d.value=d.done?m:E};let C,b;const T=D=>{h(d.value)&&(C=D,b=ui({keyframes:[d.value,p(d.value)],velocity:Yf(x,D,d.value),damping:i,stiffness:a,restDelta:l,restSpeed:c}))};return T(0),{calculatedDuration:null,next:D=>{let w=!1;return!b&&C===void 0&&(w=!0,S(D),T(D)),C!==void 0&&D>=C?b.next(D-C):(!w&&S(D),d)}}}function dm(t,e,r){const n=[],i=r||De.mix||Wf,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const u=Array.isArray(e)?e[s]||ie:e;o=gn(u,o)}n.push(o)}return n}function hm(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const a=t.length;if(Fs(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=dm(e,n,i),u=o.length,l=c=>{if(s&&c<t[0])return e[0];let f=0;if(u>1)for(;f<t.length-2&&!(c<t[f+1]);f++);const d=en(t[f],t[f+1],c);return o[f](d)};return r?c=>l(Ce(t[0],t[a-1],c)):l}function pm(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=en(0,e,n);t.push(Ct(r,1,i))}}function vm(t){const e=[0];return pm(e,t.length-1),e}function gm(t,e){return t.map(r=>r*e)}function mm(t,e){return t.map(()=>e||If).splice(0,t.length-1)}function Xr({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const i=P0(n)?n.map(cu):cu(n),a={done:!1,value:e[0]},s=gm(r&&r.length===e.length?r:vm(e),t),o=hm(s,e,{ease:Array.isArray(i)?i:mm(e,i)});return{calculatedDuration:t,next:u=>(a.value=o(u),a.done=u>=t,a)}}const ym=t=>t!==null;function $s(t,{repeat:e,repeatType:r="loop"},n,i=1){const a=t.filter(ym),o=i<0||e&&r!=="loop"&&e%2===1?0:a.length-1;return!o||n===void 0?a[o]:n}const xm={decay:Oa,inertia:Oa,tween:Xr,keyframes:Xr,spring:ui};function Xf(t){typeof t.type=="string"&&(t.type=xm[t.type])}class Ks{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const Sm=t=>t/100;class Zs extends Ks{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,i;const{motionValue:r}=this.options;r&&r.updatedAt!==Kt.now()&&this.tick(Kt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(n=this.options).onStop)==null||i.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Xf(e);const{type:r=Xr,repeat:n=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const u=r||Xr;u!==Xr&&typeof o[0]!="number"&&(this.mixKeyframes=gn(Sm,Wf(o[0],o[1])),o=[0,100]);const l=u({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...o].reverse(),velocity:-s})),l.calculatedDuration===null&&(l.calculatedDuration=Us(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=l}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:u}=this;if(this.startTime===null)return n.next(0);const{delay:l=0,keyframes:c,repeat:f,repeatType:d,repeatDelay:h,type:p,onUpdate:v,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const m=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?m<0:m>i;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let x=this.currentTime,S=n;if(f){const D=Math.min(this.currentTime,i)/o;let w=Math.floor(D),E=D%1;!E&&D>=1&&(E=1),E===1&&w--,w=Math.min(w,f+1),!!(w%2)&&(d==="reverse"?(E=1-E,h&&(E-=h/o)):d==="mirror"&&(S=s)),x=Ce(0,1,E)*o}const C=y?{done:!1,value:c[0]}:S.next(x);a&&(C.value=a(C.value));let{done:b}=C;!y&&u!==null&&(b=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&b);return T&&p!==Oa&&(C.value=$s(c,this.options,g,this.speed)),v&&v(C.value),T&&this.finish(),C}then(e,r){return this.finished.then(e,r)}get duration(){return ve(this.calculatedDuration)}get time(){return ve(this.currentTime)}set time(e){var r;e=pe(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Kt.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=ve(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=nm,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),(a=(i=this.options).onPlay)==null||a.call(i);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Kt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function bm(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ue=t=>t*180/Math.PI,Ia=t=>{const e=Ue(Math.atan2(t[1],t[0]));return ka(e)},Cm={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ia,rotateZ:Ia,skewX:t=>Ue(Math.atan(t[1])),skewY:t=>Ue(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ka=t=>(t=t%360,t<0&&(t+=360),t),mu=Ia,yu=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),xu=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Dm={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:yu,scaleY:xu,scale:t=>(yu(t)+xu(t))/2,rotateX:t=>ka(Ue(Math.atan2(t[6],t[5]))),rotateY:t=>ka(Ue(Math.atan2(-t[2],t[0]))),rotateZ:mu,rotate:mu,skewX:t=>Ue(Math.atan(t[4])),skewY:t=>Ue(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Ba(t){return t.includes("scale")?1:0}function Va(t,e){if(!t||t==="none")return Ba(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(r)n=Dm,i=r;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Cm,i=o}if(!i)return Ba(e);const a=n[e],s=i[1].split(",").map(Em);return typeof a=="function"?a(s):s[a]}const Tm=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return Va(r,e)};function Em(t){return parseFloat(t.trim())}const Ar=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Or=new Set(Ar),Su=t=>t===_r||t===at,wm=new Set(["x","y","z"]),Mm=Ar.filter(t=>!wm.has(t));function Pm(t){const e=[];return Mm.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const Ke={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Va(e,"x"),y:(t,{transform:e})=>Va(e,"y")};Ke.translateX=Ke.x;Ke.translateY=Ke.y;const Ze=new Set;let za=!1,Fa=!1,Ga=!1;function qf(){if(Fa){const t=Array.from(Ze).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const i=Pm(n);i.length&&(r.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([a,s])=>{var o;(o=n.getValue(a))==null||o.set(s)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Fa=!1,za=!1,Ze.forEach(t=>t.complete(Ga)),Ze.clear()}function Uf(){Ze.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Fa=!0)})}function Rm(){Ga=!0,Uf(),qf(),Ga=!1}class Js{constructor(e,r,n,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Ze.add(this),za||(za=!0,St.read(Uf),St.resolveKeyframes(qf))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(n&&r){const o=n.readValue(r,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}bm(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ze.delete(this)}cancel(){this.state==="scheduled"&&(Ze.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const _m=t=>t.startsWith("--");function Am(t,e,r){_m(e)?t.style.setProperty(e,r):t.style[e]=r}const Om=Gs(()=>window.ScrollTimeline!==void 0),Im={};function km(t,e){const r=Gs(t);return()=>Im[e]??r()}const $f=km(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zr=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,bu={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zr([0,.65,.55,1]),circOut:zr([.55,0,1,.45]),backIn:zr([.31,.01,.66,-.59]),backOut:zr([.33,1.53,.69,.99])};function Kf(t,e){if(t)return typeof t=="function"?$f()?Hf(t,e):"ease-out":kf(t)?zr(t):Array.isArray(t)?t.map(r=>Kf(r,e)||bu.easeOut):bu[t]}function Bm(t,e,r,{delay:n=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:u}={},l=void 0){const c={[e]:r};u&&(c.offset=u);const f=Kf(o,i);Array.isArray(f)&&(c.easing=f);const d={delay:n,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return l&&(d.pseudoElement=l),t.animate(c,d)}function Zf(t){return typeof t=="function"&&"applyToOptions"in t}function Vm({type:t,...e}){return Zf(t)&&$f()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class zm extends Ks{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:n,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:u}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,Fs(typeof e.type!="string");const l=Vm(e);this.animation=Bm(r,n,i,l,a),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const c=$s(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(c):Am(r,n,c),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,n;const e=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return ve(Number(e))}get time(){return ve(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=pe(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Om()?(this.animation.timeline=e,ie):r(this)}}const Jf={anticipate:_f,backInOut:Rf,circInOut:Of};function Fm(t){return t in Jf}function Gm(t){typeof t.ease=="string"&&Fm(t.ease)&&(t.ease=Jf[t.ease])}const Cu=10;class Lm extends zm{constructor(e){Gm(e),Xf(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:i,element:a,...s}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const o=new Zs({...s,autoplay:!1}),u=pe(this.finishedTime??this.time);r.setWithVelocity(o.sample(u-Cu).value,o.sample(u).value,Cu),o.stop()}}const Du=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ze.test(t)||t==="0")&&!t.startsWith("url("));function Nm(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function jm(t,e,r,n){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=Du(i,e),o=Du(a,e);return!s||!o?!1:Nm(t)||(r==="spring"||Zf(r))&&n}function Qs(t){return Cf(t)&&"offsetHeight"in t}const Wm=new Set(["opacity","clipPath","filter","transform"]),Hm=Gs(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Ym(t){var l;const{motionValue:e,name:r,repeatDelay:n,repeatType:i,damping:a,type:s}=t;if(!Qs((l=e==null?void 0:e.owner)==null?void 0:l.current))return!1;const{onUpdate:o,transformTemplate:u}=e.owner.getProps();return Hm()&&r&&Wm.has(r)&&(r!=="transform"||!u)&&!o&&!n&&i!=="mirror"&&a!==0&&s!=="inertia"}const Xm=40;class qm extends Ks{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:u,motionValue:l,element:c,...f}){var p;super(),this.stop=()=>{var v,g;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(g=this.keyframeResolver)==null||g.cancel()},this.createdAt=Kt.now();const d={autoplay:e,delay:r,type:n,repeat:i,repeatDelay:a,repeatType:s,name:u,motionValue:l,element:c,...f},h=(c==null?void 0:c.KeyframeResolver)||Js;this.keyframeResolver=new h(o,(v,g,m)=>this.onKeyframesResolved(v,g,d,!m),u,l,c),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,r,n,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:u,isHandoff:l,onUpdate:c}=n;this.resolvedAt=Kt.now(),jm(e,a,s,o)||((De.instantAnimations||!u)&&(c==null||c($s(e,n,r))),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const d={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Xm?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},h=!l&&Ym(d)?new Lm({...d,element:d.motionValue.owner.current}):new Zs(d);h.finished.then(()=>this.notifyFinished()).catch(ie),this.pendingTimeline&&(this.stopTimeline=h.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=h}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Rm()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Um=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $m(t){const e=Um.exec(t);if(!e)return[,];const[,r,n,i]=e;return[`--${r??n}`,i]}function Qf(t,e,r=1){const[n,i]=$m(t);if(!n)return;const a=window.getComputedStyle(e).getPropertyValue(n);if(a){const s=a.trim();return bf(s)?parseFloat(s):s}return Hs(i)?Qf(i,e,r+1):i}function to(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const td=new Set(["width","height","top","left","right","bottom",...Ar]),Km={test:t=>t==="auto",parse:t=>t},ed=t=>e=>e.test(t),rd=[_r,at,ge,Pe,N0,L0,Km],Tu=t=>rd.find(ed(t));function Zm(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Df(t):!0}const Jm=new Set(["brightness","contrast","saturate","opacity"]);function Qm(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(Ys)||[];if(!n)return t;const i=r.replace(n,"");let a=Jm.has(e)?1:0;return n!==r&&(a*=100),e+"("+a+i+")"}const ty=/\b([a-z-]*)\(.*?\)/gu,La={...ze,getAnimatableNone:t=>{const e=t.match(ty);return e?e.map(Qm).join(" "):t}},Eu={..._r,transform:Math.round},ey={rotate:Pe,rotateX:Pe,rotateY:Pe,rotateZ:Pe,scale:Fn,scaleX:Fn,scaleY:Fn,scaleZ:Fn,skew:Pe,skewX:Pe,skewY:Pe,distance:at,translateX:at,translateY:at,translateZ:at,x:at,y:at,z:at,perspective:at,transformPerspective:at,opacity:rn,originX:du,originY:du,originZ:at},eo={borderWidth:at,borderTopWidth:at,borderRightWidth:at,borderBottomWidth:at,borderLeftWidth:at,borderRadius:at,radius:at,borderTopLeftRadius:at,borderTopRightRadius:at,borderBottomRightRadius:at,borderBottomLeftRadius:at,width:at,maxWidth:at,height:at,maxHeight:at,top:at,right:at,bottom:at,left:at,padding:at,paddingTop:at,paddingRight:at,paddingBottom:at,paddingLeft:at,margin:at,marginTop:at,marginRight:at,marginBottom:at,marginLeft:at,backgroundPositionX:at,backgroundPositionY:at,...ey,zIndex:Eu,fillOpacity:rn,strokeOpacity:rn,numOctaves:Eu},ry={...eo,color:Pt,backgroundColor:Pt,outlineColor:Pt,fill:Pt,stroke:Pt,borderColor:Pt,borderTopColor:Pt,borderRightColor:Pt,borderBottomColor:Pt,borderLeftColor:Pt,filter:La,WebkitFilter:La},nd=t=>ry[t];function id(t,e){let r=nd(t);return r!==La&&(r=ze),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const ny=new Set(["auto","none","0"]);function iy(t,e,r){let n=0,i;for(;n<t.length&&!i;){const a=t[n];typeof a=="string"&&!ny.has(a)&&nn(a).values.length&&(i=t[n]),n++}if(i&&r)for(const a of e)t[a]=id(r,i)}class ay extends Js{constructor(e,r,n,i,a){super(e,r,n,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let l=e[u];if(typeof l=="string"&&(l=l.trim(),Hs(l))){const c=Qf(l,r.current);c!==void 0&&(e[u]=c),u===e.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!td.has(n)||e.length!==2)return;const[i,a]=e,s=Tu(i),o=Tu(a);if(s!==o)if(Su(s)&&Su(o))for(let u=0;u<e.length;u++){const l=e[u];typeof l=="string"&&(e[u]=parseFloat(l))}else Ke[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let i=0;i<e.length;i++)(e[i]===null||Zm(e[i]))&&n.push(i);n.length&&iy(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ke[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const i=e.getValue(r);i&&i.jump(this.measuredOrigin,!1);const a=n.length-1,s=n[a];n[a]=Ke[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([u,l])=>{e.getValue(u).set(l)}),this.resolveNoneKeyframes()}}function sy(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const i=(r==null?void 0:r[t])??n.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const ad=(t,e)=>e&&typeof t=="number"?e.transform(t):t,wu=30,oy=t=>!isNaN(parseFloat(t));class uy{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{var s,o;const a=Kt.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty();i&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=Kt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=oy(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Ls);const n=this.events[e].add(r);return e==="change"?()=>{n(),St.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Kt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>wu)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,wu);return Tf(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Tr(t,e){return new uy(t,e)}const{schedule:ro}=Bf(queueMicrotask,!1),oe={x:!1,y:!1};function sd(){return oe.x||oe.y}function ly(t){return t==="x"||t==="y"?oe[t]?null:(oe[t]=!0,()=>{oe[t]=!1}):oe.x||oe.y?null:(oe.x=oe.y=!0,()=>{oe.x=oe.y=!1})}function od(t,e){const r=sy(t),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[r,i,()=>n.abort()]}function Mu(t){return!(t.pointerType==="touch"||sd())}function cy(t,e,r={}){const[n,i,a]=od(t,r),s=o=>{if(!Mu(o))return;const{target:u}=o,l=e(u,o);if(typeof l!="function"||!u)return;const c=f=>{Mu(f)&&(l(f),u.removeEventListener("pointerleave",c))};u.addEventListener("pointerleave",c,i)};return n.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const ud=(t,e)=>e?t===e?!0:ud(t,e.parentElement):!1,no=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,fy=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function dy(t){return fy.has(t.tagName)||t.tabIndex!==-1}const Hn=new WeakSet;function Pu(t){return e=>{e.key==="Enter"&&t(e)}}function $i(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const hy=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=Pu(()=>{if(Hn.has(r))return;$i(r,"down");const i=Pu(()=>{$i(r,"up")}),a=()=>$i(r,"cancel");r.addEventListener("keyup",i,e),r.addEventListener("blur",a,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function Ru(t){return no(t)&&!sd()}function py(t,e,r={}){const[n,i,a]=od(t,r),s=o=>{const u=o.currentTarget;if(!Ru(o))return;Hn.add(u);const l=e(u,o),c=(h,p)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",d),Hn.has(u)&&Hn.delete(u),Ru(h)&&typeof l=="function"&&l(h,{success:p})},f=h=>{c(h,u===window||u===document||r.useGlobalTarget||ud(u,h.target))},d=h=>{c(h,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",d,i)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),Qs(o)&&(o.addEventListener("focus",l=>hy(l,i)),!dy(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function ld(t){return Cf(t)&&"ownerSVGElement"in t}function vy(t){return ld(t)&&t.tagName==="svg"}const Gt=t=>!!(t&&t.getVelocity),gy=[...rd,Pt,ze],my=t=>gy.find(ed(t)),io=L.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class yy extends L.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=r.offsetParent,i=Qs(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function xy({children:t,isPresent:e,anchorX:r,root:n}){const i=L.useId(),a=L.useRef(null),s=L.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=L.useContext(io);return L.useInsertionEffect(()=>{const{width:u,height:l,top:c,left:f,right:d}=s.current;if(e||!a.current||!u||!l)return;const h=r==="left"?`left: ${f}`:`right: ${d}`;a.current.dataset.motionPopId=i;const p=document.createElement("style");o&&(p.nonce=o);const v=n??document.head;return v.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${l}px !important;
            ${h}px !important;
            top: ${c}px !important;
          }
        `),()=>{v.removeChild(p),v.contains(p)&&v.removeChild(p)}},[e]),W.jsx(yy,{isPresent:e,childRef:a,sizeRef:s,children:L.cloneElement(t,{ref:a})})}const Sy=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,root:u})=>{const l=ks(by),c=L.useId();let f=!0,d=L.useMemo(()=>(f=!1,{id:c,initial:e,isPresent:r,custom:i,onExitComplete:h=>{l.set(h,!0);for(const p of l.values())if(!p)return;n&&n()},register:h=>(l.set(h,!1),()=>l.delete(h))}),[r,l,n]);return a&&f&&(d={...d}),L.useMemo(()=>{l.forEach((h,p)=>l.set(p,!1))},[r]),L.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),s==="popLayout"&&(t=W.jsx(xy,{isPresent:r,anchorX:o,root:u,children:t})),W.jsx(bi.Provider,{value:d,children:t})};function by(){return new Map}function cd(t=!0){const e=L.useContext(bi);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:i}=e,a=L.useId();L.useEffect(()=>{if(t)return i(a)},[t]);const s=L.useCallback(()=>t&&n&&n(a),[a,n,t]);return!r&&n?[!1,s]:[!0]}const Gn=t=>t.key||"";function _u(t){const e=[];return L.Children.forEach(t,r=>{L.isValidElement(r)&&e.push(r)}),e}const Au=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",root:u})=>{const[l,c]=cd(s),f=L.useMemo(()=>_u(t),[t]),d=s&&!l?[]:f.map(Gn),h=L.useRef(!0),p=L.useRef(f),v=ks(()=>new Map),[g,m]=L.useState(f),[y,x]=L.useState(f);Sf(()=>{h.current=!1,p.current=f;for(let b=0;b<y.length;b++){const T=Gn(y[b]);d.includes(T)?v.delete(T):v.get(T)!==!0&&v.set(T,!1)}},[y,d.length,d.join("-")]);const S=[];if(f!==g){let b=[...f];for(let T=0;T<y.length;T++){const D=y[T],w=Gn(D);d.includes(w)||(b.splice(T,0,D),S.push(D))}return a==="wait"&&S.length&&(b=S),x(_u(b)),m(f),null}const{forceRender:C}=L.useContext(Is);return W.jsx(W.Fragment,{children:y.map(b=>{const T=Gn(b),D=s&&!l?!1:f===y||d.includes(T),w=()=>{if(v.has(T))v.set(T,!0);else return;let E=!0;v.forEach(A=>{A||(E=!1)}),E&&(C==null||C(),x(p.current),s&&(c==null||c()),n&&n())};return W.jsx(Sy,{isPresent:D,initial:!h.current||r?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:D?void 0:w,anchorX:o,children:b},T)})})},fd=L.createContext({strict:!1}),Ou={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Er={};for(const t in Ou)Er[t]={isEnabled:e=>Ou[t].some(r=>!!e[r])};function Cy(t){for(const e in t)Er[e]={...Er[e],...t[e]}}const Dy=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function li(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Dy.has(t)}let dd=t=>!li(t);function Ty(t){typeof t=="function"&&(dd=e=>e.startsWith("on")?!li(e):t(e))}try{Ty(require("@emotion/is-prop-valid").default)}catch{}function Ey(t,e,r){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(dd(i)||r===!0&&li(i)||!e&&!li(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}function wy(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...n)=>t(...n);return new Proxy(r,{get:(n,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Ci=L.createContext({});function Di(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function an(t){return typeof t=="string"||Array.isArray(t)}const ao=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],so=["initial",...ao];function Ti(t){return Di(t.animate)||so.some(e=>an(t[e]))}function hd(t){return!!(Ti(t)||t.variants)}function My(t,e){if(Ti(t)){const{initial:r,animate:n}=t;return{initial:r===!1||an(r)?r:void 0,animate:an(n)?n:void 0}}return t.inherit!==!1?e:{}}function Py(t){const{initial:e,animate:r}=My(t,L.useContext(Ci));return L.useMemo(()=>({initial:e,animate:r}),[Iu(e),Iu(r)])}function Iu(t){return Array.isArray(t)?t.join(" "):t}const Ry=Symbol.for("motionComponentSymbol");function hr(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function _y(t,e,r){return L.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):hr(r)&&(r.current=n))},[e])}const oo=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Ay="framerAppearId",pd="data-"+oo(Ay),vd=L.createContext({});function Oy(t,e,r,n,i){var v,g;const{visualElement:a}=L.useContext(Ci),s=L.useContext(fd),o=L.useContext(bi),u=L.useContext(io).reducedMotion,l=L.useRef(null);n=n||s.renderer,!l.current&&n&&(l.current=n(t,{visualState:e,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:u}));const c=l.current,f=L.useContext(vd);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&Iy(l.current,r,i,f);const d=L.useRef(!1);L.useInsertionEffect(()=>{c&&d.current&&c.update(r,o)});const h=r[pd],p=L.useRef(!!h&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,h))&&((g=window.MotionHasOptimisedAnimation)==null?void 0:g.call(window,h)));return Sf(()=>{c&&(d.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),ro.render(c.render),p.current&&c.animationState&&c.animationState.animateChanges())}),L.useEffect(()=>{c&&(!p.current&&c.animationState&&c.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)==null||m.call(window,h)}),p.current=!1))}),c}function Iy(t,e,r,n){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:u,layoutRoot:l,layoutCrossfade:c}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:gd(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&hr(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:c,layoutScroll:u,layoutRoot:l})}function gd(t){if(t)return t.options.allowProjection!==!1?t.projection:gd(t.parent)}function ky({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:i}){t&&Cy(t);function a(o,u){let l;const c={...L.useContext(io),...o,layoutId:By(o)},{isStatic:f}=c,d=Py(o),h=n(o,f);if(!f&&Bs){Vy();const p=zy(c);l=p.MeasureLayout,d.visualElement=Oy(i,h,c,e,p.ProjectionNode)}return W.jsxs(Ci.Provider,{value:d,children:[l&&d.visualElement?W.jsx(l,{visualElement:d.visualElement,...c}):null,r(i,o,_y(h,d.visualElement,u),h,f,d.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const s=L.forwardRef(a);return s[Ry]=i,s}function By({layoutId:t}){const e=L.useContext(Is).id;return e&&t!==void 0?e+"-"+t:t}function Vy(t,e){L.useContext(fd).strict}function zy(t){const{drag:e,layout:r}=Er;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const sn={};function Fy(t){for(const e in t)sn[e]=t[e],Ws(e)&&(sn[e].isCSSVariable=!0)}function md(t,{layout:e,layoutId:r}){return Or.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!sn[t]||t==="opacity")}const Gy={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ly=Ar.length;function Ny(t,e,r){let n="",i=!0;for(let a=0;a<Ly;a++){const s=Ar[a],o=t[s];if(o===void 0)continue;let u=!0;if(typeof o=="number"?u=o===(s.startsWith("scale")?1:0):u=parseFloat(o)===0,!u||r){const l=ad(o,eo[s]);if(!u){i=!1;const c=Gy[s]||s;n+=`${c}(${l}) `}r&&(e[s]=l)}}return n=n.trim(),r?n=r(e,i?"":n):i&&(n="none"),n}function uo(t,e,r){const{style:n,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const u in e){const l=e[u];if(Or.has(u)){s=!0;continue}else if(Ws(u)){i[u]=l;continue}else{const c=ad(l,eo[u]);u.startsWith("origin")?(o=!0,a[u]=c):n[u]=c}}if(e.transform||(s||r?n.transform=Ny(e,t.transform,r):n.transform&&(n.transform="none")),o){const{originX:u="50%",originY:l="50%",originZ:c=0}=a;n.transformOrigin=`${u} ${l} ${c}`}}const lo=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function yd(t,e,r){for(const n in e)!Gt(e[n])&&!md(n,r)&&(t[n]=e[n])}function jy({transformTemplate:t},e){return L.useMemo(()=>{const r=lo();return uo(r,e,t),Object.assign({},r.vars,r.style)},[e])}function Wy(t,e){const r=t.style||{},n={};return yd(n,r,t),Object.assign(n,jy(t,e)),n}function Hy(t,e){const r={},n=Wy(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const Yy={offset:"stroke-dashoffset",array:"stroke-dasharray"},Xy={offset:"strokeDashoffset",array:"strokeDasharray"};function qy(t,e,r=1,n=0,i=!0){t.pathLength=1;const a=i?Yy:Xy;t[a.offset]=at.transform(-n);const s=at.transform(e),o=at.transform(r);t[a.array]=`${s} ${o}`}function xd(t,{attrX:e,attrY:r,attrScale:n,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},u,l,c){if(uo(t,o,l),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:d}=t;f.transform&&(d.transform=f.transform,delete f.transform),(d.transform||f.transformOrigin)&&(d.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),d.transform&&(d.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),i!==void 0&&qy(f,i,a,s,!1)}const Sd=()=>({...lo(),attrs:{}}),bd=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Uy(t,e,r,n){const i=L.useMemo(()=>{const a=Sd();return xd(a,e,bd(n),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};yd(a,t.style,t),i.style={...a,...i.style}}return i}const $y=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function co(t){return typeof t!="string"||t.includes("-")?!1:!!($y.indexOf(t)>-1||/[A-Z]/u.test(t))}function Ky(t=!1){return(r,n,i,{latestValues:a},s)=>{const u=(co(r)?Uy:Hy)(n,a,s,r),l=Ey(n,typeof r=="string",t),c=r!==L.Fragment?{...l,...u,ref:i}:{},{children:f}=n,d=L.useMemo(()=>Gt(f)?f.get():f,[f]);return L.createElement(r,{...c,children:d})}}function ku(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function fo(t,e,r,n){if(typeof e=="function"){const[i,a]=ku(n);e=e(r!==void 0?r:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=ku(n);e=e(r!==void 0?r:t.custom,i,a)}return e}function Yn(t){return Gt(t)?t.get():t}function Zy({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,i){return{latestValues:Jy(r,n,i,t),renderState:e()}}const Cd=t=>(e,r)=>{const n=L.useContext(Ci),i=L.useContext(bi),a=()=>Zy(t,e,n,i);return r?a():ks(a)};function Jy(t,e,r,n){const i={},a=n(t,{});for(const d in a)i[d]=Yn(a[d]);let{initial:s,animate:o}=t;const u=Ti(t),l=hd(t);e&&l&&!u&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let c=r?r.initial===!1:!1;c=c||s===!1;const f=c?o:s;if(f&&typeof f!="boolean"&&!Di(f)){const d=Array.isArray(f)?f:[f];for(let h=0;h<d.length;h++){const p=fo(t,d[h]);if(p){const{transitionEnd:v,transition:g,...m}=p;for(const y in m){let x=m[y];if(Array.isArray(x)){const S=c?x.length-1:0;x=x[S]}x!==null&&(i[y]=x)}for(const y in v)i[y]=v[y]}}}return i}function ho(t,e,r){var a;const{style:n}=t,i={};for(const s in n)(Gt(n[s])||e.style&&Gt(e.style[s])||md(s,t)||((a=r==null?void 0:r.getValue(s))==null?void 0:a.liveStyle)!==void 0)&&(i[s]=n[s]);return i}const Qy={useVisualState:Cd({scrapeMotionValuesFromProps:ho,createRenderState:lo})};function Dd(t,e,r){const n=ho(t,e,r);for(const i in t)if(Gt(t[i])||Gt(e[i])){const a=Ar.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=t[i]}return n}const t1={useVisualState:Cd({scrapeMotionValuesFromProps:Dd,createRenderState:Sd})};function e1(t,e){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...co(n)?t1:Qy,preloadedFeatures:t,useRender:Ky(i),createVisualElement:e,Component:n};return ky(s)}}function on(t,e,r){const n=t.getProps();return fo(n,e,r!==void 0?r:n.custom,t)}const Na=t=>Array.isArray(t);function r1(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Tr(r))}function n1(t){return Na(t)?t[t.length-1]||0:t}function i1(t,e){const r=on(t,e);let{transitionEnd:n={},transition:i={},...a}=r||{};a={...a,...n};for(const s in a){const o=n1(a[s]);r1(t,s,o)}}function a1(t){return!!(Gt(t)&&t.add)}function ja(t,e){const r=t.getValue("willChange");if(a1(r))return r.add(e);if(!r&&De.WillChange){const n=new De.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function Td(t){return t.props[pd]}const s1=t=>t!==null;function o1(t,{repeat:e,repeatType:r="loop"},n){const i=t.filter(s1),a=e&&r!=="loop"&&e%2===1?0:i.length-1;return i[a]}const u1={type:"spring",stiffness:500,damping:25,restSpeed:10},l1=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),c1={type:"keyframes",duration:.8},f1={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},d1=(t,{keyframes:e})=>e.length>2?c1:Or.has(t)?t.startsWith("scale")?l1(e[1]):u1:f1;function h1({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:u,elapsed:l,...c}){return!!Object.keys(c).length}const po=(t,e,r,n={},i,a)=>s=>{const o=to(n,t)||{},u=o.delay||n.delay||0;let{elapsed:l=0}=n;l=l-pe(u);const c={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-l,onUpdate:d=>{e.set(d),o.onUpdate&&o.onUpdate(d)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};h1(o)||Object.assign(c,d1(t,c)),c.duration&&(c.duration=pe(c.duration)),c.repeatDelay&&(c.repeatDelay=pe(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(f=!0)),(De.instantAnimations||De.skipAnimations)&&(f=!0,c.duration=0,c.delay=0),c.allowFlatten=!o.type&&!o.ease,f&&!a&&e.get()!==void 0){const d=o1(c.keyframes,o);if(d!==void 0){St.update(()=>{c.onUpdate(d),c.onComplete()});return}}return o.isSync?new Zs(c):new qm(c)};function p1({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function Ed(t,e,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=e;n&&(a=n);const u=[],l=i&&t.animationState&&t.animationState.getState()[i];for(const c in o){const f=t.getValue(c,t.latestValues[c]??null),d=o[c];if(d===void 0||l&&p1(l,c))continue;const h={delay:r,...to(a||{},c)},p=f.get();if(p!==void 0&&!f.isAnimating&&!Array.isArray(d)&&d===p&&!h.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const m=Td(t);if(m){const y=window.MotionHandoffAnimation(m,c,St);y!==null&&(h.startTime=y,v=!0)}}ja(t,c),f.start(po(c,f,d,t.shouldReduceMotion&&td.has(c)?{type:!1}:h,t,v));const g=f.animation;g&&u.push(g)}return s&&Promise.all(u).then(()=>{St.update(()=>{s&&i1(t,s)})}),u}function Wa(t,e,r={}){var u;const n=on(t,e,r.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);const a=n?()=>Promise.all(Ed(t,n,r)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:d}=i;return v1(t,e,l,c,f,d,r)}:()=>Promise.resolve(),{when:o}=i;if(o){const[l,c]=o==="beforeChildren"?[a,s]:[s,a];return l().then(()=>c())}else return Promise.all([a(),s(r.delay)])}function v1(t,e,r=0,n=0,i=0,a=1,s){const o=[],u=t.variantChildren.size,l=(u-1)*i,c=typeof n=="function",f=c?d=>n(d,u):a===1?(d=0)=>d*i:(d=0)=>l-d*i;return Array.from(t.variantChildren).sort(g1).forEach((d,h)=>{d.notify("AnimationStart",e),o.push(Wa(d,e,{...s,delay:r+(c?0:n)+f(h)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function g1(t,e){return t.sortNodePosition(e)}function m1(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(a=>Wa(t,a,r));n=Promise.all(i)}else if(typeof e=="string")n=Wa(t,e,r);else{const i=typeof e=="function"?on(t,e,r.custom):e;n=Promise.all(Ed(t,i,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}function wd(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const y1=so.length;function Md(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?Md(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<y1;r++){const n=so[r],i=t.props[n];(an(i)||i===!1)&&(e[n]=i)}return e}const x1=[...ao].reverse(),S1=ao.length;function b1(t){return e=>Promise.all(e.map(({animation:r,options:n})=>m1(t,r,n)))}function C1(t){let e=b1(t),r=Bu(),n=!0;const i=u=>(l,c)=>{var d;const f=on(t,c,u==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);if(f){const{transition:h,transitionEnd:p,...v}=f;l={...l,...v,...p}}return l};function a(u){e=u(t)}function s(u){const{props:l}=t,c=Md(t.parent)||{},f=[],d=new Set;let h={},p=1/0;for(let g=0;g<S1;g++){const m=x1[g],y=r[m],x=l[m]!==void 0?l[m]:c[m],S=an(x),C=m===u?y.isActive:null;C===!1&&(p=g);let b=x===c[m]&&x!==l[m]&&S;if(b&&n&&t.manuallyAnimateOnMount&&(b=!1),y.protectedKeys={...h},!y.isActive&&C===null||!x&&!y.prevProp||Di(x)||typeof x=="boolean")continue;const T=D1(y.prevProp,x);let D=T||m===u&&y.isActive&&!b&&S||g>p&&S,w=!1;const E=Array.isArray(x)?x:[x];let A=E.reduce(i(m),{});C===!1&&(A={});const{prevResolvedValues:_={}}=y,R={..._,...A},I=B=>{D=!0,d.has(B)&&(w=!0,d.delete(B)),y.needsAnimating[B]=!0;const F=t.getValue(B);F&&(F.liveStyle=!1)};for(const B in R){const F=A[B],G=_[B];if(h.hasOwnProperty(B))continue;let j=!1;Na(F)&&Na(G)?j=!wd(F,G):j=F!==G,j?F!=null?I(B):d.add(B):F!==void 0&&d.has(B)?I(B):y.protectedKeys[B]=!0}y.prevProp=x,y.prevResolvedValues=A,y.isActive&&(h={...h,...A}),n&&t.blockInitialAnimation&&(D=!1),D&&(!(b&&T)||w)&&f.push(...E.map(B=>({animation:B,options:{type:m}})))}if(d.size){const g={};if(typeof l.initial!="boolean"){const m=on(t,Array.isArray(l.initial)?l.initial[0]:l.initial);m&&m.transition&&(g.transition=m.transition)}d.forEach(m=>{const y=t.getBaseTarget(m),x=t.getValue(m);x&&(x.liveStyle=!0),g[m]=y??null}),f.push({animation:g})}let v=!!f.length;return n&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(v=!1),n=!1,v?e(f):Promise.resolve()}function o(u,l){var f;if(r[u].isActive===l)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(d=>{var h;return(h=d.animationState)==null?void 0:h.setActive(u,l)}),r[u].isActive=l;const c=s(u);for(const d in r)r[d].protectedKeys={};return c}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>r,reset:()=>{r=Bu(),n=!0}}}function D1(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!wd(e,t):!1}function Le(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Bu(){return{animate:Le(!0),whileInView:Le(),whileHover:Le(),whileTap:Le(),whileDrag:Le(),whileFocus:Le(),exit:Le()}}class Ge{constructor(e){this.isMounted=!1,this.node=e}update(){}}class T1 extends Ge{constructor(e){super(e),e.animationState||(e.animationState=C1(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Di(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let E1=0;class w1 extends Ge{constructor(){super(...arguments),this.id=E1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);r&&!e&&i.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const M1={animation:{Feature:T1},exit:{Feature:w1}};function un(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function xn(t){return{point:{x:t.pageX,y:t.pageY}}}const P1=t=>e=>no(e)&&t(e,xn(e));function qr(t,e,r,n){return un(t,e,P1(r),n)}function Pd({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function R1({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function _1(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}const Rd=1e-4,A1=1-Rd,O1=1+Rd,_d=.01,I1=0-_d,k1=0+_d;function Xt(t){return t.max-t.min}function B1(t,e,r){return Math.abs(t-e)<=r}function Vu(t,e,r,n=.5){t.origin=n,t.originPoint=Ct(e.min,e.max,t.origin),t.scale=Xt(r)/Xt(e),t.translate=Ct(r.min,r.max,t.origin)-t.originPoint,(t.scale>=A1&&t.scale<=O1||isNaN(t.scale))&&(t.scale=1),(t.translate>=I1&&t.translate<=k1||isNaN(t.translate))&&(t.translate=0)}function Ur(t,e,r,n){Vu(t.x,e.x,r.x,n?n.originX:void 0),Vu(t.y,e.y,r.y,n?n.originY:void 0)}function zu(t,e,r){t.min=r.min+e.min,t.max=t.min+Xt(e)}function V1(t,e,r){zu(t.x,e.x,r.x),zu(t.y,e.y,r.y)}function Fu(t,e,r){t.min=e.min-r.min,t.max=t.min+Xt(e)}function $r(t,e,r){Fu(t.x,e.x,r.x),Fu(t.y,e.y,r.y)}const Gu=()=>({translate:0,scale:1,origin:0,originPoint:0}),pr=()=>({x:Gu(),y:Gu()}),Lu=()=>({min:0,max:0}),Tt=()=>({x:Lu(),y:Lu()});function re(t){return[t("x"),t("y")]}function Ki(t){return t===void 0||t===1}function Ha({scale:t,scaleX:e,scaleY:r}){return!Ki(t)||!Ki(e)||!Ki(r)}function Ne(t){return Ha(t)||Ad(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Ad(t){return Nu(t.x)||Nu(t.y)}function Nu(t){return t&&t!=="0%"}function ci(t,e,r){const n=t-r,i=e*n;return r+i}function ju(t,e,r,n,i){return i!==void 0&&(t=ci(t,i,n)),ci(t,r,n)+e}function Ya(t,e=0,r=1,n,i){t.min=ju(t.min,e,r,n,i),t.max=ju(t.max,e,r,n,i)}function Od(t,{x:e,y:r}){Ya(t.x,e.translate,e.scale,e.originPoint),Ya(t.y,r.translate,r.scale,r.originPoint)}const Wu=.999999999999,Hu=1.0000000000001;function z1(t,e,r,n=!1){const i=r.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=r[o],s=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&gr(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,Od(t,s)),n&&Ne(a.latestValues)&&gr(t,a.latestValues))}e.x<Hu&&e.x>Wu&&(e.x=1),e.y<Hu&&e.y>Wu&&(e.y=1)}function vr(t,e){t.min=t.min+e,t.max=t.max+e}function Yu(t,e,r,n,i=.5){const a=Ct(t.min,t.max,i);Ya(t,e,r,a,n)}function gr(t,e){Yu(t.x,e.x,e.scaleX,e.scale,e.originX),Yu(t.y,e.y,e.scaleY,e.scale,e.originY)}function Id(t,e){return Pd(_1(t.getBoundingClientRect(),e))}function F1(t,e,r){const n=Id(t,r),{scroll:i}=e;return i&&(vr(n.x,i.offset.x),vr(n.y,i.offset.y)),n}const kd=({current:t})=>t?t.ownerDocument.defaultView:null,Xu=(t,e)=>Math.abs(t-e);function G1(t,e){const r=Xu(t.x,e.x),n=Xu(t.y,e.y);return Math.sqrt(r**2+n**2)}class Bd{constructor(e,r,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Ji(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=G1(d.offset,{x:0,y:0})>=this.distanceThreshold;if(!h&&!p)return;const{point:v}=d,{timestamp:g}=Vt;this.history.push({...v,timestamp:g});const{onStart:m,onMove:y}=this.handlers;h||(m&&m(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Zi(h,this.transformPagePoint),St.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:p,onSessionEnd:v,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Ji(d.type==="pointercancel"?this.lastMoveEventInfo:Zi(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,m),v&&v(d,m)},!no(e))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=s,this.contextWindow=i||window;const o=xn(e),u=Zi(o,this.transformPagePoint),{point:l}=u,{timestamp:c}=Vt;this.history=[{...l,timestamp:c}];const{onSessionStart:f}=r;f&&f(e,Ji(u,this.history)),this.removeListeners=gn(qr(this.contextWindow,"pointermove",this.handlePointerMove),qr(this.contextWindow,"pointerup",this.handlePointerUp),qr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ve(this.updatePoint)}}function Zi(t,e){return e?{point:e(t.point)}:t}function qu(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ji({point:t},e){return{point:t,delta:qu(t,Vd(e)),offset:qu(t,L1(e)),velocity:N1(e,.1)}}function L1(t){return t[0]}function Vd(t){return t[t.length-1]}function N1(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const i=Vd(t);for(;r>=0&&(n=t[r],!(i.timestamp-n.timestamp>pe(e)));)r--;if(!n)return{x:0,y:0};const a=ve(i.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function j1(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?Ct(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?Ct(r,t,n.max):Math.min(t,r)),t}function Uu(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function W1(t,{top:e,left:r,bottom:n,right:i}){return{x:Uu(t.x,r,i),y:Uu(t.y,e,n)}}function $u(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function H1(t,e){return{x:$u(t.x,e.x),y:$u(t.y,e.y)}}function Y1(t,e){let r=.5;const n=Xt(t),i=Xt(e);return i>n?r=en(e.min,e.max-n,t.min):n>i&&(r=en(t.min,t.max-i,e.min)),Ce(0,1,r)}function X1(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const Xa=.35;function q1(t=Xa){return t===!1?t=0:t===!0&&(t=Xa),{x:Ku(t,"left","right"),y:Ku(t,"top","bottom")}}function Ku(t,e,r){return{min:Zu(t,e),max:Zu(t,r)}}function Zu(t,e){return typeof t=="number"?t:t[e]||0}const U1=new WeakMap;class $1{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(xn(f).point)},s=(f,d)=>{const{drag:h,dragPropagation:p,onDragStart:v}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ly(h),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=d,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),re(m=>{let y=this.getAxisMotionValue(m).get()||0;if(ge.test(y)){const{projection:x}=this.visualElement;if(x&&x.layout){const S=x.layout.layoutBox[m];S&&(y=Xt(S)*(parseFloat(y)/100))}}this.originPoint[m]=y}),v&&St.postRender(()=>v(f,d)),ja(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(f,d)=>{this.latestPointerEvent=f,this.latestPanInfo=d;const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:v,onDrag:g}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:m}=d;if(p&&this.currentDirection===null){this.currentDirection=K1(m),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,m),this.updateAxis("y",d.point,m),this.visualElement.render(),g&&g(f,d)},u=(f,d)=>{this.latestPointerEvent=f,this.latestPanInfo=d,this.stop(f,d),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>re(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)==null?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Bd(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:u,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:n,contextWindow:kd(this.visualElement)})}stop(e,r){const n=e||this.latestPointerEvent,i=r||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!n)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&St.postRender(()=>o(n,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:i}=this.getProps();if(!n||!Ln(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=j1(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&hr(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=W1(n.layoutBox,e):this.constraints=!1,this.elastic=q1(r),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&re(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=X1(n.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!hr(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=F1(n,i.root,this.visualElement.getTransformPagePoint());let s=H1(i.layout.layoutBox,a);if(r){const o=r(R1(s));this.hasMutatedConstraints=!!o,o&&(s=Pd(o))}return s}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),u=this.constraints||{},l=re(c=>{if(!Ln(c,r,this.currentDirection))return;let f=u&&u[c]||{};s&&(f={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:n?e[c]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(l).then(o)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return ja(this.visualElement,e),n.start(po(e,n,0,r,this.visualElement,!1))}stopAnimation(){re(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){re(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){re(r=>{const{drag:n}=this.getProps();if(!Ln(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(r);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[r];a.set(e[r]-Ct(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!hr(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};re(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const u=o.get();i[s]=Y1({min:u,max:u},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),re(s=>{if(!Ln(s,e,null))return;const o=this.getAxisMotionValue(s),{min:u,max:l}=this.constraints[s];o.set(Ct(u,l,i[s]))})}addListeners(){if(!this.visualElement.current)return;U1.set(this.visualElement,this);const e=this.visualElement.current,r=qr(e,"pointerdown",u=>{const{drag:l,dragListener:c=!0}=this.getProps();l&&c&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();hr(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),St.read(n);const s=un(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:l})=>{this.isDragging&&l&&(re(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=u[c].translate,f.set(f.get()+u[c].translate))}),this.visualElement.render())});return()=>{s(),r(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=Xa,dragMomentum:o=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function Ln(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function K1(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class Z1 extends Ge{constructor(e){super(e),this.removeGroupControls=ie,this.removeListeners=ie,this.controls=new $1(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ie}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ju=t=>(e,r)=>{t&&St.postRender(()=>t(e,r))};class J1 extends Ge{constructor(){super(...arguments),this.removePointerDownListener=ie}onPointerDown(e){this.session=new Bd(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kd(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Ju(e),onStart:Ju(r),onMove:n,onEnd:(a,s)=>{delete this.session,i&&St.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=qr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Xn={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Qu(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ir={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(at.test(t))t=parseFloat(t);else return t;const r=Qu(t,e.target.x),n=Qu(t,e.target.y);return`${r}% ${n}%`}},Q1={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,i=ze.parse(t);if(i.length>5)return n;const a=ze.createTransformer(t),s=typeof i[0]!="number"?1:0,o=r.x.scale*e.x,u=r.y.scale*e.y;i[0+s]/=o,i[1+s]/=u;const l=Ct(o,u,.5);return typeof i[2+s]=="number"&&(i[2+s]/=l),typeof i[3+s]=="number"&&(i[3+s]/=l),a(i)}};let tl=!1;class tx extends L.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=e;Fy(ex),a&&(r.group&&r.group.add(a),n&&n.register&&i&&n.register(a),tl&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Xn.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:i,isPresent:a}=this.props,{projection:s}=n;return s&&(s.isPresent=a,tl=!0,i||e.layoutDependency!==r||r===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||St.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ro.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function zd(t){const[e,r]=cd(),n=L.useContext(Is);return W.jsx(tx,{...t,layoutGroup:n,switchLayoutGroup:L.useContext(vd),isPresent:e,safeToRemove:r})}const ex={borderRadius:{...Ir,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ir,borderTopRightRadius:Ir,borderBottomLeftRadius:Ir,borderBottomRightRadius:Ir,boxShadow:Q1};function rx(t,e,r){const n=Gt(t)?t:Tr(t);return n.start(po("",n,e,r)),n.animation}const nx=(t,e)=>t.depth-e.depth;class ix{constructor(){this.children=[],this.isDirty=!1}add(e){Vs(this.children,e),this.isDirty=!0}remove(e){zs(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(nx),this.isDirty=!1,this.children.forEach(e)}}function ax(t,e){const r=Kt.now(),n=({timestamp:i})=>{const a=i-r;a>=e&&(Ve(n),t(a-e))};return St.setup(n,!0),()=>Ve(n)}const Fd=["TopLeft","TopRight","BottomLeft","BottomRight"],sx=Fd.length,el=t=>typeof t=="string"?parseFloat(t):t,rl=t=>typeof t=="number"||at.test(t);function ox(t,e,r,n,i,a){i?(t.opacity=Ct(0,r.opacity??1,ux(n)),t.opacityExit=Ct(e.opacity??1,0,lx(n))):a&&(t.opacity=Ct(e.opacity??1,r.opacity??1,n));for(let s=0;s<sx;s++){const o=`border${Fd[s]}Radius`;let u=nl(e,o),l=nl(r,o);if(u===void 0&&l===void 0)continue;u||(u=0),l||(l=0),u===0||l===0||rl(u)===rl(l)?(t[o]=Math.max(Ct(el(u),el(l),n),0),(ge.test(l)||ge.test(u))&&(t[o]+="%")):t[o]=l}(e.rotate||r.rotate)&&(t.rotate=Ct(e.rotate||0,r.rotate||0,n))}function nl(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const ux=Gd(0,.5,Af),lx=Gd(.5,.95,ie);function Gd(t,e,r){return n=>n<t?0:n>e?1:r(en(t,e,n))}function il(t,e){t.min=e.min,t.max=e.max}function ee(t,e){il(t.x,e.x),il(t.y,e.y)}function al(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function sl(t,e,r,n,i){return t-=e,t=ci(t,1/r,n),i!==void 0&&(t=ci(t,1/i,n)),t}function cx(t,e=0,r=1,n=.5,i,a=t,s=t){if(ge.test(e)&&(e=parseFloat(e),e=Ct(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Ct(a.min,a.max,n);t===a&&(o-=e),t.min=sl(t.min,e,r,o,i),t.max=sl(t.max,e,r,o,i)}function ol(t,e,[r,n,i],a,s){cx(t,e[r],e[n],e[i],e.scale,a,s)}const fx=["x","scaleX","originX"],dx=["y","scaleY","originY"];function ul(t,e,r,n){ol(t.x,e,fx,r?r.x:void 0,n?n.x:void 0),ol(t.y,e,dx,r?r.y:void 0,n?n.y:void 0)}function ll(t){return t.translate===0&&t.scale===1}function Ld(t){return ll(t.x)&&ll(t.y)}function cl(t,e){return t.min===e.min&&t.max===e.max}function hx(t,e){return cl(t.x,e.x)&&cl(t.y,e.y)}function fl(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Nd(t,e){return fl(t.x,e.x)&&fl(t.y,e.y)}function dl(t){return Xt(t.x)/Xt(t.y)}function hl(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class px{constructor(){this.members=[]}add(e){Vs(this.members,e),e.scheduleRender()}remove(e){if(zs(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vx(t,e,r){let n="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=(r==null?void 0:r.z)||0;if((i||a||s)&&(n=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:l,rotate:c,rotateX:f,rotateY:d,skewX:h,skewY:p}=r;l&&(n=`perspective(${l}px) ${n}`),c&&(n+=`rotate(${c}deg) `),f&&(n+=`rotateX(${f}deg) `),d&&(n+=`rotateY(${d}deg) `),h&&(n+=`skewX(${h}deg) `),p&&(n+=`skewY(${p}deg) `)}const o=t.x.scale*e.x,u=t.y.scale*e.y;return(o!==1||u!==1)&&(n+=`scale(${o}, ${u})`),n||"none"}const Qi=["","X","Y","Z"],gx=1e3;let mx=0;function ta(t,e,r,n){const{latestValues:i}=e;i[t]&&(r[t]=i[t],e.setStaticValue(t,0),n&&(n[t]=0))}function jd(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=Td(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",St,!(i||a))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&jd(n)}function Wd({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=mx++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Sx),this.nodes.forEach(Tx),this.nodes.forEach(Ex),this.nodes.forEach(bx)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new ix)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Ls),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const u=this.eventHandlers.get(s);u&&u.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=ld(s)&&!vy(s),this.instance=s;const{layoutId:o,layout:u,visualElement:l}=this.options;if(l&&!l.current&&l.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||o)&&(this.isLayoutDirty=!0),t){let c,f=0;const d=()=>this.root.updateBlockedByResize=!1;St.read(()=>{f=window.innerWidth}),t(s,()=>{const h=window.innerWidth;h!==f&&(f=h,this.root.updateBlockedByResize=!0,c&&c(),c=ax(d,250),Xn.hasAnimatedSinceResize&&(Xn.hasAnimatedSinceResize=!1,this.nodes.forEach(gl)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&l&&(o||u)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:d,layout:h})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||l.getDefaultTransition()||_x,{onLayoutAnimationStart:v,onLayoutAnimationComplete:g}=l.getProps(),m=!this.targetLayout||!Nd(this.targetLayout,h),y=!f&&d;if(this.options.layoutRoot||this.resumeFrom||y||f&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...to(p,"layout"),onPlay:v,onComplete:g};(l.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(c,y)}else f||gl(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=h})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ve(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(wx),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&jd(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:u}=this.options;if(o===void 0&&!u)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(pl);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vl);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Dx),this.nodes.forEach(yx),this.nodes.forEach(xx)):this.nodes.forEach(vl),this.clearAllSnapshots();const o=Kt.now();Vt.delta=Ce(0,1e3/60,o-Vt.timestamp),Vt.timestamp=o,Vt.isProcessing=!0,Hi.update.process(Vt),Hi.preRender.process(Vt),Hi.render.process(Vt),Vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ro.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Cx),this.sharedNodes.forEach(Mx)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,St.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){St.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Xt(this.snapshot.measuredBox.x)&&!Xt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const u=n(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:u,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Ld(this.projectionDelta),u=this.getTransformTemplate(),l=u?u(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;s&&this.instance&&(o||Ne(this.latestValues)||c)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let u=this.removeElementScroll(o);return s&&(u=this.removeTransform(u)),Ax(u),{animationId:this.root.animationId,measuredBox:o,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:s}=this.options;if(!s)return Tt();const o=s.measureViewportBox();if(!(((l=this.scroll)==null?void 0:l.wasRoot)||this.path.some(Ox))){const{scroll:c}=this.root;c&&(vr(o.x,c.offset.x),vr(o.y,c.offset.y))}return o}removeElementScroll(s){var u;const o=Tt();if(ee(o,s),(u=this.scroll)!=null&&u.wasRoot)return o;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:f,options:d}=c;c!==this.root&&f&&d.layoutScroll&&(f.wasRoot&&ee(o,s),vr(o.x,f.offset.x),vr(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const u=Tt();ee(u,s);for(let l=0;l<this.path.length;l++){const c=this.path[l];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&gr(u,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Ne(c.latestValues)&&gr(u,c.latestValues)}return Ne(this.latestValues)&&gr(u,this.latestValues),u}removeTransform(s){const o=Tt();ee(o,s);for(let u=0;u<this.path.length;u++){const l=this.path[u];if(!l.instance||!Ne(l.latestValues))continue;Ha(l.latestValues)&&l.updateSnapshot();const c=Tt(),f=l.measurePageBox();ee(c,f),ul(o,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return Ne(this.latestValues)&&ul(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var d;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==o;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(d=this.parent)!=null&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:f}=this.options;if(!(!this.layout||!(c||f))){if(this.resolvedRelativeTargetAt=Vt.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),$r(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),ee(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Tt(),this.targetWithTransforms=Tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),V1(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ee(this.target,this.layout.layoutBox),Od(this.target,this.targetDelta)):ee(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),$r(this.relativeTargetOrigin,this.target,h.target),ee(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ha(this.parent.latestValues)||Ad(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const s=this.getLead(),o=!!this.resumingFrom||this!==s;let u=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(u=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Vt.timestamp&&(u=!1),u)return;const{layout:l,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||c))return;ee(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,d=this.treeScale.y;z1(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Tt());const{target:h}=s;if(!h){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(al(this.prevProjectionDelta.x,this.projectionDelta.x),al(this.prevProjectionDelta.y,this.projectionDelta.y)),Ur(this.projectionDelta,this.layoutCorrected,h,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==d||!hl(this.projectionDelta.x,this.prevProjectionDelta.x)||!hl(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),s){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pr(),this.projectionDelta=pr(),this.projectionDeltaWithTransform=pr()}setAnimationOrigin(s,o=!1){const u=this.snapshot,l=u?u.latestValues:{},c={...this.latestValues},f=pr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=Tt(),h=u?u.source:void 0,p=this.layout?this.layout.source:void 0,v=h!==p,g=this.getStack(),m=!g||g.members.length<=1,y=!!(v&&!m&&this.options.crossfade===!0&&!this.path.some(Rx));this.animationProgress=0;let x;this.mixTargetDelta=S=>{const C=S/1e3;ml(f.x,s.x,C),ml(f.y,s.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($r(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Px(this.relativeTarget,this.relativeTargetOrigin,d,C),x&&hx(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Tt()),ee(x,this.relativeTarget)),v&&(this.animationValues=c,ox(c,l,this.latestValues,C,y,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var o,u,l;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(l=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||l.stop(),this.pendingAnimation&&(Ve(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=St.update(()=>{Xn.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Tr(0)),this.currentAnimation=rx(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),s.onUpdate&&s.onUpdate(c)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:u,layout:l,latestValues:c}=s;if(!(!o||!u||!l)){if(this!==s&&this.layout&&l&&Hd(this.options.animationType,this.layout.layoutBox,l.layoutBox)){u=this.target||Tt();const f=Xt(this.layout.layoutBox.x);u.x.min=s.target.x.min,u.x.max=u.x.min+f;const d=Xt(this.layout.layoutBox.y);u.y.min=s.target.y.min,u.y.max=u.y.min+d}ee(o,u),gr(o,c),Ur(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new px),this.sharedNodes.get(s).add(o);const l=o.options.initialPromotionConfig;o.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:u}={}){const l=this.getStack();l&&l.promote(this,u),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:u}=s;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(o=!0),!o)return;const l={};u.z&&ta("z",s,l,this.animationValues);for(let c=0;c<Qi.length;c++)ta(`rotate${Qi[c]}`,s,l,this.animationValues),ta(`skew${Qi[c]}`,s,l,this.animationValues);s.render();for(const c in l)s.setStaticValue(c,l[c]),this.animationValues&&(this.animationValues[c]=l[c]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=Yn(o==null?void 0:o.pointerEvents)||"",s.transform=u?u(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=Yn(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ne(this.latestValues)&&(s.transform=u?u({},""):"none",this.hasProjected=!1);return}s.visibility="";const c=l.animationValues||l.latestValues;this.applyTransformsToTarget();let f=vx(this.projectionDeltaWithTransform,this.treeScale,c);u&&(f=u(c,f)),s.transform=f;const{x:d,y:h}=this.projectionDelta;s.transformOrigin=`${d.origin*100}% ${h.origin*100}% 0`,l.animationValues?s.opacity=l===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:s.opacity=l===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in sn){if(c[p]===void 0)continue;const{correct:v,applyTo:g,isCSSVariable:m}=sn[p],y=f==="none"?c[p]:v(c[p],l);if(g){const x=g.length;for(let S=0;S<x;S++)s[g[S]]=y}else m?this.options.visualElement.renderState.vars[p]=y:s[p]=y}this.options.layoutId&&(s.pointerEvents=l===this?Yn(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(pl),this.root.sharedNodes.clear()}}}function yx(t){t.updateLayout()}function xx(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:a}=t.options,s=e.source!==t.layout.source;a==="size"?re(f=>{const d=s?e.measuredBox[f]:e.layoutBox[f],h=Xt(d);d.min=n[f].min,d.max=d.min+h}):Hd(a,e.layoutBox,n)&&re(f=>{const d=s?e.measuredBox[f]:e.layoutBox[f],h=Xt(n[f]);d.max=d.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+h)});const o=pr();Ur(o,n,e.layoutBox);const u=pr();s?Ur(u,t.applyTransform(i,!0),e.measuredBox):Ur(u,n,e.layoutBox);const l=!Ld(o);let c=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:h}=f;if(d&&h){const p=Tt();$r(p,e.layoutBox,d.layoutBox);const v=Tt();$r(v,n,h.layoutBox),Nd(p,v)||(c=!0),f.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=p,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:u,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Sx(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function bx(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Cx(t){t.clearSnapshot()}function pl(t){t.clearMeasurements()}function vl(t){t.isLayoutDirty=!1}function Dx(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function gl(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Tx(t){t.resolveTargetDelta()}function Ex(t){t.calcProjection()}function wx(t){t.resetSkewAndRotation()}function Mx(t){t.removeLeadSnapshot()}function ml(t,e,r){t.translate=Ct(e.translate,0,r),t.scale=Ct(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function yl(t,e,r,n){t.min=Ct(e.min,r.min,n),t.max=Ct(e.max,r.max,n)}function Px(t,e,r,n){yl(t.x,e.x,r.x,n),yl(t.y,e.y,r.y,n)}function Rx(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const _x={duration:.45,ease:[.4,0,.1,1]},xl=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Sl=xl("applewebkit/")&&!xl("chrome/")?Math.round:ie;function bl(t){t.min=Sl(t.min),t.max=Sl(t.max)}function Ax(t){bl(t.x),bl(t.y)}function Hd(t,e,r){return t==="position"||t==="preserve-aspect"&&!B1(dl(e),dl(r),.2)}function Ox(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Ix=Wd({attachResizeListener:(t,e)=>un(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ea={current:void 0},Yd=Wd({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ea.current){const t=new Ix({});t.mount(window),t.setOptions({layoutScroll:!0}),ea.current=t}return ea.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),kx={pan:{Feature:J1},drag:{Feature:Z1,ProjectionNode:Yd,MeasureLayout:zd}};function Cl(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,a=n[i];a&&St.postRender(()=>a(e,xn(e)))}class Bx extends Ge{mount(){const{current:e}=this.node;e&&(this.unmount=cy(e,(r,n)=>(Cl(this.node,n,"Start"),i=>Cl(this.node,i,"End"))))}unmount(){}}class Vx extends Ge{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gn(un(this.node.current,"focus",()=>this.onFocus()),un(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Dl(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),a=n[i];a&&St.postRender(()=>a(e,xn(e)))}class zx extends Ge{mount(){const{current:e}=this.node;e&&(this.unmount=py(e,(r,n)=>(Dl(this.node,n,"Start"),(i,{success:a})=>Dl(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qa=new WeakMap,ra=new WeakMap,Fx=t=>{const e=qa.get(t.target);e&&e(t)},Gx=t=>{t.forEach(Fx)};function Lx({root:t,...e}){const r=t||document;ra.has(r)||ra.set(r,{});const n=ra.get(r),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(Gx,{root:t,...e})),n[i]}function Nx(t,e,r){const n=Lx(e);return qa.set(t,r),n.observe(t),()=>{qa.delete(t),n.unobserve(t)}}const jx={some:0,all:1};class Wx extends Ge{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:a}=e,s={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:jx[i]},o=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,a&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),d=l?c:f;d&&d(u)};return Nx(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(Hx(e,r))&&this.startObserver()}unmount(){}}function Hx({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const Yx={inView:{Feature:Wx},tap:{Feature:zx},focus:{Feature:Vx},hover:{Feature:Bx}},Xx={layout:{ProjectionNode:Yd,MeasureLayout:zd}},Ua={current:null},Xd={current:!1};function qx(){if(Xd.current=!0,!!Bs)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ua.current=t.matches;t.addEventListener("change",e),e()}else Ua.current=!1}const Ux=new WeakMap;function $x(t,e,r){for(const n in e){const i=e[n],a=r[n];if(Gt(i))t.addValue(n,i);else if(Gt(a))t.addValue(n,Tr(i,{owner:t}));else if(a!==i)if(t.hasValue(n)){const s=t.getValue(n);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(n);t.addValue(n,Tr(s!==void 0?s:i,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const Tl=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Kx{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Js,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=Kt.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,St.render(this.render,!1,!0))};const{latestValues:u,renderState:l}=s;this.latestValues=u,this.baseTarget={...u},this.initialValues=r.initial?{...u}:{},this.renderState=l,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=Ti(r),this.isVariantNode=hd(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const d in f){const h=f[d];u[d]!==void 0&&Gt(h)&&h.set(u[d],!1)}}mount(e){this.current=e,Ux.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),Xd.current||qx(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ua.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ve(this.notifyUpdate),Ve(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Or.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&St.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=r.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{i(),a(),s&&s(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Er){const r=Er[e];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<Tl.length;n++){const i=Tl[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=$x(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Tr(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(bf(n)||Df(n))?n=parseFloat(n):!my(n)&&ze.test(r)&&(n=id(e,r)),this.setBaseTarget(e,Gt(n)?n.get():n)),Gt(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var a;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const s=fo(this.props,r,(a=this.presenceContext)==null?void 0:a.custom);s&&(n=s[e])}if(r&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Gt(i)?i:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Ls),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class qd extends Kx{constructor(){super(...arguments),this.KeyframeResolver=ay}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Gt(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Ud(t,{style:e,vars:r},n,i){const a=t.style;let s;for(s in e)a[s]=e[s];i==null||i.applyProjectionStyles(a,n);for(s in r)a.setProperty(s,r[s])}function Zx(t){return window.getComputedStyle(t)}class Jx extends qd{constructor(){super(...arguments),this.type="html",this.renderInstance=Ud}readValueFromInstance(e,r){var n;if(Or.has(r))return(n=this.projection)!=null&&n.isProjecting?Ba(r):Tm(e,r);{const i=Zx(e),a=(Ws(r)?i.getPropertyValue(r):i[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:r}){return Id(e,r)}build(e,r,n){uo(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return ho(e,r,n)}}const $d=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Qx(t,e,r,n){Ud(t,e,void 0,n);for(const i in e.attrs)t.setAttribute($d.has(i)?i:oo(i),e.attrs[i])}class tS extends qd{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Tt}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Or.has(r)){const n=nd(r);return n&&n.default||0}return r=$d.has(r)?r:oo(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return Dd(e,r,n)}build(e,r,n){xd(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,i){Qx(e,r,n,i)}mount(e){this.isSVGTag=bd(e.tagName),super.mount(e)}}const eS=(t,e)=>co(t)?new tS(e):new Jx(e,{allowProjection:t!==L.Fragment}),rS=e1({...M1,...Yx,...kx,...Xx},eS),El=wy(rS),hS=({opened:t,onClose:e,onSubmit:r,title:n,submitButtonText:i,initialData:a})=>{const[s,o]=L.useState(!1),[u,l]=L.useState({name:"",orientation:"landscape",regions:[],...a}),[c,f]=L.useState({}),[d,h]=L.useState(!1),[p,v]=L.useState(!1),g=L.useRef(null),[m,y]=L.useState(null),[x,S]=L.useState(null);L.useEffect(()=>{if(t){const O={name:"",orientation:"landscape",regions:[],...a};l(O),g.current=O,v(!1),h(!0)}else h(!1),l({name:"",orientation:"landscape",regions:[]}),v(!1),g.current=null},[t,a]);const C=()=>{const O={};return u.name.trim().length===0&&(O.name="レイアウト名は必須です"),u.regions.length===0&&(O.regions="少なくとも1つのリージョンが必要です"),f(O),Object.keys(O).length===0},b=async O=>{if(O.preventDefault(),!!C()){o(!0);try{await r({name:u.name.trim(),orientation:u.orientation,regions:u.regions}),T(),e()}catch(B){console.error("レイアウト操作エラー:",B)}finally{o(!1)}}},T=()=>{l({name:"",orientation:"landscape",regions:[]}),f({})},D=()=>{p?xh.openConfirmModal({title:"変更を破棄しますか？",children:W.jsx(ue,{size:"sm",children:"保存されていない変更があります。本当に閉じてもよろしいですか？"}),labels:{confirm:"変更を破棄",cancel:"キャンセル"},confirmProps:{color:"red"},onConfirm:()=>{T(),e()}}):(T(),e())},w=O=>{l(B=>({...B,regions:O})),O.length>0&&c.regions&&f(B=>({...B,regions:void 0})),E({...u,regions:O})},E=L.useCallback(O=>{if(!g.current)return;const B=O.name!==g.current.name,F=O.orientation!==g.current.orientation,G=JSON.stringify(O.regions)!==JSON.stringify(g.current.regions);v(B||F||G)},[]),A=L.useCallback((O,B)=>{y(B),O.dataTransfer.setData("text/plain",B.toString()),O.dataTransfer.effectAllowed="move"},[]),_=L.useCallback(()=>{y(null),S(null)},[]),R=L.useCallback((O,B)=>{O.preventDefault(),O.dataTransfer.dropEffect="move",S(B)},[]),I=L.useCallback(()=>{S(null)},[]),k=L.useCallback((O,B)=>{O.preventDefault();const F=Number.parseInt(O.dataTransfer.getData("text/plain"),10);if(F===B){y(null),S(null);return}const G=[...u.regions].sort((Y,q)=>(q.zIndex||0)-(Y.zIndex||0)),[j]=G.splice(F,1);G.splice(B,0,j);const z=new Map;G.forEach((Y,q)=>{z.set(Y.id,G.length-1-q)});const U=u.regions.map(Y=>({...Y,zIndex:z.get(Y.id)||0}));setTimeout(()=>{y(null),S(null)},50);const $={...u,regions:U};l($),E($)},[u,E]);return W.jsx(ah,{opened:t,onClose:D,title:n,centered:!0,size:"95%",styles:{content:{maxWidth:"1200px",height:"750px",maxHeight:"90vh"},body:{height:"calc(750px - 60px)",overflow:"hidden",display:"flex",flexDirection:"column"}},children:W.jsxs(Nn,{gap:"md",w:"100%",flex:1,direction:"column",children:[W.jsxs(Nn,{gap:"md",w:"100%",flex:1,children:[W.jsx($t,{w:"380px",flex:"0 0 380px",style:{overflow:"auto"},children:W.jsxs(qn,{gap:"md",children:[W.jsx(lh,{label:"レイアウト名",placeholder:"レイアウト名を入力してください",required:!0,value:u.name,onChange:O=>{const B={...u,name:O.target.value};l(B),E(B)},error:c.name,"aria-required":"true","aria-label":"レイアウト名入力"}),W.jsx(sh,{label:"向き",placeholder:"向きを選択してください",required:!0,value:u.orientation,onChange:O=>{const B={...u,orientation:O};l(B),E(B)},data:[{value:"landscape",label:"横向き (1920x1080)"},{value:"portrait-right",label:"縦向き右回転 (1080x1920)"},{value:"portrait-left",label:"縦向き左回転 (1080x1920)"}],error:c.orientation,"aria-required":"true","aria-label":"画面向きの選択"}),c.regions&&W.jsx(ue,{c:"red.6",size:"sm",children:c.regions}),u.regions.length>1&&W.jsxs($t,{children:[W.jsx(ue,{size:"sm",fw:500,mb:"xs",children:"表示順序（上が前面、下が背面）"}),W.jsx(qn,{gap:"xs",children:W.jsx(Au,{children:[...u.regions].sort((O,B)=>(B.zIndex||0)-(O.zIndex||0)).map((O,B)=>{const F=m===B,G=x===B,j=u.regions.findIndex(z=>z.id===O.id);return W.jsxs("div",{children:[W.jsx(Au,{children:G&&m!==B&&m!==null&&W.jsx(El.div,{initial:{opacity:0,height:0,scaleY:0},animate:{opacity:1,height:4,scaleY:1},exit:{opacity:0,height:0,scaleY:0},transition:{duration:.2,ease:"easeInOut"},style:{backgroundColor:"#4a90e2",borderRadius:"2px",margin:"4px 0",transformOrigin:"center"}},`indicator-${O.id}-${B}`)}),W.jsx(El.div,{layout:!0,layoutId:`region-${O.id}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0,scale:F?1.02:1},exit:{opacity:0,y:-20},transition:{layout:{duration:.3,ease:"easeInOut"},opacity:{duration:.2},scale:{duration:.2,ease:"easeOut"}},whileDrag:{scale:1.05,rotate:1,zIndex:100,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.2)"},dragConstraints:{left:0,right:0},dragElastic:.1,children:W.jsx(ch,{p:"xs",withBorder:!0,draggable:!0,style:{cursor:F?"grabbing":"grab",opacity:F?.9:1,backgroundColor:G&&m!==B?"#e3f2fd":void 0,borderColor:G&&m!==B?"#4a90e2":void 0},onDragStart:z=>A(z,B),onDragEnd:_,onDragOver:z=>R(z,B),onDragLeave:I,onDrop:z=>k(z,B),children:W.jsxs(Re,{gap:"sm",wrap:"nowrap",children:[W.jsx($t,{c:"gray.5",children:W.jsx(Mh,{size:16})}),W.jsx(Nn,{miw:"24px",h:"24px",bg:"#4a90e2",style:{borderRadius:"50%"},align:"center",justify:"center",children:W.jsx(ue,{size:"xs",c:"white",fw:600,children:B+1})}),W.jsxs($t,{flex:1,children:[W.jsxs(ue,{size:"sm",fw:500,children:["リージョン ",j+1]}),W.jsxs(ue,{size:"xs",c:"dimmed",children:["(",O.x,", ",O.y,") ",O.width,"×",O.height]})]})]})})},O.id)]},`wrapper-${O.id}`)})})}),W.jsx(ue,{size:"xs",c:"dimmed",mt:"xs",children:"ドラッグして順序を変更できます。上にあるリージョンほど前面に表示されます。"})]})]})}),W.jsx($t,{flex:1,style:{minWidth:0},children:d&&W.jsx(b0,{regions:u.regions,onRegionsChange:w,orientation:u.orientation})})]}),W.jsx($t,{component:"form",onSubmit:b,children:W.jsxs(Re,{justify:"flex-end",mt:"md",pt:"md",style:{borderTop:"1px solid var(--mantine-color-gray-3)"},children:[W.jsx(Fr,{variant:"subtle",leftSection:W.jsx(wl,{size:16}),onClick:D,disabled:s,children:"キャンセル"}),W.jsx(Fr,{type:"submit",leftSection:W.jsx(oh,{size:16}),loading:s,children:i})]})})]})})};export{Au as A,bh as I,hS as L,Ol as a,Sh as b,Mh as c,El as m};
